(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1097:function(t,e,i){var n=i(423),o=i(1098);i(424);function s(t){return null==t}function r(t){(t=function(t){var e={};for(var i in t)e[i]=t[i];return e}(t||{})).whiteList=t.whiteList||n.whiteList,t.onAttr=t.onAttr||n.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||n.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||n.safeAttrValue,this.options=t}r.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,i=e.whiteList,n=e.onAttr,r=e.onIgnoreAttr,a=e.safeAttrValue;return o(t,(function(t,e,o,l,c){var u=i[o],h=!1;if(!0===u?h=u:"function"==typeof u?h=u(l):u instanceof RegExp&&(h=u.test(l)),!0!==h&&(h=!1),l=a(o,l)){var d,f={position:e,sourcePosition:t,source:c,isWhite:h};return h?s(d=n(o,l,f))?o+":"+l:d:s(d=r(o,l,f))?void 0:d}}))},t.exports=r},1098:function(t,e,i){var n=i(424);t.exports=function(t,e){";"!==(t=n.trimRight(t))[t.length-1]&&(t+=";");var i=t.length,o=!1,s=0,r=0,a="";function l(){if(!o){var i=n.trim(t.slice(s,r)),l=i.indexOf(":");if(-1!==l){var c=n.trim(i.slice(0,l)),u=n.trim(i.slice(l+1));if(c){var h=e(s,a.length,c,u,i);h&&(a+=h+"; ")}}}s=r+1}for(;r<i;r++){var c=t[r];if("/"===c&&"*"===t[r+1]){var u=t.indexOf("*/",r+2);if(-1===u)break;s=(r=u+1)+1,o=!1}else"("===c?o=!0:")"===c?o=!1:";"===c?o||l():"\n"===c&&l()}return n.trim(a)}},1099:function(t,e,i){var n=i(265).FilterCSS,o=i(422),s=i(425),r=s.parseTag,a=s.parseAttr,l=i(266);function c(t){return null==t}function u(t){(t=function(t){var e={};for(var i in t)e[i]=t[i];return e}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=o.onIgnoreTagStripAll),t.whiteList=t.whiteList||o.whiteList,t.onTag=t.onTag||o.onTag,t.onTagAttr=t.onTagAttr||o.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||o.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||o.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||o.safeAttrValue,t.escapeHtml=t.escapeHtml||o.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new n(t.css))}u.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,i=e.whiteList,n=e.onTag,s=e.onIgnoreTag,u=e.onTagAttr,h=e.onIgnoreTagAttr,d=e.safeAttrValue,f=e.escapeHtml,p=this.cssFilter;e.stripBlankChar&&(t=o.stripBlankChar(t)),e.allowCommentTag||(t=o.stripCommentTag(t));var m=!1;if(e.stripIgnoreTagBody){m=o.StripTagBody(e.stripIgnoreTagBody,s);s=m.onIgnoreTag}var _=r(t,(function(t,e,o,r,m){var _,g={sourcePosition:t,position:e,isClosing:m,isWhite:i.hasOwnProperty(o)};if(!c(_=n(o,r,g)))return _;if(g.isWhite){if(g.isClosing)return"</"+o+">";var v=function(t){var e=l.spaceIndex(t);if(-1===e)return{html:"",closing:"/"===t[t.length-2]};var i="/"===(t=l.trim(t.slice(e+1,-1)))[t.length-1];return i&&(t=l.trim(t.slice(0,-1))),{html:t,closing:i}}(r),b=i[o],y=a(v.html,(function(t,e){var i,n=-1!==l.indexOf(b,t);return c(i=u(o,t,e,n))?n?(e=d(o,t,e,p))?t+'="'+e+'"':t:c(i=h(o,t,e,n))?void 0:i:i}));r="<"+o;return y&&(r+=" "+y),v.closing&&(r+=" /"),r+=">"}return c(_=s(o,r,g))?f(r):_}),f);return m&&(_=m.remove(_)),_},t.exports=u},1111:function(t,e,i){"use strict";i.r(e);var n=window,o=n.document,s=function(){return!1},r=n.attachEvent&&!n.addEventListener,a=["","-webkit-","-moz-","-o-"].filter((function(t){var e=o.createElement("div");return e.style.cssText="width:"+t+"calc(9px)",!!e.style.length})).shift()+"calc",l=function(t){return"string"==typeof t||t instanceof String},c=function(t){if(l(t)){var e=o.querySelector(t);if(!e)throw new Error("Selector "+t+" did not match a DOM element");return e}return t},u=function(t,e,i){var n=t[e];return void 0!==n?n:i},h=function(t,e,i,n){if(e){if("end"===n)return 0;if("center"===n)return t/2}else if(i){if("start"===n)return 0;if("center"===n)return t/2}return t},d=function(t,e){var i=o.createElement("div");return i.className="gutter gutter-"+e,i},f=function(t,e,i){var n={};return l(e)?n[t]=e:n[t]=r?e+"%":a+"("+e+"% - "+i+"px)",n},p=function(t,e){var i;return(i={})[t]=e+"px",i};e.default=function(t,e){void 0===e&&(e={});var i,a,l,m,_,g,v=t;Array.from&&(v=Array.from(v));var b=c(v[0]).parentNode,y=getComputedStyle?getComputedStyle(b):null,k=y?y.flexDirection:null,M=u(e,"sizes")||v.map((function(){return 100/v.length})),w=u(e,"minSize",100),E=Array.isArray(w)?w:v.map((function(){return w})),x=u(e,"expandToMin",!1),S=u(e,"gutterSize",10),T=u(e,"gutterAlign","center"),O=u(e,"snapOffset",30),D=u(e,"dragInterval",1),B=u(e,"direction","horizontal"),I=u(e,"cursor","horizontal"===B?"col-resize":"row-resize"),C=u(e,"gutter",d),P=u(e,"elementStyle",f),L=u(e,"gutterStyle",p);function N(t,e,n,o){var s=P(i,e,n,o);Object.keys(s).forEach((function(e){t.style[e]=s[e]}))}function F(){return g.map((function(t){return t.size}))}function R(t){return"touches"in t?t.touches[0][a]:t[a]}function H(t){var e=g[this.a],i=g[this.b],n=e.size+i.size;e.size=t/this.size*n,i.size=n-t/this.size*n,N(e.element,e.size,this._b,e.i),N(i.element,i.size,this._c,i.i)}function j(t){var i,n=g[this.a],o=g[this.b];this.dragging&&(i=R(t)-this.start+(this._b-this.dragOffset),D>1&&(i=Math.round(i/D)*D),i<=n.minSize+O+this._b?i=n.minSize+this._b:i>=this.size-(o.minSize+O+this._c)&&(i=this.size-(o.minSize+this._c)),H.call(this,i),u(e,"onDrag",s)())}function A(){var t=g[this.a].element,e=g[this.b].element,n=t.getBoundingClientRect(),o=e.getBoundingClientRect();this.size=n[i]+o[i]+this._b+this._c,this.start=n[l],this.end=n[m]}function Y(t){var e=function(t){if(!getComputedStyle)return null;var e=getComputedStyle(t);if(!e)return null;var i=t[_];return 0===i?null:i-="horizontal"===B?parseFloat(e.paddingLeft)+parseFloat(e.paddingRight):parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)}(b);if(null===e)return t;if(E.reduce((function(t,e){return t+e}),0)>e)return t;var i=0,n=[],o=t.map((function(o,s){var r=e*o/100,a=h(S,0===s,s===t.length-1,T),l=E[s]+a;return r<l?(i+=l-r,n.push(0),l):(n.push(r-l),r)}));return 0===i?t:o.map((function(t,o){var s=t;if(i>0&&n[o]-i>0){var r=Math.min(i,n[o]-i);i-=r,s=t-r}return s/e*100}))}function U(){var t=g[this.a].element,i=g[this.b].element;this.dragging&&u(e,"onDragEnd",s)(F()),this.dragging=!1,n.removeEventListener("mouseup",this.stop),n.removeEventListener("touchend",this.stop),n.removeEventListener("touchcancel",this.stop),n.removeEventListener("mousemove",this.move),n.removeEventListener("touchmove",this.move),this.stop=null,this.move=null,t.removeEventListener("selectstart",s),t.removeEventListener("dragstart",s),i.removeEventListener("selectstart",s),i.removeEventListener("dragstart",s),t.style.userSelect="",t.style.webkitUserSelect="",t.style.MozUserSelect="",t.style.pointerEvents="",i.style.userSelect="",i.style.webkitUserSelect="",i.style.MozUserSelect="",i.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor="",o.body.style.cursor=""}function V(t){if(!("button"in t)||0===t.button){var i=g[this.a].element,r=g[this.b].element;this.dragging||u(e,"onDragStart",s)(F()),t.preventDefault(),this.dragging=!0,this.move=j.bind(this),this.stop=U.bind(this),n.addEventListener("mouseup",this.stop),n.addEventListener("touchend",this.stop),n.addEventListener("touchcancel",this.stop),n.addEventListener("mousemove",this.move),n.addEventListener("touchmove",this.move),i.addEventListener("selectstart",s),i.addEventListener("dragstart",s),r.addEventListener("selectstart",s),r.addEventListener("dragstart",s),i.style.userSelect="none",i.style.webkitUserSelect="none",i.style.MozUserSelect="none",i.style.pointerEvents="none",r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",this.gutter.style.cursor=I,this.parent.style.cursor=I,o.body.style.cursor=I,A.call(this),this.dragOffset=R(t)-this.end}}"horizontal"===B?(i="width",a="clientX",l="left",m="right",_="clientWidth"):"vertical"===B&&(i="height",a="clientY",l="top",m="bottom",_="clientHeight"),M=Y(M);var $=[];function W(t){var e=t.i===$.length,i=e?$[t.i-1]:$[t.i];A.call(i);var n=e?i.size-t.minSize-i._c:t.minSize+i._b;H.call(i,n)}function z(t){var e=Y(t);e.forEach((function(t,i){if(i>0){var n=$[i-1],o=g[n.a],s=g[n.b];o.size=e[i-1],s.size=t,N(o.element,o.size,n._b,o.i),N(s.element,s.size,n._c,s.i)}}))}function q(t,e){$.forEach((function(n){if(!0!==e?n.parent.removeChild(n.gutter):(n.gutter.removeEventListener("mousedown",n._a),n.gutter.removeEventListener("touchstart",n._a)),!0!==t){var o=P(i,n.a.size,n._b);Object.keys(o).forEach((function(t){g[n.a].element.style[t]="",g[n.b].element.style[t]=""}))}}))}return(g=v.map((function(t,e){var n,o={element:c(t),size:M[e],minSize:E[e],i:e};if(e>0&&((n={a:e-1,b:e,dragging:!1,direction:B,parent:b})._b=h(S,e-1==0,!1,T),n._c=h(S,!1,e===v.length-1,T),"row-reverse"===k||"column-reverse"===k)){var s=n.a;n.a=n.b,n.b=s}if(!r&&e>0){var a=C(e,B,o.element);!function(t,e,n){var o=L(i,e,n);Object.keys(o).forEach((function(e){t.style[e]=o[e]}))}(a,S,e),n._a=V.bind(n),a.addEventListener("mousedown",n._a),a.addEventListener("touchstart",n._a),b.insertBefore(a,o.element),n.gutter=a}return N(o.element,o.size,h(S,0===e,e===v.length-1,T),e),e>0&&$.push(n),o}))).forEach((function(t){var e=t.element.getBoundingClientRect()[i];e<t.minSize&&(x?W(t):t.minSize=e)})),r?{setSizes:z,destroy:q}:{setSizes:z,getSizes:F,collapse:function(t){W(g[t])},destroy:q,parent:b,pairs:$}}},1112:function(t,e,i){var n=i(57),o=i(1113),s=i(1114),r=Math.max,a=Math.min;t.exports=function(t,e,i){var l,c,u,h,d,f,p=0,m=!1,_=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var i=l,n=c;return l=c=void 0,p=e,h=t.apply(n,i)}function b(t){return p=t,d=setTimeout(k,e),m?v(t):h}function y(t){var i=t-f;return void 0===f||i>=e||i<0||_&&t-p>=u}function k(){var t=o();if(y(t))return M(t);d=setTimeout(k,function(t){var i=e-(t-f);return _?a(i,u-(t-p)):i}(t))}function M(t){return d=void 0,g&&l?v(t):(l=c=void 0,h)}function w(){var t=o(),i=y(t);if(l=arguments,c=this,f=t,i){if(void 0===d)return b(f);if(_)return clearTimeout(d),d=setTimeout(k,e),v(f)}return void 0===d&&(d=setTimeout(k,e)),h}return e=s(e)||0,n(i)&&(m=!!i.leading,u=(_="maxWait"in i)?r(s(i.maxWait)||0,e):u,g="trailing"in i?!!i.trailing:g),w.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=c=d=void 0},w.flush=function(){return void 0===d?h:M(o())},w}},1113:function(t,e,i){var n=i(24);t.exports=function(){return n.Date.now()}},1114:function(t,e,i){var n=i(57),o=i(168),s=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var i=a.test(t);return i||l.test(t)?c(t.slice(2),i?2:8):r.test(t)?NaN:+t}},1115:function(t,e,i){var n=i(169),o=Object.prototype,s=o.hasOwnProperty,r=o.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),i=t[a];try{t[a]=void 0;var n=!0}catch(t){}var o=r.call(t);return n&&(e?t[a]=i:delete t[a]),o}},1116:function(t,e){var i=Object.prototype.toString;t.exports=function(t){return i.call(t)}},1201:function(t,e,i){var n;window,n=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i(1),r=(n=s)&&n.__esModule?n:{default:n},a={create:function(t,e,i,n,o,s,a){return new r.default(t,e,i,n,o,s,a)},TimedOutError:i(2).TimedOutError};void 0!==("undefined"==typeof window?"undefined":o(window))&&(window.longTaskRequester=a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(2);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,i,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2e4,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1e3;s(this,t),this._totalTimeout=r,this._softTimeout=a,this._progressBarCallback=e,this._hideProgressBarCallback=i,this._mainRequestFunc=n,this.taskStatusFunc=o,this._pollTimeout=l}return n(t,[{key:"run",value:function(){var t=this;return this._isDone=!1,this._totalTimeoutTimer=setTimeout(this._onTotalTimeoutIsOver.bind(this),this._totalTimeout),this._softTimeoutTimer=setTimeout(this._onSoftTimeoutIsOver.bind(this),this._softTimeout),this._promise=new Promise((function(e,i){t._resolve=e,t._reject=i,t._mainRequestFunc().then((function(e){200===e.statusCode?e.data?t._makeResolve(e.data):e.error&&t._makeReject(e.error):201===e.statusCode&&e.data.task_id?(t._progressBarCallback&&t._progressBarCallback(0),t.taskStatusFunc&&(t._taskStatusCall=t.taskStatusFunc(e.data.task_id)),setTimeout(t._poll.bind(t),self._pollTimeout)):t._makeReject(e)}))})),this._promise}},{key:"_poll",value:function(){var t=this;t._taskStatusCall().then((function(e){200===e.statusCode?t._makeResolve(e.data):102===e.statusCode?(t._progressBarCallback&&t._progressBarCallback(Number(e.data)),setTimeout(t._poll.bind(t),self._pollTimeout)):t._makeReject(e)}))}},{key:"_onTotalTimeoutIsOver",value:function(){this._makeReject(new o.TimedOutError)}},{key:"_onSoftTimeoutIsOver",value:function(){this._progressBarCallback&&this._progressBarCallback(0)}},{key:"_makeReject",value:function(t){this._isDone||(this._hideProgressBarCallback&&this._hideProgressBarCallback(),this._reject(t),this._isDone=!0)}},{key:"_makeResolve",value:function(t){this._isDone||(this._hideProgressBarCallback&&this._hideProgressBarCallback(),this._resolve(t),this._isDone=!0)}}]),t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.TimedOutError=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),n(e,[{key:"toString",value:function(){return"TimedOutError"}}]),e}()}])},t.exports=n()},168:function(t,e,i){var n=i(58),o=i(59);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},169:function(t,e,i){var n=i(24).Symbol;t.exports=n},24:function(t,e,i){var n=i(553),o="object"==typeof self&&self&&self.Object===Object&&self,s=n||o||Function("return this")();t.exports=s},264:function(t,e,i){var n=i(422),o=i(425),s=i(1099);for(var r in(e=t.exports=function(t,e){return new s(e).process(t)}).FilterXSS=s,n)e[r]=n[r];for(var r in o)e[r]=o[r];"undefined"!=typeof window&&(window.filterXSS=t.exports)},265:function(t,e,i){var n=i(423),o=i(1097);for(var s in(e=t.exports=function(t,e){return new o(e).process(t)}).FilterCSS=o,n)e[s]=n[s];"undefined"!=typeof window&&(window.filterCSS=t.exports)},266:function(t,e){t.exports={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,o;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,o=t.length;n<o;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/.exec(t);return e?e.index:-1}}},422:function(t,e,i){var n=i(265).FilterCSS,o=i(265).getDefaultWhiteList,s=i(266);function r(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var a=new n;function l(t){return t.replace(c,"&lt;").replace(u,"&gt;")}var c=/</g,u=/>/g,h=/"/g,d=/&quot;/g,f=/&#([a-zA-Z0-9]*);?/gim,p=/&colon;?/gim,m=/&newline;?/gim,_=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,g=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,v=/u\s*r\s*l\s*\(.*/gi;function b(t){return t.replace(h,"&quot;")}function y(t){return t.replace(d,'"')}function k(t){return t.replace(f,(function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))}))}function M(t){return t.replace(p,":").replace(m," ")}function w(t){for(var e="",i=0,n=t.length;i<n;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return s.trim(e)}function E(t){return t=w(t=M(t=k(t=y(t))))}function x(t){return t=l(t=b(t))}var S=/<!--[\s\S]*?-->/g;e.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},e.getDefaultWhiteList=r,e.onTag=function(t,e,i){},e.onIgnoreTag=function(t,e,i){},e.onTagAttr=function(t,e,i){},e.onIgnoreTagAttr=function(t,e,i){},e.safeAttrValue=function(t,e,i,n){if(i=E(i),"href"===e||"src"===e){if("#"===(i=s.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===e){if(_.lastIndex=0,_.test(i))return""}else if("style"===e){if(g.lastIndex=0,g.test(i))return"";if(v.lastIndex=0,v.test(i)&&(_.lastIndex=0,_.test(i)))return"";!1!==n&&(i=(n=n||a).process(i))}return i=x(i)},e.escapeHtml=l,e.escapeQuote=b,e.unescapeQuote=y,e.escapeHtmlEntities=k,e.escapeDangerHtml5Entities=M,e.clearNonPrintableCharacter=w,e.friendlyAttrValue=E,e.escapeAttrValue=x,e.onIgnoreTagStripAll=function(){return""},e.StripTagBody=function(t,e){"function"!=typeof e&&(e=function(){});var i=!Array.isArray(t),n=[],o=!1;return{onIgnoreTag:function(r,a,l){if(function(e){return!!i||-1!==s.indexOf(t,e)}(r)){if(l.isClosing){var c="[/removed]",u=l.position+c.length;return n.push([!1!==o?o:l.position,u]),o=!1,c}return o||(o=l.position),"[removed]"}return e(r,a,l)},remove:function(t){var e="",i=0;return s.forEach(n,(function(n){e+=t.slice(i,n[0]),i=n[1]})),e+=t.slice(i)}}},e.stripCommentTag=function(t){return t.replace(S,"")},e.stripBlankChar=function(t){var e=t.split("");return(e=e.filter((function(t){var e=t.charCodeAt(0);return 127!==e&&(!(e<=31)||(10===e||13===e))}))).join("")},e.cssFilter=a,e.getDefaultCSSWhiteList=o},423:function(t,e){function i(){var t={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return t}var n=/javascript\s*\:/gim;e.whiteList=i(),e.getDefaultWhiteList=i,e.onAttr=function(t,e,i){},e.onIgnoreAttr=function(t,e,i){},e.safeAttrValue=function(t,e){return n.test(e)?"":e}},424:function(t,e){t.exports={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,o;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,o=t.length;n<o;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},425:function(t,e,i){var n=i(266);function o(t){var e=n.spaceIndex(t);if(-1===e)var i=t.slice(1,-1);else i=t.slice(1,e+1);return"/"===(i=n.trim(i).toLowerCase()).slice(0,1)&&(i=i.slice(1)),"/"===i.slice(-1)&&(i=i.slice(0,-1)),i}function s(t){return"</"===t.slice(0,2)}var r=/[^a-zA-Z0-9_:\.\-]/gim;function a(t,e){for(;e<t.length;e++){var i=t[e];if(" "!==i)return"="===i?e:-1}}function l(t,e){for(;e>0;e--){var i=t[e];if(" "!==i)return"="===i?e:-1}}function c(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}e.parseTag=function(t,e,i){var n="",r=0,a=!1,l=!1,c=0,u=t.length,h="",d="";for(c=0;c<u;c++){var f=t.charAt(c);if(!1===a){if("<"===f){a=c;continue}}else if(!1===l){if("<"===f){n+=i(t.slice(r,c)),a=c,r=c;continue}if(">"===f){n+=i(t.slice(r,a)),h=o(d=t.slice(a,c+1)),n+=e(a,n.length,h,d,s(d)),r=c+1,a=!1;continue}if(('"'===f||"'"===f)&&"="===t.charAt(c-1)){l=f;continue}}else if(f===l){l=!1;continue}}return r<t.length&&(n+=i(t.substr(r))),n},e.parseAttr=function(t,e){var i=0,o=[],s=!1,u=t.length;function h(t,i){if(!((t=(t=n.trim(t)).replace(r,"").toLowerCase()).length<1)){var s=e(t,i||"");s&&o.push(s)}}for(var d=0;d<u;d++){var f,p=t.charAt(d);if(!1!==s||"="!==p)if(!1===s||d!==i||'"'!==p&&"'"!==p||"="!==t.charAt(d-1))if(/\s|\n|\t/.test(p)){if(t=t.replace(/\s|\n|\t/g," "),!1===s){if(-1===(f=a(t,d))){h(n.trim(t.slice(i,d))),s=!1,i=d+1;continue}d=f-1;continue}if(-1===(f=l(t,d-1))){h(s,c(n.trim(t.slice(i,d)))),s=!1,i=d+1;continue}}else;else{if(-1===(f=t.indexOf(p,d+1)))break;h(s,n.trim(t.slice(i+1,f))),s=!1,i=(d=f)+1}else s=t.slice(i,d),i=d+1}return i<t.length&&(!1===s?h(t.slice(i)):h(s,c(n.trim(t.slice(i))))),n.trim(o.join(" "))}},477:function(t,e){jQuery.fn.snicked=function(t){var e,i,n=this.snickedCore(),o={};return t&&(o=t.autocomplete,t.indentation),e={rule:null},i={next:function(t,i){var n=e.rule.points.shift(),o=t.val().length;return e.rule.offset+=o-e.rule.length,e.rule.length=o,i.start=n+e.rule.offset,i.end=i.start,t.setSelection(i),0!=e.rule.points.length||(e.rule=null,!0)},start:function(t,n,s,r,a){var l,c,u,h=a.snippet,d=null,f=t.getIndentation(),p=h.split("\n"),m=s.match(a.beforeToReplace||a.before).concat(r.match(a.after));if(a.increment&&(l=parseInt(m[a.increment]),m[a.increment]=m[a.increment].replace(l,l+1)),a.orderedListLevelDown){if(m[1]=m[1].substr(0,m[1].length-2),c=m[1].length,!(u=("\n"+s).match(new RegExp("(\\n {0,"+c+"})((([\\w]{1}|[0-9]{1,3})\\.)|\\*)(\\+(?= )| |\\#(?=[0-9]+ )).+\\n( {"+(c+2)+",}((\\*)|([\\w]+\\.))(\\+(?= )| |\\#(?=[0-9]+ )).*\\n*)+$"))))return{nextRule:o.rules["numbered"===a.orderedListLevelDown?22:17]};(l=parseInt(u[2]))?m[2]=m[2].replace(m[2],l+1+"."):l||(m[2]=u[2])}for(t.setBefore(n,s.replace(a.beforeToReplace||a.before,"")),t.setAfter(n,r.replace(a.after,"")),s=t.getBefore(n),r=t.getAfter(n),h=(p=jQuery(p).map((function(t,e){return t?f+e:e}))).get().join("\n"),e.rule={length:0,offset:0,selection:n,points:[]};d=h.match(/\{#([0-9]+)\}/);){var _=parseInt(d[1]);h=m[_]?h.replace(d[0],m[_]):h.replace(d[0],"")}for(;d=h.match(/\{\$[0-9]+\}/);)e.rule.points.push(h.indexOf(d[0])+s.length),h=h.replace(d[0],"");return e.rule.points.length?(t.insertBefore(n,h),e.rule.length=t.val().length,e.rule.position=s.length,i.next(t,n),!0):(s+=h,e.rule=null,t.setBefore(n,s),!0)}},n.addKeyHandler((function(t,n,s){var r=t.getSelection(),a=t.getBefore(r);if(!e.rule&&o.keys[n]){var l=o.keys[n],c=t.getAfter(r),u=!1,h=function(e,n){return n.key!=l||(n.before||(n.before=/$/),n.after||(n.after=/^/),!n.before.test("\n"+a)||!n.after.test(c)||((u=i.start(t,r,a,c,n)).nextRule&&h(null,u.nextRule),!1))};return jQuery(o.rules).each(h),u}return!1})),n},jQuery.fn.snickedCore=function(){var t=this;return(t=t.map((function(){var t=jQuery(this);return t.getIndentation=function(){return t.selection.getPrecedingText().match(/(\t*).*$/).pop()},t.getSelection=function(){var e=t.get(0);return{start:e.selectionStart,end:e.selectionEnd}},t.setSelection=function(e){var i=t.get(0);i.selectionStart=e.start,i.selectionEnd=e.end},t.getAfter=function(e){t.get(0);return t.val().slice(e.end)},t.insertAfter=function(e,i){var n=t.getAfter(e);t.setAfter(e,i+n)},t.setAfter=function(e,i){var n=t.val().slice(0,e.end);t.val(n+i),t.setSelection(e)},t.getBefore=function(e){return t.val().slice(0,e.start)},t.insertBefore=function(e,i){var n=t.getBefore(e);t.setBefore(e,n+i)},t.setBefore=function(e,i){var n=t.val().slice(0,e.start),o=t.val().slice(e.start),s=n.length-i.length;e.start-=s,e.end-=s,t.val(i+o),t.setSelection(e)},t.selection={},t.selection.getRange=function(){var e=t.get(0);return{start:e.selectionStart,end:e.selectionEnd}},t.selection.setRange=function(e,i){var n=t.get(0);(!i||i<e)&&(i=e),n.selectionStart=e,n.selectionEnd=i},t.selection.getText=function(){var e=t.get(0);return t.val().slice(e.selectionStart,e.selectionEnd)},t.selection.setText=function(e){var i=t.selection.getPrecedingText(),n=t.selection.getFollowingText();t.val(i+e+n),t.selection.setRange(i.length,i.length+e.length)},t.selection.prependText=function(e){t.selection.setText(e+t.selection.getText())},t.selection.appendText=function(e){t.selection.setText(t.selection.getText()+e)},t.selection.getFollowingText=function(){var e=t.get(0);return t.val().slice(e.selectionEnd)},t.selection.setFollowingText=function(e){var i=t.selection.getRange(),n=t.val().slice(0,i.end);t.val(n+e),t.selection.setRange(i.start,i.end)},t.selection.getPrecedingText=function(){return t.val().slice(0,t.get(0).selectionStart)},t.selection.setPrecedingText=function(e){var i=t.selection.getRange(),n=t.val().slice(0,i.start),o=t.val().slice(i.end),s=n.length-e.length;t.val(e+o),t.selection.setRange(i.start-s,i.end-s)},t.selection.insertTextBefore=function(e){var i=t.selection.getPrecedingText();t.selection.setPrecedingText(i+e)},t.selection.insertTextAfter=function(e){var i=t.selection.getFollowingText();t.selection.setFollowingText(e+i)},t.changeHandlers=[],t.addChangeHandler=function(e){t.changeHandlers.push(e)},t.bind("change",(function(e){var i=!1;return jQuery(t.changeHandlers).each((function(){return!this(t,e)||(i=!0,!1)})),!i})),t.keyHandlers=[],t.addKeyHandler=function(e){t.keyHandlers.push(e)},t.bind("keypress",(function(e){var i=e.keyCode|e.charCode|e.which,n=!1;return jQuery(t.keyHandlers).each((function(){return!this(t,i,e)||(n=!0,!1)})),!n})),t.selectHandlers=[],t.addSelectHandler=function(e){t.selectHandlers.push(e)},t.bind("select",(function(e){var i=!1;return jQuery(t.selectHandlers).each((function(){return!this(t,e)||(i=!0,!1)})),!i})),t}))).addChangeHandler=function(e){t.each((function(){this.addChangeHandler(e)}))},t.addKeyHandler=function(e){t.each((function(){this.addKeyHandler(e)}))},t.addSelectHandler=function(e){t.each((function(){this.addSelectHandler(e)}))},t}},478:function(t,e){jQuery.fn.snickedWackowiki=function(){jQuery(this).snicked({autocomplete:{keys:{9:"tab",13:"enter",32:"space",16:"star"},rules:[{key:"tab",before:/(\*\*)\s*$/,snippet:"{#1}{$0}{#1} {$1}"},{key:"tab",before:/(\/\/)\s*$/,snippet:"{#1}{$0}{#1} {$1}"},{key:"tab",before:/(__)\s*$/,snippet:"{#1}{$0}{#1} {$1}"},{key:"tab",before:/(##)\s*$/,snippet:"{#1}{$0}{#1} {$1}"},{key:"tab",before:/(\+\+)\s*$/,snippet:"{#1}{$0}{#1} {$1}"},{key:"tab",before:/(\-\-)\s*$/,snippet:"{#1}{$0}{#1} {$1}"},{key:"tab",before:/(\!\!)\s*$/,snippet:"{#1}({$0}){$1}{#1} {$2}"},{key:"tab",before:/(%%)\s*$/,snippet:"{#1}({$0}){$1}{#1} {$2}"},{key:"tab",before:/(\(\?)\s*$/,snippet:"(?{$0}=={$1}?) {$2}"},{key:"tab",before:/<{\s*$/,snippet:"\n<{ {$0}\n>} {$1}"},{key:"tab",before:/<#\s*$/,snippet:"<# {$0} #> {$1}"},{key:"tab",before:/\^\^\s*$/,snippet:"^^{$0}^^ {$1}"},{key:"tab",before:/""""vv\s*$/,snippet:'""""vv{$0}vv"""" {$1}'},{key:"tab",before:/vv\s*$/,snippet:"vv{$0}vv {$1}"},{key:"tab",before:/\*$/,snippet:"{#1}\n  * {$0}"},{key:"tab",before:/( {2,}\*.*?)\s*$/,snippet:"  {#1} {$0}"},{key:"enter",orderedListLevelDown:"unnumbered",before:/( {2,})(\*) +$/,snippet:"{#1}{#2} {$0}"},{key:"enter",before:/\n+ *\* +$/,beforeToReplace:/ *\* +$/,snippet:"{$0}"},{key:"enter",before:/([\n\s]+)\*(\+(?= )| ).*$/,beforeToReplace:/( *)\*(\+(?= )| ).*$/,snippet:"{#0}\n{#1}* {$0}"},{key:"tab",before:/(\D*)([0-9]+)$/,snippet:"{#1}\n  {#2}. {$0}"},{key:"tab",before:/( {2,}([\w]{1}|[0-9]{1,3})\..*?)\s*$/,snippet:"  {#1} {$0}"},{key:"enter",orderedListLevelDown:"numbered",before:/( {2,})(([\w]{1}|[0-9]{1,3})\.) +$/,snippet:"{#1}{#2} {$0}"},{key:"enter",before:/\n+ *([\w]{1}|[0-9]{1,3})\. +$/,beforeToReplace:/ *([\w]{1}|[0-9]{1,3})\. +$/,snippet:"{$0}"},{key:"enter",before:/(?:^|\n)( *)(([\w]{1}|[0-9]{1,3})\.)(\+(?= )| |\#(?=[0-9]+ )).*$/,snippet:"{#0}\n{#1}{#2} {$0}",increment:2},{key:"tab",before:/( {2,}.*?)\s*$/,snippet:"  {#1}{$0}"},{key:"enter",before:/ {2}( {2,})$/,snippet:"{#1}{$0}"},{key:"enter",before:/ {2}$/,snippet:"{$0}"},{key:"enter",before:/(?:^|\n)( {2,}).*$/,snippet:"{#0}\n{#1}{$0}"}]}})}},479:function(t,e,i){!function(e){var i,n={},o={16:!1,18:!1,17:!1,91:!1},s="all",r={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(t){return a[t]||t.toUpperCase().charCodeAt(0)},c=[];for(i=1;i<20;i++)a["f"+i]=111+i;function u(t,e){for(var i=t.length;i--;)if(t[i]===e)return i;return-1}function h(t,e){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var d={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function f(t){for(i in o)o[i]=t[d[i]]}function p(t,e,i){var o,s;o=_(t),void 0===i&&(i=e,e="all");for(var r=0;r<o.length;r++)s=[],(t=o[r].split("+")).length>1&&(s=g(t),t=[t[t.length-1]]),t=t[0],(t=l(t))in n||(n[t]=[]),n[t].push({shortcut:o[r],scope:e,method:i,key:o[r],mods:s})}for(i in r)p[i]=!1;function m(){return s||"all"}function _(t){var e;return""==(e=(t=t.replace(/\s/g,"")).split(","))[e.length-1]&&(e[e.length-2]+=","),e}function g(t){for(var e=t.slice(0,t.length-1),i=0;i<e.length;i++)e[i]=r[e[i]];return e}function v(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,(function(){i(window.event)}))}v(document,"keydown",(function(t){!function(t){var e,i,s,a,l,h;if(e=t.keyCode,-1==u(c,e)&&c.push(e),93!=e&&224!=e||(e=91),e in o)for(s in o[e]=!0,r)r[s]==e&&(p[s]=!0);else if(f(t),p.filter.call(this,t)&&e in n)for(h=m(),a=0;a<n[e].length;a++)if((i=n[e][a]).scope==h||"all"==i.scope){for(s in l=i.mods.length>0,o)(!o[s]&&u(i.mods,+s)>-1||o[s]&&-1==u(i.mods,+s))&&(l=!1);(0!=i.mods.length||o[16]||o[18]||o[17]||o[91])&&!l||!1===i.method(t,i)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}(t)})),v(document,"keyup",(function(t){var e,i=t.keyCode,n=u(c,i);if(n>=0&&c.splice(n,1),93!=i&&224!=i||(i=91),i in o)for(e in o[i]=!1,r)r[e]==i&&(p[e]=!1)})),v(window,"focus",(function(){for(i in o)o[i]=!1;for(i in r)p[i]=!1}));var b=e.keymaster;e.keymaster=p,e.keymaster.setScope=function(t){s=t||"all"},e.keymaster.getScope=m,e.keymaster.deleteScope=function(t){var e,i,o;for(e in n)for(i=n[e],o=0;o<i.length;)i[o].scope===t?i.splice(o,1):o++},e.keymaster.filter=function(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)},e.keymaster.isPressed=function(t){return"string"==typeof t&&(t=l(t)),-1!=u(c,t)},e.keymaster.getPressedKeyCodes=function(){return c.slice(0)},e.keymaster.noConflict=function(){var t=e.keymaster;return e.keymaster=b,t},e.keymaster.unbind=function(t,e){var i,o,s,r,a,c=[];for(i=_(t),r=0;r<i.length;r++){if((o=i[r].split("+")).length>1&&(c=g(o),t=o[o.length-1]),t=l(t),void 0===e&&(e=m()),!n[t])return;for(s=0;s<n[t].length;s++)(a=n[t][s]).scope===e&&h(a.mods,c)&&(n[t][s]={})}},t.exports=p}(window),keymaster.filter=function(){return!0}},480:function(t,e,i){var n,o;!function(s,r){"use strict";void 0===(o="function"==typeof(n=function(){var t=document.head||document.getElementsByTagName("head")[0];function e(){}var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function n(t){return"[object Function]"===Object.prototype.toString.call(t)}function o(t,e){if(i(t)){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)}else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e(t[o],o)}function s(t,e){o(e,(function(i,n){t[n]||(t[n]=e[n])}))}var r=function(t){var i=this,s=t+"__",r=localStorage;this.init=function(t){t()},this.remove=function(t,i){i=i||e,r.removeItem(s+t),i()},this.set=function(t,e,n,a){var l,c={value:e,expire:n};try{r.setItem(s+t,JSON.stringify(c))}catch(e){if(e.name.toUpperCase().indexOf("QUOTA")>=0)try{o(r,(function(t,e){var n=e.split(s)[1];n&&i.remove(n)})),r.setItem(s+t,JSON.stringify(c))}catch(t){l=t}else l=e}a(l)},this.get=function(t,e,i){var o,a;n(e)&&(i=e,e=!1);try{a=JSON.parse(r.getItem(s+t)),a=e?a:a.value}catch(e){o=new Error("Can't read key: "+t)}i(o,a)},this.clear=function(t,e){var n=+new Date;o(r,(function(e,o){var r,a=o.split(s)[1];a&&(t?(i.get(a,!0,(function(t,e){r=e})),r&&r.expire>0&&r.expire-n<0&&i.remove(a)):i.remove(a))})),e()}};r.prototype.exists=function(){try{return localStorage.setItem("__ls_test__","__ls_test__"),localStorage.removeItem("__ls_test__"),!0}catch(t){return!1}};var a=function(t){var i;this.init=function(e){if(!(i=window.openDatabase(t,"1.0","bag.js db",2e5)))return e("Can't open webdql database");i.transaction((function(t){t.executeSql("CREATE TABLE IF NOT EXISTS kv (key TEXT PRIMARY KEY, value TEXT, expire INTEGER KEY)",[],(function(){return e()}),(function(t,i){return e(i)}))}))},this.remove=function(t,n){n=n||e,i.transaction((function(e){e.executeSql("DELETE FROM kv WHERE key = ?",[t],(function(){return n()}),(function(t,e){return n(e)}))}))},this.set=function(t,e,n,o){i.transaction((function(i){i.executeSql("INSERT OR REPLACE INTO kv (key, value, expire) VALUES (?, ?, ?)",[t,JSON.stringify(e),n],(function(){return o()}),(function(t,e){return o(e)}))}))},this.get=function(t,e){i.readTransaction((function(i){i.executeSql("SELECT value FROM kv WHERE key = ?",[t],(function(i,n){if(0===n.rows.length)return e(new Error("key not found: "+t));var o,s,r=n.rows.item(0).value;try{s=JSON.parse(r)}catch(t){o=new Error("Can't unserialise data: "+r)}e(o,s)}),(function(t,i){return e(i)}))}))},this.clear=function(t,e){i.transaction((function(n){t?n.executeSql("DELETE FROM kv WHERE expire > 0 AND expire < ?",[+new Date],(function(){return e()}),(function(t,i){return e(i)})):i.transaction((function(t){t.executeSql("DELETE FROM kv",[],(function(){return e()}),(function(t,i){return e(i)}))}))}))}};a.prototype.exists=function(){return!!window.openDatabase};var l=function(t){var e;this.init=function(i){var n=(this.idb=window.indexedDB).open(t,2);n.onsuccess=function(t){e=t.target.result,i()},n.onblocked=function(t){i(new Error("IndexedDB blocked. "+t.target.errorCode))},n.onerror=function(t){i(new Error("IndexedDB opening error. "+t.target.errorCode))},n.onupgradeneeded=function(t){(e=t.target.result).objectStoreNames.contains("kv")&&e.deleteObjectStore("kv"),e.createObjectStore("kv",{keyPath:"key"}).createIndex("expire","expire",{unique:!1})}},this.remove=function(t,i){var n=e.transaction("kv","readwrite");n.oncomplete=function(){i()},n.onerror=n.onabort=function(t){i(new Error("Key remove error: ",t.target))},n.objectStore("kv").delete(t).onerror=function(){n.abort()}},this.set=function(t,i,n,o){var s=e.transaction("kv","readwrite");s.oncomplete=function(){o()},s.onerror=s.onabort=function(t){o(new Error("Key set error: ",t.target))},s.objectStore("kv").put({key:t,value:i,expire:n}).onerror=function(){s.abort()}},this.get=function(t,i){var n,o,s=e.transaction("kv");s.oncomplete=function(){i(n,o)},s.onerror=s.onabort=function(t){i(new Error("Key get error: ",t.target))},s.objectStore("kv").get(t).onsuccess=function(e){e.target.result?o=e.target.result.value:n=new Error("key not found: "+t)}},this.clear=function(t,i){var n,o,s=window.IDBKeyRange;(n=e.transaction("kv","readwrite"),o=n.objectStore("kv"),n.oncomplete=function(){i()},n.onerror=n.onabort=function(t){i(new Error("Clear error: ",t.target))},t)?o.index("expire").openCursor(s.bound(1,+new Date)).onsuccess=function(t){var e=t.target.result;e&&(o.delete(e.primaryKey).onerror=function(){n.abort()},e.continue())}:n.objectStore("kv").clear().onerror=function(){n.abort()}}};l.prototype.exists=function(){return!!window.indexedDB};var c={indexeddb:l,websql:a,localstorage:r},u=function(t,i){var s,r=this,a=null,l=[];o(i,(function(e){if(e=e.toLowerCase(),!c[e])throw new Error("Wrong storage adapter name: "+e,i);if(c[e].prototype.exists()&&!a)return a=new c[e](t),!1})),a||"undefined"!=typeof console&&console.log,this.init=function(t){a?"done"!==s?"progress"!==s?(l.push(t),s="progress",a.init((function(t){s=t?"failed":"done",o(l,(function(e){e(t)})),l=[],t||r.clear(!0)}))):l.push(t):t():t(new Error("No available db"))},this.set=function(t,i,o,s){n(o)&&(s=o,o=null),s=s||e,o=o?+new Date+1e3*o:0,this.init((function(e){if(e)return s(e);a.set(t,i,o,s)}))},this.get=function(t,e){this.init((function(i){if(i)return e(i);a.get(t,e)}))},this.remove=function(t,i){i=i||e,this.init((function(e){if(e)return i(e);a.remove(t,i)}))},this.clear=function(t,i){n(t)&&(i=t,t=!1),i=i||e,this.init((function(e){if(e)return i(e);a.clear(t,i)}))}};function h(r){if(!(this instanceof h))return new h(r);var a=this;r=r||{},this.prefix=r.prefix||"bag",this.timeout=r.timeout||20,this.expire=r.expire||720,this.isValidItem=r.isValidItem||null,this.stores=i(r.stores)?r.stores:["indexeddb","websql","localstorage"];var l=null;function c(t,i){!function(t,i){var n=new XMLHttpRequest;n.open("GET",t),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?(i(null,{content:n.responseText,type:n.getResponseHeader("content-type")}),i=e):(i(new Error("Can't open url "+t+(n.status?n.statusText+" ("+n.status+")":""))),i=e))},setTimeout((function(){n.readyState<4&&(n.abort(),i(new Error("Timeout")),i=e)}),1e3*a.timeout),n.send()}(t.url_real,(function(e,n){if(e)return i(e);var r=60*(t.expire||a.expire)*60,l=function(t,e){var i={};o(["url","key","unique"],(function(e){t[e]&&(i[e]=t[e])}));var n=+new Date;return i.data=e.content,i.originalType=e.type,i.type=t.type||e.type,i.stamp=n,i}(t,n);a.set(t.key,l,r,(function(){s(t,l),i(null,t)}))}))}function d(t,e){if(!t.url)return e();t.key=t.key||t.url,a.get(t.key,(function(i,n){if(i&&t.cached)e(i);else{t.execute=!1!==t.execute;var o=!!i||function(t,e){return!t||t.expire-+new Date<0||e.unique!==t.unique||e.url!==t.url||a.isValidItem&&!a.isValidItem(t,e)}(n,t);if(!t.live&&!o)return t.type=t.type||n.originalType,s(t,n),void e(null,t);t.url_real=t.url,t.unique&&(t.url_real=t.url+(t.url.indexOf("?")>0?"&":"?")+"bag-unique="+t.unique),c(t,(function(o){if(!i||!o)return o?(t.type=t.type||n.originalType,s(t,n),void e(null,t)):void e(null,t);e(o)}))}}))}this._queue=[],this._chained=!1,this._createStorage=function(){l||(l=new u(a.prefix,a.stores))};var f=/(?:^([ \t]*\/\/[@|#][ \t]+sourceMappingURL=)(.+?)([ \t]*)$)|(?:^([ \t]*\/\*[@#][ \t]+sourceMappingURL=)(.+?)([ \t]*\*\/[ \t])*$)/gm;function p(t){var e=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),i=t.match(e);return{scheme:i[2],authority:i[4],path:i[5],query:i[7],fragment:i[9]}}function m(t){var e=p(t.url),i=!1,n=t.data.replace(f,(function(t,n,o,s,r,a,l){if(!t)return null;i=!0,n||(n=r,o=a,s=l);var c=p(o);return n+(((c.scheme?c.scheme:e.scheme)||window.location.protocol.slice(0,-1))+"://")+((c.authority?c.authority:e.authority)||window.location.host)+("/"===c.path[0]?c.path:e.path.split("/").slice(0,-1).join("/")+"/"+c.path)+s}));return i?n:""}var _={"application/javascript":function(e){var i,n=document.createElement("script");(i=m(e))||(i=e.data+"\n//# sourceURL="+e.url),n.text=i,t.appendChild(n)},"text/css":function(e){var i,n=document.createElement("style");(i=m(e))||(i=e.data+"\n/*# sourceURL="+e.url+" */"),n.styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i)),t.appendChild(n)}};this.require=function(t,s){var r=a._queue;if(n(t)&&(s=t,t=null),t){var l=i(t)?t:[t];o(l,(function(t,e){var i;i=t,"[object String]"===Object.prototype.toString.call(i)&&(l[e]={url:t}),r.push(l[e])}))}if(a._createStorage(),!s)return a._chained=!0,a;!function(t,i,n){if(n=n||e,!t.length)return n();var s=0;o(t,(function(o){i(o,(function(i){i?(n(i),n=e):(s+=1)>=t.length&&n()}))}))}(r,d,(function(e){if(e)return a._chained=!1,a._queue=[],void s(e);o(r,(function(t){t.execute&&function(t){if(t.type){var e=t.type.split(";")[0];["application/x-javascript","text/javascript"].indexOf(e)>=0&&(e="application/javascript"),_[e]&&_[e](t)}}(t)}));var n=[];o(r,(function(t){n.push(t.data)}));var l=i(t)||a._chained?n:n[0];a._chained=!1,a._queue=[],s(null,l)}))},o(["remove","get","set","clear"],(function(t){a[t]=function(){a._createStorage(),l[t].apply(l,arguments)}})),this.addHandler=function(t,e){o(t=i(t)?t:[t],(function(t){_[t]=e}))},this.removeHandler=function(t){a.addHandler(t)}}return window.Bag=h,h})?n.call(e,i,e,t):n)||(t.exports=o)}()},484:function(t,e,i){(function(t){t.exports=function(){"use strict";var e,n;function o(){return e.apply(null,arguments)}function s(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(a(t,e))return!1;return!0}function c(t){return void 0===t}function u(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function h(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function d(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function f(t,e){for(var i in e)a(e,i)&&(t[i]=e[i]);return a(e,"toString")&&(t.toString=e.toString),a(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,i,n){return xe(t,e,i,n,!0).utc()}function m(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function _(t){if(null==t._isValid){var e=m(t),i=n.call(e.parsedDateParts,(function(t){return null!=t})),o=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(o=o&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return o;t._isValid=o}return t._isValid}function g(t){var e=p(NaN);return null!=t?f(m(e),t):m(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,i=Object(this),n=i.length>>>0;for(e=0;e<n;e++)if(e in i&&t.call(this,i[e],e,i))return!0;return!1};var v=o.momentProperties=[],b=!1;function y(t,e){var i,n,o;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=m(e)),c(e._locale)||(t._locale=e._locale),v.length>0)for(i=0;i<v.length;i++)c(o=e[n=v[i]])||(t[n]=o);return t}function k(t){y(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,o.updateOffset(this),b=!1)}function M(t){return t instanceof k||null!=t&&null!=t._isAMomentObject}function w(t){!1===o.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function E(t,e){var i=!0;return f((function(){if(null!=o.deprecationHandler&&o.deprecationHandler(null,t),i){var n,s,r,l=[];for(s=0;s<arguments.length;s++){if(n="","object"==typeof arguments[s]){for(r in n+="\n["+s+"] ",arguments[0])a(arguments[0],r)&&(n+=r+": "+arguments[0][r]+", ");n=n.slice(0,-2)}else n=arguments[s];l.push(n)}w(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)}),e)}var x,S={};function T(t,e){null!=o.deprecationHandler&&o.deprecationHandler(t,e),S[t]||(w(e),S[t]=!0)}function O(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function D(t,e){var i,n=f({},t);for(i in e)a(e,i)&&(r(t[i])&&r(e[i])?(n[i]={},f(n[i],t[i]),f(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)a(t,i)&&!a(e,i)&&r(t[i])&&(n[i]=f({},n[i]));return n}function B(t){null!=t&&this.set(t)}function I(t,e,i){var n=""+Math.abs(t),o=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}o.suppressDeprecationWarnings=!1,o.deprecationHandler=null,x=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)a(t,e)&&i.push(e);return i};var C=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,L={},N={};function F(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(N[t]=o),e&&(N[e[0]]=function(){return I(o.apply(this,arguments),e[1],e[2])}),i&&(N[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function R(t,e){return t.isValid()?(e=H(e,t.localeData()),L[e]=L[e]||function(t){var e,i,n,o=t.match(C);for(e=0,i=o.length;e<i;e++)N[o[e]]?o[e]=N[o[e]]:o[e]=(n=o[e]).match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"");return function(e){var n,s="";for(n=0;n<i;n++)s+=O(o[n])?o[n].call(e,t):o[n];return s}}(e),L[e](t)):t.localeData().invalidDate()}function H(t,e){var i=5;function n(t){return e.longDateFormat(t)||t}for(P.lastIndex=0;i>=0&&P.test(t);)t=t.replace(P,n),P.lastIndex=0,i-=1;return t}var j={};function A(t,e){var i=t.toLowerCase();j[i]=j[i+"s"]=j[e]=t}function Y(t){return"string"==typeof t?j[t]||j[t.toLowerCase()]:void 0}function U(t){var e,i,n={};for(i in t)a(t,i)&&(e=Y(i))&&(n[e]=t[i]);return n}var V={};function $(t,e){V[t]=e}function W(t){return t%4==0&&t%100!=0||t%400==0}function z(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function q(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=z(e)),i}function K(t,e){return function(i){return null!=i?(Z(this,t,i),o.updateOffset(this,e),this):G(this,t)}}function G(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Z(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&W(t.year())&&1===t.month()&&29===t.date()?(i=q(i),t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),Mt(i,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](i))}var J,Q=/\d/,X=/\d\d/,tt=/\d{3}/,et=/\d{4}/,it=/[+-]?\d{6}/,nt=/\d\d?/,ot=/\d\d\d\d?/,st=/\d\d\d\d\d\d?/,rt=/\d{1,3}/,at=/\d{1,4}/,lt=/[+-]?\d{1,6}/,ct=/\d+/,ut=/[+-]?\d+/,ht=/Z|[+-]\d\d:?\d\d/gi,dt=/Z|[+-]\d\d(?::?\d\d)?/gi,ft=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pt(t,e,i){J[t]=O(e)?e:function(t,n){return t&&i?i:e}}function mt(t,e){return a(J,t)?J[t](e._strict,e._locale):new RegExp(_t(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,i,n,o){return e||i||n||o}))))}function _t(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}J={};var gt,vt={};function bt(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),u(e)&&(n=function(t,i){i[e]=q(t)}),i=0;i<t.length;i++)vt[t[i]]=n}function yt(t,e){bt(t,(function(t,i,n,o){n._w=n._w||{},e(t,n._w,n,o)}))}function kt(t,e,i){null!=e&&a(vt,t)&&vt[t](e,i._a,i,t)}function Mt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i,n=(e%(i=12)+i)%i;return t+=(e-n)/12,1===n?W(t)?29:28:31-n%7%2}gt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},F("M",["MM",2],"Mo",(function(){return this.month()+1})),F("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),F("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),A("month","M"),$("month",8),pt("M",nt),pt("MM",nt,X),pt("MMM",(function(t,e){return e.monthsShortRegex(t)})),pt("MMMM",(function(t,e){return e.monthsRegex(t)})),bt(["M","MM"],(function(t,e){e[1]=q(t)-1})),bt(["MMM","MMMM"],(function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[1]=o:m(i).invalidMonth=t}));var wt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Et="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,St=ft,Tt=ft;function Ot(t,e,i){var n,o,s,r=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=p([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(o=gt.call(this._shortMonthsParse,r))?o:null:-1!==(o=gt.call(this._longMonthsParse,r))?o:null:"MMM"===e?-1!==(o=gt.call(this._shortMonthsParse,r))||-1!==(o=gt.call(this._longMonthsParse,r))?o:null:-1!==(o=gt.call(this._longMonthsParse,r))||-1!==(o=gt.call(this._shortMonthsParse,r))?o:null}function Dt(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=q(e);else if(!u(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),Mt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function Bt(t){return null!=t?(Dt(this,t),o.updateOffset(this,!0),this):G(this,"Month")}function It(){function t(t,e){return e.length-t.length}var e,i,n=[],o=[],s=[];for(e=0;e<12;e++)i=p([2e3,e]),n.push(this.monthsShort(i,"")),o.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(n.sort(t),o.sort(t),s.sort(t),e=0;e<12;e++)n[e]=_t(n[e]),o[e]=_t(o[e]);for(e=0;e<24;e++)s[e]=_t(s[e]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Ct(t){return W(t)?366:365}F("Y",0,0,(function(){var t=this.year();return t<=9999?I(t,4):"+"+t})),F(0,["YY",2],0,(function(){return this.year()%100})),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),A("year","y"),$("year",1),pt("Y",ut),pt("YY",nt,X),pt("YYYY",at,et),pt("YYYYY",lt,it),pt("YYYYYY",lt,it),bt(["YYYYY","YYYYYY"],0),bt("YYYY",(function(t,e){e[0]=2===t.length?o.parseTwoDigitYear(t):q(t)})),bt("YY",(function(t,e){e[0]=o.parseTwoDigitYear(t)})),bt("Y",(function(t,e){e[0]=parseInt(t,10)})),o.parseTwoDigitYear=function(t){return q(t)+(q(t)>68?1900:2e3)};var Pt=K("FullYear",!0);function Lt(t,e,i,n,o,s,r){var a;return t<100&&t>=0?(a=new Date(t+400,e,i,n,o,s,r),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,i,n,o,s,r),a}function Nt(t){var e,i;return t<100&&t>=0?((i=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Ft(t,e,i){var n=7+e-i;return-(7+Nt(t,0,n).getUTCDay()-e)%7+n-1}function Rt(t,e,i,n,o){var s,r,a=1+7*(e-1)+(7+i-n)%7+Ft(t,n,o);return a<=0?r=Ct(s=t-1)+a:a>Ct(t)?(s=t+1,r=a-Ct(t)):(s=t,r=a),{year:s,dayOfYear:r}}function Ht(t,e,i){var n,o,s=Ft(t.year(),e,i),r=Math.floor((t.dayOfYear()-s-1)/7)+1;return r<1?n=r+jt(o=t.year()-1,e,i):r>jt(t.year(),e,i)?(n=r-jt(t.year(),e,i),o=t.year()+1):(o=t.year(),n=r),{week:n,year:o}}function jt(t,e,i){var n=Ft(t,e,i),o=Ft(t+1,e,i);return(Ct(t)-n+o)/7}function At(t,e){return t.slice(e,7).concat(t.slice(0,e))}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),$("week",5),$("isoWeek",5),pt("w",nt),pt("ww",nt,X),pt("W",nt),pt("WW",nt,X),yt(["w","ww","W","WW"],(function(t,e,i,n){e[n.substr(0,1)]=q(t)})),F("d",0,"do","day"),F("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),F("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),F("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),$("day",11),$("weekday",11),$("isoWeekday",11),pt("d",nt),pt("e",nt),pt("E",nt),pt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),pt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),pt("dddd",(function(t,e){return e.weekdaysRegex(t)})),yt(["dd","ddd","dddd"],(function(t,e,i,n){var o=i._locale.weekdaysParse(t,n,i._strict);null!=o?e.d=o:m(i).invalidWeekday=t})),yt(["d","e","E"],(function(t,e,i,n){e[n]=q(t)}));var Yt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ut="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Vt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$t=ft,Wt=ft,zt=ft;function qt(t,e,i){var n,o,s,r=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=p([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(o=gt.call(this._weekdaysParse,r))?o:null:"ddd"===e?-1!==(o=gt.call(this._shortWeekdaysParse,r))?o:null:-1!==(o=gt.call(this._minWeekdaysParse,r))?o:null:"dddd"===e?-1!==(o=gt.call(this._weekdaysParse,r))||-1!==(o=gt.call(this._shortWeekdaysParse,r))||-1!==(o=gt.call(this._minWeekdaysParse,r))?o:null:"ddd"===e?-1!==(o=gt.call(this._shortWeekdaysParse,r))||-1!==(o=gt.call(this._weekdaysParse,r))||-1!==(o=gt.call(this._minWeekdaysParse,r))?o:null:-1!==(o=gt.call(this._minWeekdaysParse,r))||-1!==(o=gt.call(this._weekdaysParse,r))||-1!==(o=gt.call(this._shortWeekdaysParse,r))?o:null}function Kt(){function t(t,e){return e.length-t.length}var e,i,n,o,s,r=[],a=[],l=[],c=[];for(e=0;e<7;e++)i=p([2e3,1]).day(e),n=_t(this.weekdaysMin(i,"")),o=_t(this.weekdaysShort(i,"")),s=_t(this.weekdays(i,"")),r.push(n),a.push(o),l.push(s),c.push(n),c.push(o),c.push(s);r.sort(t),a.sort(t),l.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Gt(){return this.hours()%12||12}function Zt(t,e){F(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Jt(t,e){return e._meridiemParse}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,Gt),F("k",["kk",2],0,(function(){return this.hours()||24})),F("hmm",0,0,(function(){return""+Gt.apply(this)+I(this.minutes(),2)})),F("hmmss",0,0,(function(){return""+Gt.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)})),F("Hmm",0,0,(function(){return""+this.hours()+I(this.minutes(),2)})),F("Hmmss",0,0,(function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)})),Zt("a",!0),Zt("A",!1),A("hour","h"),$("hour",13),pt("a",Jt),pt("A",Jt),pt("H",nt),pt("h",nt),pt("k",nt),pt("HH",nt,X),pt("hh",nt,X),pt("kk",nt,X),pt("hmm",ot),pt("hmmss",st),pt("Hmm",ot),pt("Hmmss",st),bt(["H","HH"],3),bt(["k","kk"],(function(t,e,i){var n=q(t);e[3]=24===n?0:n})),bt(["a","A"],(function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t})),bt(["h","hh"],(function(t,e,i){e[3]=q(t),m(i).bigHour=!0})),bt("hmm",(function(t,e,i){var n=t.length-2;e[3]=q(t.substr(0,n)),e[4]=q(t.substr(n)),m(i).bigHour=!0})),bt("hmmss",(function(t,e,i){var n=t.length-4,o=t.length-2;e[3]=q(t.substr(0,n)),e[4]=q(t.substr(n,2)),e[5]=q(t.substr(o)),m(i).bigHour=!0})),bt("Hmm",(function(t,e,i){var n=t.length-2;e[3]=q(t.substr(0,n)),e[4]=q(t.substr(n))})),bt("Hmmss",(function(t,e,i){var n=t.length-4,o=t.length-2;e[3]=q(t.substr(0,n)),e[4]=q(t.substr(n,2)),e[5]=q(t.substr(o))}));var Qt,Xt=K("Hours",!0),te={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:wt,monthsShort:Et,week:{dow:0,doy:6},weekdays:Yt,weekdaysMin:Vt,weekdaysShort:Ut,meridiemParse:/[ap]\.?m?\.?/i},ee={},ie={};function ne(t,e){var i,n=Math.min(t.length,e.length);for(i=0;i<n;i+=1)if(t[i]!==e[i])return i;return n}function oe(t){return t?t.toLowerCase().replace("_","-"):t}function se(e){var n=null;if(void 0===ee[e]&&void 0!==t&&t&&t.exports)try{n=Qt._abbr,i(1109)("./"+e),re(n)}catch(t){ee[e]=null}return ee[e]}function re(t,e){var i;return t&&((i=c(e)?le(t):ae(t,e))?Qt=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Qt._abbr}function ae(t,e){if(null!==e){var i,n=te;if(e.abbr=t,null!=ee[t])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ee[t]._config;else if(null!=e.parentLocale)if(null!=ee[e.parentLocale])n=ee[e.parentLocale]._config;else{if(null==(i=se(e.parentLocale)))return ie[e.parentLocale]||(ie[e.parentLocale]=[]),ie[e.parentLocale].push({name:t,config:e}),null;n=i._config}return ee[t]=new B(D(n,e)),ie[t]&&ie[t].forEach((function(t){ae(t.name,t.config)})),re(t),ee[t]}return delete ee[t],null}function le(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Qt;if(!s(t)){if(e=se(t))return e;t=[t]}return function(t){for(var e,i,n,o,s=0;s<t.length;){for(e=(o=oe(t[s]).split("-")).length,i=(i=oe(t[s+1]))?i.split("-"):null;e>0;){if(n=se(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&ne(o,i)>=e-1)break;e--}s++}return Qt}(t)}function ce(t){var e,i=t._a;return i&&-2===m(t).overflow&&(e=i[1]<0||i[1]>11?1:i[2]<1||i[2]>Mt(i[0],i[1])?2:i[3]<0||i[3]>24||24===i[3]&&(0!==i[4]||0!==i[5]||0!==i[6])?3:i[4]<0||i[4]>59?4:i[5]<0||i[5]>59?5:i[6]<0||i[6]>999?6:-1,m(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),m(t)._overflowWeeks&&-1===e&&(e=7),m(t)._overflowWeekday&&-1===e&&(e=8),m(t).overflow=e),t}var ue=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,de=/Z|[+-]\d\d(?::?\d\d)?/,fe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],me=/^\/?Date\((-?\d+)/i,_e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ge={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ve(t){var e,i,n,o,s,r,a=t._i,l=ue.exec(a)||he.exec(a);if(l){for(m(t).iso=!0,e=0,i=fe.length;e<i;e++)if(fe[e][1].exec(l[1])){o=fe[e][0],n=!1!==fe[e][2];break}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,i=pe.length;e<i;e++)if(pe[e][1].exec(l[3])){s=(l[2]||" ")+pe[e][0];break}if(null==s)return void(t._isValid=!1)}if(!n&&null!=s)return void(t._isValid=!1);if(l[4]){if(!de.exec(l[4]))return void(t._isValid=!1);r="Z"}t._f=o+(s||"")+(r||""),we(t)}else t._isValid=!1}function be(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ye(t){var e,i,n,o,s,r,a,l,c=_e.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(i=c[4],n=c[3],o=c[2],s=c[5],r=c[6],a=c[7],l=[be(i),Et.indexOf(n),parseInt(o,10),parseInt(s,10),parseInt(r,10)],a&&l.push(parseInt(a,10)),e=l,!function(t,e,i){return!t||Ut.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(m(i).weekdayMismatch=!0,i._isValid=!1,!1)}(c[1],e,t))return;t._a=e,t._tzm=function(t,e,i){if(t)return ge[t];if(e)return 0;var n=parseInt(i,10),o=n%100;return(n-o)/100*60+o}(c[8],c[9],c[10]),t._d=Nt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),m(t).rfc2822=!0}else t._isValid=!1}function ke(t,e,i){return null!=t?t:null!=e?e:i}function Me(t){var e,i,n,s,r,a=[];if(!t._d){for(n=function(t){var e=new Date(o.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,i,n,o,s,r,a,l,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(s=1,r=4,i=ke(e.GG,t._a[0],Ht(Se(),1,4).year),n=ke(e.W,1),((o=ke(e.E,1))<1||o>7)&&(l=!0)):(s=t._locale._week.dow,r=t._locale._week.doy,c=Ht(Se(),s,r),i=ke(e.gg,t._a[0],c.year),n=ke(e.w,c.week),null!=e.d?((o=e.d)<0||o>6)&&(l=!0):null!=e.e?(o=e.e+s,(e.e<0||e.e>6)&&(l=!0)):o=s),n<1||n>jt(i,s,r)?m(t)._overflowWeeks=!0:null!=l?m(t)._overflowWeekday=!0:(a=Rt(i,n,o,s,r),t._a[0]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(r=ke(t._a[0],n[0]),(t._dayOfYear>Ct(r)||0===t._dayOfYear)&&(m(t)._overflowDayOfYear=!0),i=Nt(r,0,t._dayOfYear),t._a[1]=i.getUTCMonth(),t._a[2]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=n[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Nt:Lt).apply(null,a),s=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==s&&(m(t).weekdayMismatch=!0)}}function we(t){if(t._f!==o.ISO_8601)if(t._f!==o.RFC_2822){t._a=[],m(t).empty=!0;var e,i,n,s,r,a,l=""+t._i,c=l.length,u=0;for(n=H(t._f,t._locale).match(C)||[],e=0;e<n.length;e++)s=n[e],(i=(l.match(mt(s,t))||[])[0])&&((r=l.substr(0,l.indexOf(i))).length>0&&m(t).unusedInput.push(r),l=l.slice(l.indexOf(i)+i.length),u+=i.length),N[s]?(i?m(t).empty=!1:m(t).unusedTokens.push(s),kt(s,i,t)):t._strict&&!i&&m(t).unusedTokens.push(s);m(t).charsLeftOver=c-u,l.length>0&&m(t).unusedInput.push(l),t._a[3]<=12&&!0===m(t).bigHour&&t._a[3]>0&&(m(t).bigHour=void 0),m(t).parsedDateParts=t._a.slice(0),m(t).meridiem=t._meridiem,t._a[3]=function(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(a=m(t).era)&&(t._a[0]=t._locale.erasConvertYear(a,t._a[0])),Me(t),ce(t)}else ye(t);else ve(t)}function Ee(t){var e=t._i,i=t._f;return t._locale=t._locale||le(t._l),null===e||void 0===i&&""===e?g({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),M(e)?new k(ce(e)):(h(e)?t._d=e:s(i)?function(t){var e,i,n,o,s,r,a=!1;if(0===t._f.length)return m(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)s=0,r=!1,e=y({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],we(e),_(e)&&(r=!0),s+=m(e).charsLeftOver,s+=10*m(e).unusedTokens.length,m(e).score=s,a?s<n&&(n=s,i=e):(null==n||s<n||r)&&(n=s,i=e,r&&(a=!0));f(t,i||e)}(t):i?we(t):function(t){var e=t._i;c(e)?t._d=new Date(o.now()):h(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=me.exec(t._i);null===e?(ve(t),!1===t._isValid&&(delete t._isValid,ye(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:o.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):s(e)?(t._a=d(e.slice(0),(function(t){return parseInt(t,10)})),Me(t)):r(e)?function(t){if(!t._d){var e=U(t._i),i=void 0===e.day?e.date:e.day;t._a=d([e.year,e.month,i,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Me(t)}}(t):u(e)?t._d=new Date(e):o.createFromInputFallback(t)}(t),_(t)||(t._d=null),t))}function xe(t,e,i,n,o){var a,c={};return!0!==e&&!1!==e||(n=e,e=void 0),!0!==i&&!1!==i||(n=i,i=void 0),(r(t)&&l(t)||s(t)&&0===t.length)&&(t=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=o,c._l=i,c._i=t,c._f=e,c._strict=n,(a=new k(ce(Ee(c))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function Se(t,e,i,n){return xe(t,e,i,n,!1)}o.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),o.ISO_8601=function(){},o.RFC_2822=function(){};var Te=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:g()})),Oe=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:g()}));function De(t,e){var i,n;if(1===e.length&&s(e[0])&&(e=e[0]),!e.length)return Se();for(i=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](i)||(i=e[n]);return i}var Be=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ie(t){var e=U(t),i=e.year||0,n=e.quarter||0,o=e.month||0,s=e.week||e.isoWeek||0,r=e.day||0,l=e.hour||0,c=e.minute||0,u=e.second||0,h=e.millisecond||0;this._isValid=function(t){var e,i,n=!1;for(e in t)if(a(t,e)&&(-1===gt.call(Be,e)||null!=t[e]&&isNaN(t[e])))return!1;for(i=0;i<Be.length;++i)if(t[Be[i]]){if(n)return!1;parseFloat(t[Be[i]])!==q(t[Be[i]])&&(n=!0)}return!0}(e),this._milliseconds=+h+1e3*u+6e4*c+1e3*l*60*60,this._days=+r+7*s,this._months=+o+3*n+12*i,this._data={},this._locale=le(),this._bubble()}function Ce(t){return t instanceof Ie}function Pe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Le(t,e){F(t,0,0,(function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+I(~~(t/60),2)+e+I(~~t%60,2)}))}Le("Z",":"),Le("ZZ",""),pt("Z",dt),pt("ZZ",dt),bt(["Z","ZZ"],(function(t,e,i){i._useUTC=!0,i._tzm=Fe(dt,t)}));var Ne=/([\+\-]|\d\d)/gi;function Fe(t,e){var i,n,o=(e||"").match(t);return null===o?null:0===(n=60*(i=((o[o.length-1]||[])+"").match(Ne)||["-",0,0])[1]+q(i[2]))?0:"+"===i[0]?n:-n}function Re(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(M(t)||h(t)?t.valueOf():Se(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),o.updateOffset(i,!1),i):Se(t).local()}function He(t){return-Math.round(t._d.getTimezoneOffset())}function je(){return!!this.isValid()&&this._isUTC&&0===this._offset}o.updateOffset=function(){};var Ae=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ye=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ue(t,e){var i,n,o,s,r,l,c=t,h=null;return Ce(t)?c={ms:t._milliseconds,d:t._days,M:t._months}:u(t)||!isNaN(+t)?(c={},e?c[e]=+t:c.milliseconds=+t):(h=Ae.exec(t))?(i="-"===h[1]?-1:1,c={y:0,d:q(h[2])*i,h:q(h[3])*i,m:q(h[4])*i,s:q(h[5])*i,ms:q(Pe(1e3*h[6]))*i}):(h=Ye.exec(t))?(i="-"===h[1]?-1:1,c={y:Ve(h[2],i),M:Ve(h[3],i),w:Ve(h[4],i),d:Ve(h[5],i),h:Ve(h[6],i),m:Ve(h[7],i),s:Ve(h[8],i)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(s=Se(c.from),r=Se(c.to),o=s.isValid()&&r.isValid()?(r=Re(r,s),s.isBefore(r)?l=$e(s,r):((l=$e(r,s)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(c={}).ms=o.milliseconds,c.M=o.months),n=new Ie(c),Ce(t)&&a(t,"_locale")&&(n._locale=t._locale),Ce(t)&&a(t,"_isValid")&&(n._isValid=t._isValid),n}function Ve(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function $e(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function We(t,e){return function(i,n){var o;return null===n||isNaN(+n)||(T(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),ze(this,Ue(i,n),t),this}}function ze(t,e,i,n){var s=e._milliseconds,r=Pe(e._days),a=Pe(e._months);t.isValid()&&(n=null==n||n,a&&Dt(t,G(t,"Month")+a*i),r&&Z(t,"Date",G(t,"Date")+r*i),s&&t._d.setTime(t._d.valueOf()+s*i),n&&o.updateOffset(t,r||a))}Ue.fn=Ie.prototype,Ue.invalid=function(){return Ue(NaN)};var qe=We(1,"add"),Ke=We(-1,"subtract");function Ge(t){return"string"==typeof t||t instanceof String}function Ze(t){return M(t)||h(t)||Ge(t)||u(t)||function(t){var e=s(t),i=!1;return e&&(i=0===t.filter((function(e){return!u(e)&&Ge(t)})).length),e&&i}(t)||function(t){var e,i,n=r(t)&&!l(t),o=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<s.length;e+=1)i=s[e],o=o||a(t,i);return n&&o}(t)||null==t}function Je(t){var e,i=r(t)&&!l(t),n=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<o.length;e+=1)n=n||a(t,o[e]);return i&&n}function Qe(t,e){if(t.date()<e.date())return-Qe(e,t);var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,"months");return-(i+(e-n<0?(e-n)/(n-t.clone().add(i-1,"months")):(e-n)/(t.clone().add(i+1,"months")-n)))||0}function Xe(t){var e;return void 0===t?this._locale._abbr:(null!=(e=le(t))&&(this._locale=e),this)}o.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",o.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ti=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function ei(){return this._locale}function ii(t,e){return(t%e+e)%e}function ni(t,e,i){return t<100&&t>=0?new Date(t+400,e,i)-126227808e5:new Date(t,e,i).valueOf()}function oi(t,e,i){return t<100&&t>=0?Date.UTC(t+400,e,i)-126227808e5:Date.UTC(t,e,i)}function si(t,e){return e.erasAbbrRegex(t)}function ri(){var t,e,i=[],n=[],o=[],s=[],r=this.eras();for(t=0,e=r.length;t<e;++t)n.push(_t(r[t].name)),i.push(_t(r[t].abbr)),o.push(_t(r[t].narrow)),s.push(_t(r[t].name)),s.push(_t(r[t].abbr)),s.push(_t(r[t].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function ai(t,e){F(0,[t,t.length],0,e)}function li(t,e,i,n,o){var s;return null==t?Ht(this,n,o).year:(e>(s=jt(t,n,o))&&(e=s),ci.call(this,t,e,i,n,o))}function ci(t,e,i,n,o){var s=Rt(t,e,i,n,o),r=Nt(s.year,0,s.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}F("N",0,0,"eraAbbr"),F("NN",0,0,"eraAbbr"),F("NNN",0,0,"eraAbbr"),F("NNNN",0,0,"eraName"),F("NNNNN",0,0,"eraNarrow"),F("y",["y",1],"yo","eraYear"),F("y",["yy",2],0,"eraYear"),F("y",["yyy",3],0,"eraYear"),F("y",["yyyy",4],0,"eraYear"),pt("N",si),pt("NN",si),pt("NNN",si),pt("NNNN",(function(t,e){return e.erasNameRegex(t)})),pt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),bt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,i,n){var o=i._locale.erasParse(t,n,i._strict);o?m(i).era=o:m(i).invalidEra=t})),pt("y",ct),pt("yy",ct),pt("yyy",ct),pt("yyyy",ct),pt("yo",(function(t,e){return e._eraYearOrdinalRegex||ct})),bt(["y","yy","yyy","yyyy"],0),bt(["yo"],(function(t,e,i,n){var o;i._locale._eraYearOrdinalRegex&&(o=t.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?e[0]=i._locale.eraYearOrdinalParse(t,o):e[0]=parseInt(t,10)})),F(0,["gg",2],0,(function(){return this.weekYear()%100})),F(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),ai("gggg","weekYear"),ai("ggggg","weekYear"),ai("GGGG","isoWeekYear"),ai("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),$("weekYear",1),$("isoWeekYear",1),pt("G",ut),pt("g",ut),pt("GG",nt,X),pt("gg",nt,X),pt("GGGG",at,et),pt("gggg",at,et),pt("GGGGG",lt,it),pt("ggggg",lt,it),yt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,i,n){e[n.substr(0,2)]=q(t)})),yt(["gg","GG"],(function(t,e,i,n){e[n]=o.parseTwoDigitYear(t)})),F("Q",0,"Qo","quarter"),A("quarter","Q"),$("quarter",7),pt("Q",Q),bt("Q",(function(t,e){e[1]=3*(q(t)-1)})),F("D",["DD",2],"Do","date"),A("date","D"),$("date",9),pt("D",nt),pt("DD",nt,X),pt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),bt(["D","DD"],2),bt("Do",(function(t,e){e[2]=q(t.match(nt)[0])}));var ui=K("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),$("dayOfYear",4),pt("DDD",rt),pt("DDDD",tt),bt(["DDD","DDDD"],(function(t,e,i){i._dayOfYear=q(t)})),F("m",["mm",2],0,"minute"),A("minute","m"),$("minute",14),pt("m",nt),pt("mm",nt,X),bt(["m","mm"],4);var hi=K("Minutes",!1);F("s",["ss",2],0,"second"),A("second","s"),$("second",15),pt("s",nt),pt("ss",nt,X),bt(["s","ss"],5);var di,fi,pi=K("Seconds",!1);for(F("S",0,0,(function(){return~~(this.millisecond()/100)})),F(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),F(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),F(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),F(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),F(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),F(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),A("millisecond","ms"),$("millisecond",16),pt("S",rt,Q),pt("SS",rt,X),pt("SSS",rt,tt),di="SSSS";di.length<=9;di+="S")pt(di,ct);function mi(t,e){e[6]=q(1e3*("0."+t))}for(di="S";di.length<=9;di+="S")bt(di,mi);fi=K("Milliseconds",!1),F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var _i=k.prototype;function gi(t){return t}_i.add=qe,_i.calendar=function(t,e){1===arguments.length&&(Ze(arguments[0])?(t=arguments[0],e=void 0):Je(arguments[0])&&(e=arguments[0],t=void 0));var i=t||Se(),n=Re(i,this).startOf("day"),s=o.calendarFormat(this,n)||"sameElse",r=e&&(O(e[s])?e[s].call(this,i):e[s]);return this.format(r||this.localeData().calendar(s,this,Se(i)))},_i.clone=function(){return new k(this)},_i.diff=function(t,e,i){var n,o,s;if(!this.isValid())return NaN;if(!(n=Re(t,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),e=Y(e)){case"year":s=Qe(this,n)/12;break;case"month":s=Qe(this,n);break;case"quarter":s=Qe(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-o)/864e5;break;case"week":s=(this-n-o)/6048e5;break;default:s=this-n}return i?s:z(s)},_i.endOf=function(t){var e,i;if(void 0===(t=Y(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?oi:ni,t){case"year":e=i(this.year()+1,0,1)-1;break;case"quarter":e=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=i(this.year(),this.month()+1,1)-1;break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-ii(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-ii(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-ii(e,1e3)-1}return this._d.setTime(e),o.updateOffset(this,!0),this},_i.format=function(t){t||(t=this.isUtc()?o.defaultFormatUtc:o.defaultFormat);var e=R(this,t);return this.localeData().postformat(e)},_i.from=function(t,e){return this.isValid()&&(M(t)&&t.isValid()||Se(t).isValid())?Ue({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},_i.fromNow=function(t){return this.from(Se(),t)},_i.to=function(t,e){return this.isValid()&&(M(t)&&t.isValid()||Se(t).isValid())?Ue({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},_i.toNow=function(t){return this.to(Se(),t)},_i.get=function(t){return O(this[t=Y(t)])?this[t]():this},_i.invalidAt=function(){return m(this).overflow},_i.isAfter=function(t,e){var i=M(t)?t:Se(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=Y(e)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},_i.isBefore=function(t,e){var i=M(t)?t:Se(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=Y(e)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},_i.isBetween=function(t,e,i,n){var o=M(t)?t:Se(t),s=M(e)?e:Se(e);return!!(this.isValid()&&o.isValid()&&s.isValid())&&(("("===(n=n||"()")[0]?this.isAfter(o,i):!this.isBefore(o,i))&&(")"===n[1]?this.isBefore(s,i):!this.isAfter(s,i)))},_i.isSame=function(t,e){var i,n=M(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=Y(e)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},_i.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},_i.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},_i.isValid=function(){return _(this)},_i.lang=ti,_i.locale=Xe,_i.localeData=ei,_i.max=Oe,_i.min=Te,_i.parsingFlags=function(){return f({},m(this))},_i.set=function(t,e){if("object"==typeof t){var i,n=function(t){var e,i=[];for(e in t)a(t,e)&&i.push({unit:e,priority:V[e]});return i.sort((function(t,e){return t.priority-e.priority})),i}(t=U(t));for(i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit])}else if(O(this[t=Y(t)]))return this[t](e);return this},_i.startOf=function(t){var e,i;if(void 0===(t=Y(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?oi:ni,t){case"year":e=i(this.year(),0,1);break;case"quarter":e=i(this.year(),this.month()-this.month()%3,1);break;case"month":e=i(this.year(),this.month(),1);break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=i(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ii(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=ii(e,6e4);break;case"second":e=this._d.valueOf(),e-=ii(e,1e3)}return this._d.setTime(e),o.updateOffset(this,!0),this},_i.subtract=Ke,_i.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},_i.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},_i.toDate=function(){return new Date(this.valueOf())},_i.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?R(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",R(i,"Z")):R(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},_i.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,i,n="moment",o="";return this.isLocal()||(n=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),t="["+n+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=o+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+i)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(_i[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),_i.toJSON=function(){return this.isValid()?this.toISOString():null},_i.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},_i.unix=function(){return Math.floor(this.valueOf()/1e3)},_i.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},_i.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},_i.eraName=function(){var t,e,i,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t){if(i=this.startOf("day").valueOf(),n[t].since<=i&&i<=n[t].until)return n[t].name;if(n[t].until<=i&&i<=n[t].since)return n[t].name}return""},_i.eraNarrow=function(){var t,e,i,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t){if(i=this.startOf("day").valueOf(),n[t].since<=i&&i<=n[t].until)return n[t].narrow;if(n[t].until<=i&&i<=n[t].since)return n[t].narrow}return""},_i.eraAbbr=function(){var t,e,i,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t){if(i=this.startOf("day").valueOf(),n[t].since<=i&&i<=n[t].until)return n[t].abbr;if(n[t].until<=i&&i<=n[t].since)return n[t].abbr}return""},_i.eraYear=function(){var t,e,i,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(i=s[t].since<=s[t].until?1:-1,n=this.startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return(this.year()-o(s[t].since).year())*i+s[t].offset;return this.year()},_i.year=Pt,_i.isLeapYear=function(){return W(this.year())},_i.weekYear=function(t){return li.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},_i.isoWeekYear=function(t){return li.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},_i.quarter=_i.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},_i.month=Bt,_i.daysInMonth=function(){return Mt(this.year(),this.month())},_i.week=_i.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},_i.isoWeek=_i.isoWeeks=function(t){var e=Ht(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},_i.weeksInYear=function(){var t=this.localeData()._week;return jt(this.year(),t.dow,t.doy)},_i.weeksInWeekYear=function(){var t=this.localeData()._week;return jt(this.weekYear(),t.dow,t.doy)},_i.isoWeeksInYear=function(){return jt(this.year(),1,4)},_i.isoWeeksInISOWeekYear=function(){return jt(this.isoWeekYear(),1,4)},_i.date=ui,_i.day=_i.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},_i.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},_i.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},_i.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},_i.hour=_i.hours=Xt,_i.minute=_i.minutes=hi,_i.second=_i.seconds=pi,_i.millisecond=_i.milliseconds=fi,_i.utcOffset=function(t,e,i){var n,s=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Fe(dt,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(n=He(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==t&&(!e||this._changeInProgress?ze(this,Ue(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,o.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:He(this)},_i.utc=function(t){return this.utcOffset(0,t)},_i.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(He(this),"m")),this},_i.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Fe(ht,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},_i.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60==0)},_i.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},_i.isLocal=function(){return!!this.isValid()&&!this._isUTC},_i.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},_i.isUtc=je,_i.isUTC=je,_i.zoneAbbr=function(){return this._isUTC?"UTC":""},_i.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},_i.dates=E("dates accessor is deprecated. Use date instead.",ui),_i.months=E("months accessor is deprecated. Use month instead",Bt),_i.years=E("years accessor is deprecated. Use year instead",Pt),_i.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),_i.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t,e={};return y(e,this),(e=Ee(e))._a?(t=e._isUTC?p(e._a):Se(e._a),this._isDSTShifted=this.isValid()&&function(t,e,i){var n,o=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),r=0;for(n=0;n<o;n++)(i&&t[n]!==e[n]||!i&&q(t[n])!==q(e[n]))&&r++;return r+s}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var vi=B.prototype;function bi(t,e,i,n){var o=le(),s=p().set(n,e);return o[i](s,t)}function yi(t,e,i){if(u(t)&&(e=t,t=void 0),t=t||"",null!=e)return bi(t,e,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=bi(t,n,i,"month");return o}function ki(t,e,i,n){"boolean"==typeof t?(u(e)&&(i=e,e=void 0),e=e||""):(i=e=t,t=!1,u(e)&&(i=e,e=void 0),e=e||"");var o,s=le(),r=t?s._week.dow:0,a=[];if(null!=i)return bi(e,(i+r)%7,n,"day");for(o=0;o<7;o++)a[o]=bi(e,(o+r)%7,n,"day");return a}vi.calendar=function(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return O(n)?n.call(e,i):n},vi.longDateFormat=function(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.match(C).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},vi.invalidDate=function(){return this._invalidDate},vi.ordinal=function(t){return this._ordinal.replace("%d",t)},vi.preparse=gi,vi.postformat=gi,vi.relativeTime=function(t,e,i,n){var o=this._relativeTime[i];return O(o)?o(t,e,i,n):o.replace(/%d/i,t)},vi.pastFuture=function(t,e){var i=this._relativeTime[t>0?"future":"past"];return O(i)?i(e):i.replace(/%s/i,e)},vi.set=function(t){var e,i;for(i in t)a(t,i)&&(O(e=t[i])?this[i]=e:this["_"+i]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},vi.eras=function(t,e){var i,n,s,r=this._eras||le("en")._eras;for(i=0,n=r.length;i<n;++i){switch(typeof r[i].since){case"string":s=o(r[i].since).startOf("day"),r[i].since=s.valueOf()}switch(typeof r[i].until){case"undefined":r[i].until=1/0;break;case"string":s=o(r[i].until).startOf("day").valueOf(),r[i].until=s.valueOf()}}return r},vi.erasParse=function(t,e,i){var n,o,s,r,a,l=this.eras();for(t=t.toUpperCase(),n=0,o=l.length;n<o;++n)if(s=l[n].name.toUpperCase(),r=l[n].abbr.toUpperCase(),a=l[n].narrow.toUpperCase(),i)switch(e){case"N":case"NN":case"NNN":if(r===t)return l[n];break;case"NNNN":if(s===t)return l[n];break;case"NNNNN":if(a===t)return l[n]}else if([s,r,a].indexOf(t)>=0)return l[n]},vi.erasConvertYear=function(t,e){var i=t.since<=t.until?1:-1;return void 0===e?o(t.since).year():o(t.since).year()+(e-t.offset)*i},vi.erasAbbrRegex=function(t){return a(this,"_erasAbbrRegex")||ri.call(this),t?this._erasAbbrRegex:this._erasRegex},vi.erasNameRegex=function(t){return a(this,"_erasNameRegex")||ri.call(this),t?this._erasNameRegex:this._erasRegex},vi.erasNarrowRegex=function(t){return a(this,"_erasNarrowRegex")||ri.call(this),t?this._erasNarrowRegex:this._erasRegex},vi.months=function(t,e){return t?s(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||xt).test(e)?"format":"standalone"][t.month()]:s(this._months)?this._months:this._months.standalone},vi.monthsShort=function(t,e){return t?s(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[xt.test(e)?"format":"standalone"][t.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},vi.monthsParse=function(t,e,i){var n,o,s;if(this._monthsParseExact)return Ot.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=p([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},vi.monthsRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||It.call(this),t?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=Tt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},vi.monthsShortRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||It.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=St),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},vi.week=function(t){return Ht(t,this._week.dow,this._week.doy).week},vi.firstDayOfYear=function(){return this._week.doy},vi.firstDayOfWeek=function(){return this._week.dow},vi.weekdays=function(t,e){var i=s(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?At(i,this._week.dow):t?i[t.day()]:i},vi.weekdaysMin=function(t){return!0===t?At(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},vi.weekdaysShort=function(t){return!0===t?At(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},vi.weekdaysParse=function(t,e,i){var n,o,s;if(this._weekdaysParseExact)return qt.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=p([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}},vi.weekdaysRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Kt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=$t),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},vi.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Kt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Wt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},vi.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Kt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=zt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},vi.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},vi.meridiem=function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},re("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===q(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),o.lang=E("moment.lang is deprecated. Use moment.locale instead.",re),o.langData=E("moment.langData is deprecated. Use moment.localeData instead.",le);var Mi=Math.abs;function wi(t,e,i,n){var o=Ue(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function Ei(t){return t<0?Math.floor(t):Math.ceil(t)}function xi(t){return 4800*t/146097}function Si(t){return 146097*t/4800}function Ti(t){return function(){return this.as(t)}}var Oi=Ti("ms"),Di=Ti("s"),Bi=Ti("m"),Ii=Ti("h"),Ci=Ti("d"),Pi=Ti("w"),Li=Ti("M"),Ni=Ti("Q"),Fi=Ti("y");function Ri(t){return function(){return this.isValid()?this._data[t]:NaN}}var Hi=Ri("milliseconds"),ji=Ri("seconds"),Ai=Ri("minutes"),Yi=Ri("hours"),Ui=Ri("days"),Vi=Ri("months"),$i=Ri("years"),Wi=Math.round,zi={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function qi(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}var Ki=Math.abs;function Gi(t){return(t>0)-(t<0)||+t}function Zi(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n,o,s,r,a,l=Ki(this._milliseconds)/1e3,c=Ki(this._days),u=Ki(this._months),h=this.asSeconds();return h?(t=z(l/60),e=z(t/60),l%=60,t%=60,i=z(u/12),u%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",o=h<0?"-":"",s=Gi(this._months)!==Gi(h)?"-":"",r=Gi(this._days)!==Gi(h)?"-":"",a=Gi(this._milliseconds)!==Gi(h)?"-":"",o+"P"+(i?s+i+"Y":"")+(u?s+u+"M":"")+(c?r+c+"D":"")+(e||t||l?"T":"")+(e?a+e+"H":"")+(t?a+t+"M":"")+(l?a+n+"S":"")):"P0D"}var Ji=Ie.prototype;return Ji.isValid=function(){return this._isValid},Ji.abs=function(){var t=this._data;return this._milliseconds=Mi(this._milliseconds),this._days=Mi(this._days),this._months=Mi(this._months),t.milliseconds=Mi(t.milliseconds),t.seconds=Mi(t.seconds),t.minutes=Mi(t.minutes),t.hours=Mi(t.hours),t.months=Mi(t.months),t.years=Mi(t.years),this},Ji.add=function(t,e){return wi(this,t,e,1)},Ji.subtract=function(t,e){return wi(this,t,e,-1)},Ji.as=function(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=Y(t))||"quarter"===t||"year"===t)switch(e=this._days+n/864e5,i=this._months+xi(e),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(Si(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}},Ji.asMilliseconds=Oi,Ji.asSeconds=Di,Ji.asMinutes=Bi,Ji.asHours=Ii,Ji.asDays=Ci,Ji.asWeeks=Pi,Ji.asMonths=Li,Ji.asQuarters=Ni,Ji.asYears=Fi,Ji.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12):NaN},Ji._bubble=function(){var t,e,i,n,o,s=this._milliseconds,r=this._days,a=this._months,l=this._data;return s>=0&&r>=0&&a>=0||s<=0&&r<=0&&a<=0||(s+=864e5*Ei(Si(a)+r),r=0,a=0),l.milliseconds=s%1e3,t=z(s/1e3),l.seconds=t%60,e=z(t/60),l.minutes=e%60,i=z(e/60),l.hours=i%24,r+=z(i/24),o=z(xi(r)),a+=o,r-=Ei(Si(o)),n=z(a/12),a%=12,l.days=r,l.months=a,l.years=n,this},Ji.clone=function(){return Ue(this)},Ji.get=function(t){return t=Y(t),this.isValid()?this[t+"s"]():NaN},Ji.milliseconds=Hi,Ji.seconds=ji,Ji.minutes=Ai,Ji.hours=Yi,Ji.days=Ui,Ji.weeks=function(){return z(this.days()/7)},Ji.months=Vi,Ji.years=$i,Ji.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var i,n,o=!1,s=zi;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(o=t),"object"==typeof e&&(s=Object.assign({},zi,e),null!=e.s&&null==e.ss&&(s.ss=e.s-1)),i=this.localeData(),n=function(t,e,i,n){var o=Ue(t).abs(),s=Wi(o.as("s")),r=Wi(o.as("m")),a=Wi(o.as("h")),l=Wi(o.as("d")),c=Wi(o.as("M")),u=Wi(o.as("w")),h=Wi(o.as("y")),d=s<=i.ss&&["s",s]||s<i.s&&["ss",s]||r<=1&&["m"]||r<i.m&&["mm",r]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(d=d||u<=1&&["w"]||u<i.w&&["ww",u]),(d=d||c<=1&&["M"]||c<i.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=e,d[3]=+t>0,d[4]=n,qi.apply(null,d)}(this,!o,s,i),o&&(n=i.pastFuture(+this,n)),i.postformat(n)},Ji.toISOString=Zi,Ji.toString=Zi,Ji.toJSON=Zi,Ji.locale=Xe,Ji.localeData=ei,Ji.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Zi),Ji.lang=ti,F("X",0,0,"unix"),F("x",0,0,"valueOf"),pt("x",ut),pt("X",/[+-]?\d+(\.\d{1,3})?/),bt("X",(function(t,e,i){i._d=new Date(1e3*parseFloat(t))})),bt("x",(function(t,e,i){i._d=new Date(q(t))})),
//! moment.js
o.version="2.26.0",e=Se,o.fn=_i,o.min=function(){var t=[].slice.call(arguments,0);return De("isBefore",t)},o.max=function(){var t=[].slice.call(arguments,0);return De("isAfter",t)},o.now=function(){return Date.now?Date.now():+new Date},o.utc=p,o.unix=function(t){return Se(1e3*t)},o.months=function(t,e){return yi(t,e,"months")},o.isDate=h,o.locale=re,o.invalid=g,o.duration=Ue,o.isMoment=M,o.weekdays=function(t,e,i){return ki(t,e,i,"weekdays")},o.parseZone=function(){return Se.apply(null,arguments).parseZone()},o.localeData=le,o.isDuration=Ce,o.monthsShort=function(t,e){return yi(t,e,"monthsShort")},o.weekdaysMin=function(t,e,i){return ki(t,e,i,"weekdaysMin")},o.defineLocale=ae,o.updateLocale=function(t,e){if(null!=e){var i,n,o=te;null!=ee[t]&&null!=ee[t].parentLocale?ee[t].set(D(ee[t]._config,e)):(null!=(n=se(t))&&(o=n._config),e=D(o,e),null==n&&(e.abbr=t),(i=new B(e)).parentLocale=ee[t],ee[t]=i),re(t)}else null!=ee[t]&&(null!=ee[t].parentLocale?(ee[t]=ee[t].parentLocale,t===re()&&re(t)):null!=ee[t]&&delete ee[t]);return ee[t]},o.locales=function(){return x(ee)},o.weekdaysShort=function(t,e,i){return ki(t,e,i,"weekdaysShort")},o.normalizeUnits=Y,o.relativeTimeRounding=function(t){return void 0===t?Wi:"function"==typeof t&&(Wi=t,!0)},o.relativeTimeThreshold=function(t,e){return void 0!==zi[t]&&(void 0===e?zi[t]:(zi[t]=e,"s"===t&&(zi.ss=e-1),!0))},o.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},o.prototype=_i,o.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},o}()}).call(this,i(119)(t))},485:function(t,e,i){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,i){var n,o;return"m"===i?e?"минута":"минуту":t+" "+(n=+t,o={ss:e?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:e?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[i].split("_"),n%10==1&&n%100!=11?o[0]:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?o[1]:o[2])}var i=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];t.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:e,m:e,mm:e,h:"час",hh:e,d:"день",dd:e,M:"месяц",MM:e,y:"год",yy:e},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(t){return/^(дня|вечера)$/.test(t)},meridiem:function(t,e,i){return t<4?"ночи":t<12?"утра":t<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:4}})}(i(484))},494:function(t,e){BEM.DOM.decl("popup2",{attachToScope:function(t){return t&&(this._scope=t),this._scope.append(this.domElem),this._isAttachedToScope=!0,this}})},495:function(t,e){BEM.DOM.decl({block:"m-notification"},{onSetMod:{js:function(){this.bindTo("click",this._onClick.bind(this)),this.params.delay&&setTimeout(this._remove.bind(this),this.params.delay)}},_onClick:function(t){var e=$(t.target),i=$(t.target.parentNode);(i.is(this.domElem)||e.is(this.domElem)||i.is(this.elem("icon")))&&this._remove()},_remove:function(){this.trigger("remove"),this.domElem&&BEM.DOM.destruct(this.domElem)}})},499:function(t,e){BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_onClick:function(){this.__base.apply(this,arguments),this._isDestructing||this.setMod("focused","yes")}},{live:function(){return this.liveBindTo("pointerover pointerout",(function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))})).liveBindTo("mousedown",(function(t){t.preventDefault()})),this.__base()}})},501:function(t,e){BEM.DOM.decl("modal",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._enforceRepaint=this._enforceRepaint.bind(this)}},visible:{yes:function(){this.__base.apply(this,arguments),window.attachEvent&&this.elem("content")[0].attachEvent("onresize",this._enforceRepaint)},"":function(){this.__base.apply(this,arguments),window.detachEvent&&this.elem("content")[0].detachEvent("onresize",this._enforceRepaint)}}},_enforceRepaint:function(){this.domElem[0].className+=""}})},502:function(t,e){BEM.DOM.decl("modal",{attachToScope:function(t){return this._popup.attachToScope(t)}})},503:function(t,e){!function(t){t.fn.splendid=function(e){var o=t.extend({},t.fn.splendid.defaults,e),l=a(o,{mods:{editor:"yes"},elemForContent:"data"}),c=a(o,{mods:{form:"yes"},elemForContent:"data"}),u=a(o,{mods:{behaviour:"scrollable"},padding:"0"}),h=a(o,{directions:["bottom-right"]}),d=a(o,{mods:{drafts:"yes"},elemForContent:"data",directions:["bottom-center","bottom-left","bottom-right"],padding:"3px 0"});return this.each((function(){var e={element:t(this),interactions:null,selection:{start:0,end:0,length:0},container:null,value:null};e.interactions=new t.fn.splendid.interactions(e.element),e.element.on("focusout",(function(){e.selection=e.interactions.getSelection()})),o.hotKeysScope&&keymaster.deleteScope(o.hotKeysScope),t.each(o.buttons,(function(a,f){var p=this.params,m="",_="",g=function(a){if("keydown"!==a.type||e.element.is(":focus")){p.notPrevent||a.preventDefault();var f,g,v,b,y,k,M,w,E,x,S,T,O,D,B,I,C=o.buttons,P=[];if(e.selection=e.interactions.getSelection(),e.value=e.element.val(),Object.keys(C).forEach((function(t){C[t].params.wrap&&"none"===C[t].params.wrap&&P.push(C[t].params.before)})),f=p.before,g=p.after,b=(v=e).value,k=(y=v.selection).noneSelected,D=y.multiline,"selection"in p&&(m||(m=p.placeholder),p.placeholder=_||m,k||(b=r(y.start,y.end,b),b=s(p.placeholder,y.start,b),y.newStart=y.start,y.end=y.newEnd=y.start+p.placeholder.length)),"replace"in p&&(e.value=[b.slice(0,y.start),b.slice(y.end),p.replace].join("")),"toggle"in p)B=0,I=new RegExp(p.toggle),x=n(y.currentLine.text,p.before),S=Boolean(y.currentLine.text.match(I)),x||S?!x&&S?D?(Object.keys(D).forEach((function(t,e){var i,n=D[t].text.match(I);n?(n=n[0],i=D[t].text.indexOf(n),b=s(p.before,y.currentLine.start+D[t].start+i-B,r(y.currentLine.start+D[t].start+i-B,y.currentLine.start+D[t].start+i+n.length-B,b)),O=y.currentLine.start+D[t].start+i-B+D[t].text.length-(n.length-p.before.length),B+=n.length-p.before.length):O=y.currentLine.start+D[t].start+B+D[t].text.length})),y.newStart=y.currentLine.start+p.before.length,y.newEnd=O):(M=k?{start:k.start,end:k.end}:{start:y.currentLine.start,end:y.currentLine.end},E=(w=b.slice(M.start,M.end+1)).replace(I,p.before),T=w.match(I)[0].length,b=s(E,M.start,r(M.start,M.end+1,b)),y.newStart=M.start,y.newEnd=M.end+1+p.before.length-T):x&&!S&&(D?(y.newStart=y.currentLine.start+p.before.length,y.newEnd=y.currentLine.start+D[Object.keys(D).length].end+2):(y.newStart=y.currentLine.start,y.newEnd=y.currentLine.end+1)):("before"in p&&(k?(b=s(f,k.start,b),y.newStart=k.start+f.length,y.newEnd=k.end+f.length+1):D?(Object.keys(D).forEach((function(t,e){var i=0;!e&&D[t].rangeDiff>1&&(i=D[t].rangeDiff),b=s(f,y.currentLine.start+D[t].start+e*p.before.length+i,b),y.newEnd=y.end+(e+1)*p.before.length})),y.newStart=y.start+f.length):(b=s(f,y.currentLine.start,b),y.newStart=y.currentLine.start+f.length,y.newEnd=y.currentLine.end+f.length+1)),"placeholder"in p&&y.isEmptyLine&&(b=s(p.placeholder,y.start+f.length,b),y.newStart=y.start+f.length,y.newEnd=y.newStart+p.placeholder.length));else{if("before"in p)if(k)"block"===p.type?(b=s(f,y.currentLine.start,b),y.newStart=y.currentLine.start+f.length):(b=s(f,y.start,b),y.newStart=k.start,y.newEnd=k.end+f.length+1);else if(D){var L=!1;Object.keys(D).forEach((function(t,e){!p.ignoreExceptions&&P.forEach((function(e){var n,o=i(e,D[t].text);if(o&&(e=o[0]),-1!==(n=D[t].text.indexOf(e))){var r=f.length;t>=1&&(r=t*f.length+e.length-f.length),b=s(f,y.currentLine.start+D[t].start+n+r,b),L=!0}}))})),L||(b=s(f,y.start,b),y.newStart=y.start+f.length,y.newEnd=y.end+f.length)}else{var N=!1;!p.ignoreExceptions&&P.forEach((function(t){var e,n=i(t,y.text);if(n&&(t=n[0]),-1!==(e=y.text.indexOf(t))&&(N=!0,b=s(f,y.currentLine.start+e+t.length,b),y.newStart=y.currentLine.start+t.length+f.length,y.newEnd=y.currentLine.end+f.length+1),!N){var o=i(t,y.currentLine.text);o&&y.start<=y.currentLine.start+o[0].length-1&&(N=!0,b=s(f,y.currentLine.start+o[0].length,b))}})),N||(p.type&&"block"===p.type?(b=s(f,y.currentLine.start,b),y.newStart=y.currentLine.start+f.length,y.newEnd=y.currentLine.end+f.length):(b=s(f,y.start,b),y.newStart=y.start+f.length,y.newEnd=y.end+f.length))}"placeholder"in p&&k&&("block"!==p.type||"block"===p.type&&y.isEmptyLine)&&(b=s(p.placeholder,y.start+f.length,b),y.newStart=y.start+f.length,y.newEnd=y.newStart+p.placeholder.length)}if("after"in p)if(k){var F=0,R=p.placeholder?p.placeholder.length:0;y.start!==y.currentLine.end&&(F=1),"block"!==p.type?(b=s(g,y.start+f.length+R,b),y.newEnd=y.start+f.length+R):"block"===p.type&&y.isEmptyLine?(b=s(g,y.currentLine.end+f.length+R,b),y.newEnd=y.currentLine.end+f.length+R):(b=s(g,y.currentLine.end+f.length+F,b),y.newEnd=y.currentLine.end+f.length+F)}else if(D&&Object.keys(D).length>1){L=!1;!p.ignoreExceptions&&Object.keys(D).forEach((function(t,e){P.forEach((function(e){var n=i(e,y.text);if(n&&(e=n[0]),-1!==y.text.indexOf(e)){var o=f.length+1;t==Object.keys(D).length?o=t*(f.length+g.length):t>1&&(o=t*(f.length+g.length)-1),b=s(g,y.currentLine.start+D[t].end+o,b),L=!0}}))})),L||(b=s(g,y.newEnd,b))}else{L=!1;!p.ignoreExceptions&&P.forEach((function(t){if(!L){var e=i(t,y.currentLine.text);e&&y.start<=y.currentLine.start+e[0].length-1&&(L=!0,b=s(p.after,y.currentLine.end+(f?f.length:0)+1,b))}})),L||("\n"===b[y.newEnd-1]||"\n"===b[y.newEnd]&&"\n"===b[y.newEnd-1]?(b=s(p.after,y.newEnd-1,b),y.newEnd-=1):"block"===p.type?(b=s(p.after,y.currentLine.end+f.length+1,b),y.newEnd=y.currentLine.end+f.length+1):(b=s(p.after,y.end+f.length,b),y.newEnd=y.end+f.length))}if("add"in p){var H=p.add,j=H.length,A=y.currentLine.start,Y=y.currentLine.end;if(D){var U=(W=Object.keys(D)).length;W.forEach((function(t,e){b=s(H,A+D[t].start+j*e,b)})),y.newStart=A+D[1].start,y.newEnd=A+D[U].end+U*j+2}else b=s(H,A,b),y.newStart=A,y.newEnd=Y+j+1}if("del"in p){var V=p.del.length,$=(A=y.currentLine.start,Y=y.currentLine.end,0);if(D){var W;U=(W=Object.keys(D)).length;W.forEach((function(t){D[t].text.slice(0,V)===p.del&&(b=r(A+D[t].start-$*V,A+D[t].start-$*V+V,b),$++)})),y.newStart=A,y.newEnd=A+D[U].end-$*V+2}else b.substr(A,V)===p.del?(b=r(A,A+V,b),y.newEnd=Y-V+1):y.newEnd=Y+1,y.newStart=A}if("popup"in p){var z,q,K,G=p.popup.type||"",Z=function(t,e){o.editor.setText(e)},J=function(t,i){y.length&&(b=r(y.start,y.end,b)),b=s(i,y.start,b,Boolean(p.separate)),o.editor.val(b),e.interactions.setSelection(y.start,y.start+i.length),resultPopup.hide()};switch(G){case"file":case"spell":resultPopup=u;break;case"form":resultPopup=c;break;case"other":resultPopup=h;break;case"drafts":resultPopup=d;break;default:resultPopup=l}q=BEMHTML.apply({block:"m-editor-popup",js:{selection:t.extend(e.selection,{text:_}),text:v.element.val()},mods:{editor:p.notEditor?"":"yes",type:G},data:p.data,uploadReqParams:o.uploadReqParams,uploadURLPath:o.uploadURLPath,forms:o.forms}),resultPopup.setContent(q),z=resultPopup.show(t(a.currentTarget)),"other"===G&&(e.element.splendid({buttons:z.findBlocksInside("button2"),editor:o.editor}),e.interactions.setSelection(e.selection.start,e.selection.end),BEM.blocks.button2.on(z.domElem,"click",(function(){resultPopup.hide()}),this)),z.on("onadd",J),z.on("update-text",Z),(K=z.findBlockInside("m-editor-popup")).on("update-text",(function(t,e){Z(0,e),z.onUpdateText&&z.onUpdateText(t,e)})),K.on("add-text",J),K.on("prevent-close",(function(){z._preventHideByClick=!0})),K.on("event",function(t,e){o.editor.trigger(e.name,e.data)}.bind(this)),speller=z.findBlockInside("m-speller"),speller&&speller.on("change",(function(t,e){o.editor.val(e)}))&&speller.on("cancel",(function(t,e){resultPopup.hide()}))&&speller.check(v.element.val())}p.popup||(e.element.focus(),o.editor.val(b),e.interactions.setSelection(e.selection.newStart,e.selection.newEnd))}};p.hotkey&&keymaster(p.hotkey.toLowerCase(),o.hotKeysScope?o.hotKeysScope:g,o.hotKeysScope?g:void 0),this.bindTo("mousedown",(function(){var t=o.editor.findBlockInside("textarea").elem("control")[0],e=t.selectionStart,i=t.selectionEnd,n=o.popupIsShown?o.prevSelection:"";_=t.value&&t.value.substring(e,i)?t.value.substring(e,i):n,o.prevSelection=_})),this.bindTo("click",g)}))}))},t.fn.splendid.interactions=function(t){this.splendid=t},t.fn.splendid.interactions.prototype.getPosition=function(){},t.fn.splendid.interactions.prototype.getSelection=function(t){var i,n,s={start:0,end:0,length:0,text:null,multiline:!1,multilineFullText:null,isEmptyLine:!1,noneSelected:!1,currentLine:!1};if("number"==typeof this.splendid.get(0).selectionStart&&"number"==typeof this.splendid.get(0).selectionEnd)s.start=this.splendid.get(0).selectionStart,s.end=this.splendid.get(0).selectionEnd,s.length=s.end-s.start;else{var r={range:document.selection.createRange(),normalized:this.splendid.val().replace(/\r\n/g,"\n"),selection:this.splendid.get(0).createTextRange(),endRange:this.splendid.get(0).createTextRange()};r.selection.moveToBookmark(r.range.getBookmark()),r.endRange.collapse(!1),r.selection.compareEndPoints("StartToEnd",r.endRange)>-1?(s.start=s.end=this.splendid.val().length,s.length=s.end-s.start):(s.start=-r.selection.moveStart("character",-this.splendid.val().length),r.selection.compareEndPoints("EndToEnd",r.endRange)>-1?s.end=this.splendid.val().length:(s.end=-r.selection.moveEnd("character",-this.splendid.val().length),s.end+=r.normalized.slice(0,s.end).split("\n").length-1),s.length=s.end-s.start)}return s.currentLine=e(s.start,this.splendid.val()),s.currentLine.text=this.splendid.val().slice(s.currentLine.start,s.currentLine.end+1),void 0!==s.start&&void 0!==s.end&&s.start===s.end&&(stringRange=e(s.start,this.splendid.val()),stringRange.start===stringRange.end&&(s.isEmptyLine=!0),s.noneSelected=stringRange),s.text=this.splendid.val().slice(s.start,s.end),i=this.splendid.val().slice(0,s.start).lastIndexOf("\n"),s.text.match(/\n/g)&&(s.multilineFullText=this.splendid.val().slice(i+1,s.end),(n=o(s.multilineFullText,s))&&Object.keys(n).length>1&&(s.multiline=o(s.multilineFullText))),s},t.fn.splendid.interactions.prototype.setSelection=function(t,e){if("number"==typeof this.splendid.get(0).selectionStart&&"number"==typeof this.splendid.get(0).selectionEnd)this.splendid.get(0).selectionStart=t,this.splendid.get(0).selectionEnd=e;else{var i={range:this.splendid.get(0).createTextRange()};i.range.collapse(!0),i.range.moveStart("character",t),i.range.moveEnd("character",e-t),i.range.select()}};var e=function(t,e){for(var i,n,o=!0,s=t,r=t,a=e,l=a.length,c=0;o;)void 0!==i&&void 0!==n&&(o=!1),void 0===i&&("\n"===a[s-=1]?i=s+1:s<=0&&(i=0)),void 0===n&&(a[r]&&"\n"!==a[r]?"\n"===a[r+=1]?n=r-1:r===l-1&&(n=r):n=r),c>999999&&(o=!1),c++;return{start:i,end:n}},i=function(t,e){return new RegExp(function(t){return t.replace(/\d+/,"\\d+").replace(/\s/,"\\s").replace(/\*/,"\\*").replace(/\./,"\\.")}(t)).exec(e)},n=function(t,e){return-1!==t.indexOf(e)},o=function(t){var e=1,i={},n="",o=0,s=0,r=t.split(""),a=null;return r.forEach((function(l,c){if(null===a&&"\n"===l){for(var u=0;"\n"===r[c+u];)u++;a=u}(n+=l).replace(/\n/g,"")&&("\n"!==l&&c!==t.length-1||(s=c,i[e]={rangeDiff:a,text:n.replace(/\n/gi,""),start:o?o+1:o,end:s-1},n="",e++,o=c))})),!!Object.keys(i).length&&i},s=function(t,e,i,n){var o=new RegExp("^[а-я,А-Я,\\w,\\d]{1}$");return n&&(i[e-1]&&o.exec(i[e-1])&&(t=" "+t),i[e]&&o.exec(i[e])&&(t+=" ")),i.slice(0,e).concat(t,i.slice(e))},r=function(t,e,i){return i.slice(0,t)+i.slice(e)},a=function(e,i){if(!n)var n=t(BEMHTML.apply({block:"m-popup",mods:t.extend(i.mods,{hiding:"yes",target:"anchor",theme:"normal",autoclosable:"yes"}),directions:i.directions,attrs:i&&i.padding?{style:"padding: "+i.padding}:{}})).bem("m-popup");return n._popup.on("beforeClose",(function(){e.popupIsShown=!1})),{setContent:function(t){i.elemForContent?BEM.DOM.update(n.elem(i.elemForContent),t):n.setContent(t)},show:function(t,i){return n._popup.setAnchor(t).setMod("visible","yes").domElem.find("input,textarea").eq(0).focus(),e.popupIsShown=!0,n._popup},hide:function(){return n._popup.un("onadd").delMod("visible")},popup:function(){return n._popup}}};t.fn.splendid.defaults={container:'<ul class="splendid-container">',buttons:'<li class="splendid-button">',maps:{},generate:!1,hotKeysScope:null}}(jQuery)},504:function(t,e){BEM.DOM.decl({block:"m-editor-popup"},{processParams:function(t){return""},getText:function(){var t={},e=this.findBlocksInside("textinput"),i=this.findBlocksInside("textarea"),n=e.concat(i).map((function(t){return{name:t.findElem("control").attr("name"),val:t.val()}})),o=this.findBlocksInside("select2").map((function(t){return{name:t.findElem("control").attr("name"),val:t.getVal()}}));return n.concat(o).forEach((function(e){e.val&&(t[e.name]=e.val)})),this.processParams(t)},addVideoParser:function(t){"function"==typeof t?this.parsers.push(t):Array.isArray(t)&&this._isArrayOfFuncitons(t)&&(this.parsers=this.parsers.concat(t))},_isArrayOfFuncitons:function(t){return t.every((function(t){return"function"==typeof t}))}})},506:function(t,e){BEM.DOM.decl({block:"textinput"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.autofocus&&(this.setMod("focused","yes"),this._getControl().focus())}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",(function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))})),this.__base()}})},507:function(t,e){BEM.DOM.decl("mi-uploader",{_files:[],_summary:{},dragEvents:["dragstart","dragenter","dragover","dragleave","drag","dragend"],onSetMod:{js:function(){this._events()}},_events:function(){var t=this;this.dragEvents.forEach((function(e){t.bindTo(e,(function(i){i.preventDefault(),t.trigger(e)}))})),this.bindTo("drop",this._onDrop)},_onDrop:function(t){var e=Array.prototype.slice.apply(t.originalEvent.dataTransfer.files),i=[];t.preventDefault(),e.forEach((function(t){i.push(this._createFileObject(t))}),this),this.trigger("drop",1===i.length?i[0]:i),this._files=this._files.concat(i)},_append:function(t){this._files.push(this._createFileObject(t))},_createFileObject:function(t){var e={raw:t,size:this.convertToOptimalSize(t.size),response:null,status:{uploaded:!1,inProgress:!1},total:t.size,loaded:0,send:this._sendFile};return e.req=this._req(e),t.type.match(/image.*/)&&this._createThumbnail(e),e},_createThumbnail:function(t){var e=this,i=new FileReader,n=e.params.thumbnail;i.onloadend=function(){n&&(n.height||n.width)?e._getThumbImage(i.result,t):t.thumbnail=i.result},i.readAsDataURL(t.raw)},_getThumbImage:function(t,e){var i=new Image,n=e.raw.type,o=this.params.thumbnail;i.onload=function(){var t=o.height||null,s=o.width||null,r=i.width,a=i.height,l=document.createElement("canvas"),c=new Image,u=null,h=r>a&&r>s,d=a>r&&a>t,f=a===r&&a>t;!function o(){var p=h&&i.width>>1>s||d&&i.height>>1>t||f&&i.height>>1>t;c.onload=function(){i=c,o()},p?(r>>=1,a>>=1):(h?(a*=s/r,r=s,t&&a>t&&(r*=t/a,a=t)):(d||f)&&(r*=t/a,a=t,s&&r>s&&(a*=s/r,r=s)),r=Math.round(r),a=Math.round(a));l.width=r,l.height=a,l.getContext("2d").drawImage(i,0,0,r,a),u=l.toDataURL(n),p?c.src=u:e.newthumbnail=u}()},i.src=t},_req:function(t){var e,i=this,n=new FormData;return n.append("file",t.raw),e={xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var n=e.loaded/e.total*100<<0;t.progress=n,t.loaded=e.loaded,t.total=e.total,i._updateSummary(),i.trigger("progress",t)}}),!1),e},type:"POST",url:this.params.url,data:n,processData:!1,contentType:!1,beforeSend:function(){t.status.inProgress=!0,i.trigger("beforeSend",t)},success:function(e){i._onSuccess(e,t)},error:function(e){i._onError(e,t)}},this.params.hasOwnProperty("ajaxExtend")&&$.extend(e,this.params.ajaxExtend),e},_onSuccess:function(t,e){e.status.uploaded=!0,e.status.inProgress=!1,e.response=t,this.trigger("success",{file:e,data:t})},_onError:function(t,e){e.status.inProgress=!1,e.response=t,this.trigger("error",e)},_updateSummary:function(){var t=this,e=0,i=0;return this._summary.filesUploaded=0,this._summary.filesTotal=this._files.length,this._summary.percent=this._getOverallPercent(),this._files.forEach((function(n){n.status.uploaded&&t._summary.filesUploaded++,e+=n.total,i+=n.loaded})),this._summary.total=e,this._summary.loaded=i,this._summary},_getOverallPercent:function(){var t=0,e=0,i=0,n=0;return this._files.length&&(this._files.forEach((function(i){t+=i.total||0,e+=i.loaded||0})),n=t/100,i=Math.round(e/n)),i},_sendFile:function(){this.status.uploaded||this.status.inProgress||$.ajax(this.req)},getSummary:function(){return this._updateSummary()},getFiles:function(){return this._files},setData:function(t){return t instanceof Array?t.forEach((function(t){t instanceof window.File&&this._append(t)}),this):t instanceof window.File&&this._append(t),this},convertToOptimalSize:function(t){for(var e=["B","Kb","Mb","Gb"],i=0;i<e.length;i++){var n=t/1024;if(!(n>1))return t.toFixed(2)+e[i];t=n}},clear:function(){return this._files=[],this}})},508:function(t,e){BEM.DOM.decl("progress",{onSetMod:{js:{inited:function(){this.update(this.params.value,this.params.timing)}}},update:function(t,e){return this.setMod("timing",e||"").domElem.css({width:t<=0?"0":t>=1?"100%":(100*t).toPrecision(2)+"%"}).css("width"),this}})},509:function(t,e){BEM.DOM.decl("select2",{onSetMod:{js:{inited:function(){this.button=this.findBlockOn("button","button2"),this.initSelect()}},disabled:{"*":function(t,e){this.button.setMod(t,e)}}},initSelect:$.noop,getVal:$.noop,setPrevVal:$.noop,getPrevVal:$.noop,getClearVal:$.noop,setVal:$.noop,_onControlChange:$.noop,_onButtonKeypress:$.noop,_onButtonKeydown:$.noop,_changeIcon:$.noop,_buildLeftIcon:$.noop,_setMinWidth:$.noop},{live:function(){this.liveInitOnBlockInsideEvent("init","button2"),this.liveBindTo("control","pointerdown").liveBindTo("pointerdown",(function(){})),this.liveBindTo("button","keydown",(function(t){this._onButtonKeydown(t)})).liveBindTo("button","keypress",(function(t){this._onButtonKeypress(t)}))}})},510:function(t,e){BEM.DOM.decl("select2",{onSetMod:{disabled:{"*":function(t,e){this.__base.apply(this,arguments),this.control.prop("disabled",Boolean(e))}}},initSelect:function(){this.control=this.elem("control");var t=this.getVal();this.initialVal=this.button.getText(),this.setPrevVal(t),BEM.afterCurrentEvent((function(){if(this.control&&this.control.length&&this.domElem){var e=this.getVal();e&&0!==e.length&&e!==t&&this.setVal(e)}}),this),this.bindTo("control","change",(function(t){this._onControlChange(t)}))},getVal:function(){var t=this.control.val();if(!t){var e=this.getOptions();return e.length?e[0].value:[]}return t},setVal:function(t){if(this.getVal()!==t)for(var e=this.getOptions(),i=0;i<e.length;i++){var n=e[i];if(n.value===t){this.control[0].value=t,this.button.setText(n.text),this.triggerChange();break}}},setPrevVal:function(t){this.prevVal=t},getPrevVal:function(){return this.prevVal},getClearVal:function(t){return t&&1===t.length?t[0]:t},triggerChange:function(){this.trigger("change",{prevVal:this.getClearVal(this.getPrevVal()),currVal:this.getClearVal(this.getVal())})},controlChange:function(t){for(var e=this.getOptions(),i=0;i<e.length;i++){var n=e[i];if(n.value===t){this.button.setText(n.text);break}}},_onControlChange:function(t,e){var i=this.getVal();this.controlChange(i),this.triggerChange(),this.setPrevVal(i)},getOptions:function(){return Array.prototype.slice.call(this.control[0].options)},getName:function(){return this.control.attr("name")},setName:function(t){this.control.attr("name",t),this.trigger("setName")},reset:function(){this.setVal(this.initialVal),this.button.setText(this.initialVal),this.trigger("reset")}})},511:function(t,e){BEM.DOM.decl("menu",{onSetMod:{focused:{yes:function(){if(this.__base.apply(this,arguments),this.hasMod("type","navigation"))return!1;this.elem("item","hovered","yes").length||(this.setMod(this.elem("item").eq(0),"hovered","yes"),this._scrollToItem(this.elem("item").eq(0))),this.bindToDoc("keydown",this._onKeydown).bindToDoc("keyup",this._onKeyup).bindToDoc("keypress",this._onKeypress)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("keydown keyup keypress").delMod(this.elem("item","hovered","yes"),"hovered")}}},hoverNext:function(t){for(var e,i,n=t?this.getItems().reverse():this.getItems(),o=0,s=!1;i=n[o];o++)if(!this.hasMod(i,"disabled"))if(this.hasMod(i,"hovered"))s=!0;else{if(s){e=i;break}e||(e=i)}e&&(this.setMod(e,"hovered","yes"),this._scrollToItem(e))},hoverText:function(t,e){for(var i,n=this.getItems(),o=n.length,s=this._normalizeText(t),r=e||0;r<o;){if(i=n[r],!this.hasMod(i,"disabled")&&0===this._normalizeText(i.text()).indexOf(s))return this.setMod(i,"hovered","yes"),void this._scrollToItem(i);++r===n.length&&(r=0,o=e)}},_normalizeText:function(t){return t.toLowerCase().replace(/ё/,"е")},reset:function(){this.__base.apply(this,arguments),this._dropSearchCache()},_dropSearchCache:function(){this._lastTime=this._lastChar=this._searchTerm=void 0},_scrollToItem:function(t){var e=this.domElem.offset().top,i=t.offset().top,n=0;i<e?n=i-e:(n=i+t.outerHeight()-e-this.domElem.outerHeight())<0&&(n=0),this.domElem.scrollTop(this.domElem.scrollTop()+n)},_onKeydown:function(t,e){var i=BEM.blocks.keycodes,n=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||((i.is(n,"UP","DOWN")||!e&&n===i.SPACE)&&t.preventDefault(),i.is(n,"UP","DOWN")&&(this.hoverNext(i.is(n,"UP")),this._dropSearchCache()))},_onKeyup:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||e.is(i,"ENTER","SPACE")&&this._onItemClick(this.elem("item","hovered","yes"),t,{source:"keyboard"})},_onKeypress:function(t){var e,i,n=Number(new Date),o=t.charCode,s=String.fromCharCode(o).toLowerCase(),r=s===this._lastChar&&1===this._searchTerm.length,a=this.getItems();o<=BEM.blocks.keycodes.SPACE||t.ctrlKey||t.altKey||t.metaKey?this._lastTime=n:(n-this._lastTime>this.SEARCH_TIMEOUT||r?this._searchTerm=s:this._searchTerm=(this._searchTerm||"")+s,this._lastChar=s,this._lastTime=n,e=this.elem("item","hovered","yes"),i=(i=$($.map(a,(function(t){return t.get()}))).index(e))>=0?i:0,r&&0===this._normalizeText(e.text()).indexOf(this._searchTerm)&&(i=i>=a.length-1?0:i+1),this.hoverText(this._searchTerm,i))},SEARCH_TIMEOUT:1500})},512:function(t,e){BEM.DOM.decl({block:"textarea",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._control=this.elem("control"),this._text=this._control.val()}}},val:function(t){var e=void 0!==t,i=this._control;return(t=e?null===t?"":t.toString():i.val())!==this._text&&(i.val(t),this._textChange()),e?this:t},getText:function(){return this._control.val()},setText:function(t){return this._control.val(t||""),this._textChange(),this},_textChange:function(){var t=this._control.val(),e=this._text;if(!(t!==e))return!1;this._text=t;var i={text:t,oldText:e};this.trigger("change",i)}},{live:function(){return this.liveBindTo("control","input",(function(){this._textChange()})),this.__base()}})},513:function(t,e){BEM.DOM.decl("textarea",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.autofocus&&(this.setMod("focused","yes"),this._getControl().focus())}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",(function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))})),this.__base()}})},514:function(t,e){BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var t=this._getSelectedText();t&&t!==this._getButtonText()&&this.elem("control").trigger("change")}},disabled:function(t,e){this.elem("control").prop("disabled",e),this._getButton().setMod(t,e),e&&this.delMod("opened").delMod("focused")},focused:{yes:function(){if(this.hasMod("disabled"))return!1;this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),this.afterCurrentEvent((function(){this.domElem&&this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent((function(){this.domElem&&this.trigger("blur")}))}},opened:function(t,e){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down",Boolean(e))}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(t,e){if(void 0===t)return this.elem("control").val();var i,n=-1;return this.findElem("option").each((function(e){this.value===t&&!this.disabled&&(!(i=$(this).parent("optgroup")[0])||!i.disabled)&&(n=e)})),n>-1&&this._selectedIndex(n,e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(t,e){var i=this._getSelectedIndex();return void 0===t||t===i?i:(this.elem("control").prop("selectedIndex",t),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(t),"selected","yes")),this.trigger("change",$.extend({index:t,prev:i},e)),t)},setOptions:function(t){return t?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(t,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){var t;return this._isParentPopup()&&((t=this._popup._parent).repaint||t.redraw).call(t),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){this._setButtonText(this._getSelectedText()),this.trigger("change",{index:this._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode===e.UP,n=t.keyCode===e.DOWN,o=t.keyCode===e.ENTER,s=t.keyCode===e.SPACE;if(i||n){if(t.preventDefault(),!this.isOpened())return this.open();var r=this._items.length,a=this._curItemIndex;if(i&&0===a||n&&a>r-2)return;if(r){var l,c=n?1:-1;for(l=a;l>=0&&l<=r;)if(l+=c,this._isSelectableItem(this._items.eq(l))){a=l;break}this._onEnterItem(this._items.eq(a),!0)}}(o||s)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,i){this.elem("button").attr("aria-activedescendant",t.attr("id"));var n=this._curItemIndex,o=this._getItemIndex(t),s=this._items;n>-1&&this.delMod(s.eq(n),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(s.eq(o),"hovered","yes")),i&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do{t=(e=e.parent()).css("overflow-y")}while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(t){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){t.length&&(this._getButton().elem("text").text(t),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(t,e){return this.containsDomElem($(e.target))},_getItemIndex:function(t){return $.inArray(t.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){return!this.hasMod(t,"disabled","yes")&&!this.hasMod(t,"label","yes")},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",(function(t){this._onSelectChange()})),this.liveBindTo("control","focusin focusout",(function(t){this._onControlFocusInOut(t)})),this.liveBindTo("mousedown",(function(t){this._onMouseDown(t)})),this.liveInitOnBlockInsideEvent("focus","button",(function(){this._onButtonFocus()})).liveInitOnBlockInsideEvent("blur","button",(function(){this._onButtonBlur()}))},useNativeControl:null,_buildOption:function t(e,i,n){var o={};return"option"===e.item?(o={block:"select",elem:"option",tag:"option",attrs:{value:e.value},content:e.content},e.disabled&&(o.attrs.disabled="disabled"),e.selected&&(o.attrs.selected="selected")):"optgroup"===e.item&&(o={elem:"option-group",tag:"optgroup",attrs:{label:e.label}},e.disabled&&(o.attrs.disabled="disabled"),o.content=Array.isArray(e.content)?e.content.map(t):e.content),o.block="select",o}})},515:function(t,e){BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}},{live:function(){return this.liveInitOnBlockInsideEvent("press","button",(function(){this._onButtonPress()})),this.__base.apply(this,arguments)}})},516:function(t,e){BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var i=this.domElem;e&&this.delMod("hovered"),this._href&&(e?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent((function(){i&&i.prop("disabled",e)}))},pressed:function(t,e){if(this.hasMod("disabled"))return!1;this.trigger(e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return void 0===t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent((function(){this.domElem&&this.trigger("click")}))}},{live:function(){this.liveBindTo("pointerclick",(function(t){this._onClick(t)})).liveBindTo("pointerpress",(function(t){this.isDisabled()||this._onPointerpress(t)}))}})},517:function(t,e){BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){if(this.isDisabled())return!1;this.bindToWin("unload",(function(){this.delMod("focused")})).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),this.trigger("focus")},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){if(this.isDisabled())return!1;!e&&this.delMod("pressed")},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;!this._keyDowned&&e.is(i,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",(function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,i===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))})))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",(function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)})).liveBindTo("focusin focusout",(function(t){this.toggleMod("focused","yes","focusin"===t.type)})),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",(function(t){this.domElem.height()})),this.__base()}})},518:function(t,e){BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._initButton()}}},_initButton:function(){},_redrawList:function(){var t,e=this,i=this._getPopup().domElem;return BEM.DOM.update(this.findElem(i,"list"),this.__self._buildItemsHtml(this.elem("control").children())),t=this.findElem(i,"item"),this._curItemIndex=-1,this._items=t.filter((function(){return!e.hasMod($(this),"label","yes")})),this.bindTo(e._items,{pointerclick:function(t){t.preventDefault(),e._onSelectItem(t.data.domElem)},pointerover:function(t){e._onEnterItem(t.data.domElem)},pointerout:function(t){e._onLeaveItem(t.data.domElem)}}),this}},{_buildItemsHtml:function(t){var e={block:"select",elem:"separator",tag:"i"},i=[],n=[];function o(t,e,i){var n={block:"select",elem:"item",content:{elem:"text",tag:"span",content:{tag:!1,html:e}||"   "},elemMods:{}};return i&&(n.elemMods=i),n}return function t(s,r){var a=s.length;if(a){var l=0;do{var c=$(s[l]),u=c.attr("disabled")&&{disabled:"yes"};if(c.is("optgroup")){!0,!c.prev().is("optgroup")&&l>0&&i.push(e),n.push(i),(i=[]).push(o(0,c.attr("label"),$.extend({label:"yes"},u,r))),t(c.children(),$.extend({inner:"yes"},u,r));var h=i;(i=n.pop()).push({block:"select",elem:"group",content:h})}else i.push(o(0,c.html(),$.extend(u,c.is(":selected")&&{selected:"yes"},r)))}while(++l<a||!1)}}(t),BEMHTML.apply(i)}})},519:function(t,e){BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,i=t.__self.getName(),n=this._getPopupContent(i),o=this._getPopupMix(i),s={animate:"no"},r={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach((function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))})),$.extend(o.elemMods,e.elemPopupMods),$.extend(s,e.popupMods),$.extend(r,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:s,mix:o,js:r,content:{elem:"content",content:n}}));return this._popup=this.findBlockOn(a,"popup"),this._popup.on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,i){t._isOutsideClicked(e,i)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",(function(t){t.preventDefault()})),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",(function(e,i){t._popup.containsDomElem($(i.target))&&e.preventDefault()})),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10),e=this._getPopup();if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var i=parseInt(e.domElem.css("height"),10),n=t*this._rowHeight;i!==n&&(e.setSize({height:n}),i>n&&this.setMod(this.findElem(e.domElem,"popup"),"scrollable","yes"))}else e.setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select");this._getPopup().show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,i=this._popupContent,n=i.scrollTop(),o=e-n,s=2*this._rowHeight;o>i.height()-s?t=e-s:n&&o<s&&(t=e-i.height()+s),t&&i.scrollTop(t)}}},{SHADOW_OFFSET:1})},520:function(t,e){BEM.DOM.decl("mi-staff-card",{onSetMod:{js:function(){var t=this.domElem,e=this.params.user,i=this;this.bindTo("pointerout",this._onPointerOut),this._card={destruct:function(){}},$.when(this.__self._cardReady()).then((function(){i._card=new StaffCard(t,e),i.afterCurrentEvent((function(){i.hasMod("hovered","yes")&&i._card.onHover()}))}))}},_onPointerOut:function(){this.delMod("hovered")},destruct:function(){return this.unbindFrom("pointerout",this._onPointerOut),this._card.destruct(),this.__base.apply(this,arguments)}},{_cardScriptRequest:null,_cardReady:function(){return this._cardScriptRequest?this._cardScriptRequest:"undefined"==typeof StaffCard?(this._cardScriptRequest=$.ajax({dataType:"script",cache:!0,url:"//static.yandex.net/staff-card/_/staff-card-base.min.js"}),this._cardScriptRequest):void 0},live:function(){this.liveBindTo("pointerover",(function(t){this.setMod("hovered","yes")}))}})},522:function(t,e){BEM.DOM.decl({block:"m-editor-popup",modName:"type",modVal:"form"},{onSetMod:{js:function(){this._bindEvents(),this._setDefaults(),this._positionPopup(),this._createForm()},loading:function(t,e){this._getSpin().toggleMod("progress","yes",Boolean(e))}},_bindEvents:function(){var t=this._getPopup();t.on("beforeOpen",this._beforePopupOpen,this),t.on("beforeClose",this._beforePopupClose,this)},_setDefaults:function(){var t=this.params.forms||{};this._formId=0,this._formOptions=$.extend({apiUrl:"https://api.study.yandex-team.ru:9514/admin/api/v2/surveys/",adminUrl:"https://admin.forms.yandex-team.ru/#/surveys/",groupId:9,user:"login"},t)},_createForm:function(){var t=this,e=this._formOptions,i=this._createFormName();this.setMod("loading","yes"),$.ajax({url:e.apiUrl,contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",crossDomain:!0,data:JSON.stringify({group_id:e.groupId,name:i}),timeout:5e3,xhrFields:{withCredentials:!0}}).then((function(e){t._onFormCreate(e)}),(function(e){t._onFormCreateError(e)})).always((function(){t.delMod("loading")}))},_onFormCreate:function(t){t.id?(this._formId=t.id,this._setIframeSrc()):this.trigger("error",{message:"API Error: form id parameter is missing",data:t})},_onFormCreateError:function(t){this.trigger("error",{message:"API Error: cannot create form",data:t})},_createFormName:function(){var t=(new Date).toISOString();return t=t.substring(0,19).replace(/[T:]/g,"-"),this._formOptions.user+"-"+t},_setIframeSrc:function(){var t=this._formOptions.adminUrl+this._formId+"/";this.elem("iframe").attr("src",t)},_getSpin:function(){return this._spin||(this._spin=this.findBlockOn("loading","spin2")),this._spin},_getPopup:function(){return this._popup||(this._popup=this.findBlockOutside("popup2")),this._popup},processParams:function(t){var e="",i=$.extend({formId:0},t);return i.formId&&(e='\n{{forms id="'+i.formId+'"}}\n'),e},getText:function(){return this.processParams({formId:this._formId})},_beforePopupClose:function(){this.trigger("popupClose",{formId:this._formId})},_beforePopupOpen:function(){var t=this._getPopup();t.afterCurrentEvent((function(){t.unbindFromWin("scroll resize")}),this)},_positionPopup:function(){var t=this._getPopup();t.afterCurrentEvent((function(){t.domElem.css({left:0,right:0})}),this)}})},524:function(t,e){BEM.DOM.decl({block:"m-editor-popup",modName:"type",modVal:"video"},{onSetMod:{js:function(){var t=BEM.blocks.keycodes;this._codeInput=this.findBlockInside({block:"textinput",modName:"video",modVal:"link"}),this._popup2=this.findBlockOutside({block:"popup2",modName:"editor",modVal:"yes"}),this._notifier||(this._notifier=BEM.create("mi-notifier",{icons:!0,autoclosable:!0,delay:4e3})),this.bindTo(this._codeInput.domElem,"keyup",(function(e){e.keyCode===t.ENTER&&this._popup2._addButton.trigger("click")}))}},destruct:function(t){this._notifier.destruct(),this.__base(t)},getVideoTag:function(t){return'<#<video src="'+t+'" width="640" height="480" controls="controls"/>'+BEM.I18N("m-editor-popup","notSupportVideo")+'. <a href="'+t+'" target="_blank">'+BEM.I18N("m-editor-popup","downloadVideo")+"</a></video>#>"},getAudioTag:function(t){return'<#<audio src="'+t+'" controls="controls"/>'+BEM.I18N("m-editor-popup","notSupportAudio")+'. <a href="'+t+'" target="_blank">'+BEM.I18N("m-editor-popup","downloadAudio")+"</a></audio>#>"},getIframeTag:function(t,e,i){return'{{iframe src="'+t+'" frameborder="0" width="'+e+'" height="'+i+'"}}'},processParams:function(t){var e,i,n,o="";return(e=$.extend({},{videoSrc:""},t)).videoSrc&&(i=this._rawCodeParser(),$.isPlainObject(i)?i.src?(e.videoWidth=i.width||"560",e.videoHeight=i.height||"315",n=i.src,i.video?o=this.getVideoTag(n):i.audio?o=this.getAudioTag(n):i.default?(o="(("+n+"))",this._notifier.error(BEM.I18N("m-editor-popup","srcLinkError"))):o=this.getIframeTag(n,e.videoWidth,e.videoHeight)):this._notifier.error(BEM.I18N("m-editor-popup","videoParserError")):this._notifier.error(BEM.I18N("m-editor-popup","videoLinkError"))),o},_rawCodeParser:function(){var t,e=this._codeInput.val();if(e){for(var i=0;i<this.parsers.length&&(t=this.parsers[i](e),!$.isPlainObject(t));i++);$.isPlainObject(t)||(t=this._parseDefaultUrl(e))}return t},parsers:[function(t){var e,i,n=t.match(/^(?:<iframe )([^>]+)(?:>)(?:.*)(?:<\/iframe>)$/),o={};if(null!==n){if(""!==n[1])for(var s=0,r=(e=n[1].split(" ")).length;s<r;s++)null!==(i=e[s].match(/(^[^\=]+)\=(\S+)/))&&(i[2]=i[2].replace(/(^"|')([^"']+)("|'$)/,"$2"),o[i[1]]=i[2]);return{src:o.src||"",width:o.width||"",height:o.height||""}}},function(t){if(null!==t.match(/^((https?:\/\/)(w{3}\.)?|(w{3}\.))\S+\.(mp4|ogv|ogg|webm|mov)$/i))return{video:!0,src:t}},function(t){if(null!==t.match(/^((https?:\/\/)(w{3}\.)?|(w{3}\.))\S+\.(mp3)$/i))return{audio:!0,src:t}},function(t){var e=t.match(/youtube\.com\/watch\?v=([^&]+)|youtu\.be\/(\S+)$/i);if(null!==e)return{src:"https://www.youtube.com/embed/"+(e[1]||e[2])}},function(t){var e=t.match(/vimeo\.com\S*\/([0-9]+)$/i);if(null!==e)return{src:"https://player.vimeo.com/video/"+e[1],width:"500",height:"281"}},function(t){var e=t.match(/coub\.com\/view\/(\S+)$/i);if(null!==e)return{src:"https://coub.com/embed/"+e[1]+"?muted=false&autostart=false&originalSize=false&hideTopBar=false&startWithHD=false",width:"480",height:"270"}},function(t){var e=t.match(/music\.yandex\.(ru|ua|kz|by)\/(?:album\/(.*)\/|users\/(.*)\/)?(album|track|artist|playlists)\/(\d+)/i);if(null!==e){var i,n,o=e[1],s=void 0!==e[2]?e[2]:"",r=e[3],a=e[4],l=e[5],c="https://music.yandex."+o+"/iframe/#";switch(a){case"album":c+="album/"+l,i="450",n="400";break;case"track":c+="track/"+l+"/"+s,i="500",n="100";break;case"artist":c+="artist/"+l,i="500",n="600";break;case"playlists":c+="playlist/"+r+"/"+l,i="500",n="400"}return{src:c,width:i,height:n}}}],_parseDefaultUrl:function(t){var e=t.match(/^((https?:\/\/)(w{3}\.)?|(w{3}\.))\S+$/i);if(null!==e)return{src:e[0],default:!0}}})},525:function(t,e){BEM.DOM.decl("mi-editor-history",{_historyStack:[],_suppressEvents:!1,onSetMod:{js:function(){this._control=this.findBlockOn("textarea"),this._control&&this._attach()}},destruct:function(){this._unSubscribeOnChange(this._control),this.__base.apply(this,arguments)},_attach:function(){this._currentState=this.__self._getCurrentState(this._control),this._debounceHandler=$.debounce(this._onTextChange,this.__self.DEBOUNCE_TIME,this),this._currentState.text||(this._currentState=null),this._subscribeOnChange(this._control),this._subscribeUndo()},_subscribeOnChange:function(t){t.on("change",this._debounceHandler,this)},_unSubscribeOnChange:function(t){t.un("change",this._debounceHandler,this)},_subscribeUndo:function(){window.keymaster("command+z, ctrl+z",function(t){this._historyStack.length&&this._control&&this._control.hasMod("focused","yes")&&(t.preventDefault(),this._undoHistory())}.bind(this))},_onTextChange:function(){this._currentState&&(this._historyStack.push(this._currentState),this._currentState=null),this._currentState=this.__self._getCurrentState(this._control),this._historyStack=this.__self._cleanUpStack(this._historyStack)},_setText:function(t){this._unSubscribeOnChange(this._control),this._suppressEvents=!0,this._control.val(t),this.afterCurrentEvent((function(){this._subscribeOnChange(this._control)}))},_undoHistory:function(){var t=this._historyStack.pop();this._setText(t.text),this._currentState=t,this.__self._trySetSelection(this._control.elem("control"),t)}},{DEBOUNCE_TIME:300,MAX_STACK_SYMBOLS:1e5,_getCurrentState:function(t){return t?{text:t.val(),selectionStart:t.elem("control")[0].selectionStart,selectionEnd:t.elem("control")[0].selectionEnd}:null},_cleanUpStack:function(t){if(t.length%10!=0)return t;for(;this._getStackLength(t)>this.MAX_STACK_SYMBOLS;)t.shift();return t},_getStackLength:function(t){var e=0;return t.forEach((function(t){e+=t.text.length})),e},_trySetSelection:function(t,e){if(!e.selectionStart||!e.selectionEnd)return!1;try{return t[0].setSelectionRange(e.selectionStart,e.selectionEnd),!0}catch(t){return!1}}})},526:function(t,e){BEM.decl("mi-editor-drafts",{onSetMod:{js:function(){this._settings=$.extend({},this.__self._settings,this.params),this._settings.key||(this._settings.key=document.location.href+(this._settings.id?"#"+this._settings.id:"")),this._bag=new window.Bag({prefix:this.__self._indexedDBPrefix,stores:["indexeddb"]}),this._scheduleCleaning()}},get:function(){var t=this,e=$.Deferred();return this._bag.get(this._settings.key,(function(i,n){return n?t.__self._isCurrentVersion(n)?void e.resolve(n.items):(t._bag.clear(),e.resolve([])):e.resolve([])})),e.promise()},store:function(t){var e=$.Deferred(),i={version:this.__self.version,saveDate:Date.now(),items:t};return this._bag.set(this._settings.key,i,this._settings.timeToLive/1e3,(function(i){i?e.reject(i):e.resolve(t)})),e.promise()},_scheduleCleaning:function(){setTimeout(function(){this._bag.clear(!0)}.bind(this),1e4)}},{version:1,_indexedDBPrefix:"drafts",_settings:{timeToLive:6048e5},_isCurrentVersion:function(t){return t&&t.version&&t.version===this.version}})},527:function(t,e){BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{},{live:function(){return this.liveBindTo("dragend",(function(t){this.hasMod("type","link")&&!this.hasMod("disabled")&&this.delMod("pressed")})),this.__base()}})},528:function(t,e){BEM.DOM.decl("dropdown2",{onSetMod:{js:{inited:function(){this._switcher=null,this._popup=null}},opened:{yes:function(){if(this.hasMod("disabled"))return!1;this.trigger("beforeOpen").getPopup().setAnchor(this.getSwitcher()).setMod("visible","yes").on("beforeClose",this._onPopupBeforeClose,this)},"":function(){this.trigger("beforeClose").getPopup().delMod("visible").un("beforeClose",this._onPopupBeforeClose,this)}},disabled:{"*":function(t,e){this.getSwitcher().setMod(t,e)},yes:function(){this.delMod("opened")}}},getPopup:function(){return this._popup||(this._popup=this.findBlockInside("popup2")),this._popup},getSwitcher:function(){return this._switcher||(this._switcher=this.findBlockInside(this.getMod("switcher"))),this._switcher},_onPopupBeforeClose:function(){this.delMod("opened")},_onSwitcherClick:function(t){this._switcher||(this._switcher=t.block),this.toggleMod("opened","yes")}},{live:!0})},531:function(t,e){BEM.DOM.decl("paranja",{onSetMod:{js:{inited:function(){[].concat(this.params.rel||[]).forEach((function(t){$(t.elem||this.domElem).on(t.event,this[t.method].bind(this))}),this),this.bindTo("pointerclick",(function(){this.trigger("click")}))}},state:{open:function(){this.trigger("open")},close:function(){this.trigger("close")}}},open:function(t){this.setMod("state","open")},close:function(t){this.setMod("state","close")}},{live:!1})},545:function(t,e){BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.elem("control"),e=$.dom.getActiveElement(),i=this.params.autoFocus&&!e.is("input, textarea");(e[0]===t[0]||i)&&(this.setMod("focused","yes")._focused=!0),this.params.shortcut&&this.bindToDoc("keydown",(function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")}))}}},_focus:function(){if(!1===this.__base())return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},destruct:function(){this.params.shortcut&&this.unbindFromDoc("keydown"),this.__base.apply(this,arguments)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("box","pointerover pointerout",(function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))})),this.liveBindTo("control","dragenter"),this.__base()}})},546:function(t,e){var i;i={},BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,i,n){return $.isFunction(i)||(n=i,i=this.params.onError),this._get(t,e,i,$.extend({},this.params,n)),this},_get:function(t,e,n,o){var s=this._buildCacheKey(t,o),r=i[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent((function(){e.call(this.params.callbackCtx,r.data[s])}),this):this._do(t,e,n,o)},_do:function(t,e,i,n){},_onSuccess:function(t,e,i,n){n.cache&&!this._preventCache&&this.putToCache(n,t,i),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(t,e,n){var o=i[t.cacheGroup]||(i[t.cacheGroup]={keys:[],data:{}});o.keys.length>=t.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(e,t);return o.data[s]=n,o.keys.push(s),this},dropCache:function(){return delete i[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:i})},547:function(t,e){BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(t){},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){this.liveBindTo("pointerpress",(function(t){this.hasMod("disabled")||this._onPointerpress(t)}))},highlight:function(t,e){if(!$.isArray(e))return t;var i,n=[],o=0,s=e.sort((function(t,e){return t[0]-e[0]})),r=[],a=-1!==t.indexOf("?"),l=function(t){if(a)return t;for(;-1!==t.indexOf("?")&&r.length;)t=t.replace("?",r[0]),r.shift();return t};return!a&&function(){for(var e,i=/\&(#\d+|#x[a-f\d]+|\w+);/gi;e=i.exec(t);)r.push(e[0]),t=t.replace(e[0],"?")}(),s.forEach((function(e){i=o>e[0]?o:e[0],n.push({tag:"span",elem:"span",content:l(t.slice(o,i))}),n.push({tag:"em",elem:"em",content:l(t.slice(i,o=e[1]))})}),this),n.push({tag:"span",elem:"span",content:l(t.slice(o))}),n}})},548:function(t,e){BEM.DOM.decl("b-autocomplete-item",{},{live:function(){return this.liveBindTo("mouseover mouseout mousedown mouseup pointerover pointerout pointerdown pointerup",(function(t){this.trigger(t.type)})),this.__base()}})},549:function(t,e){BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{select:function(){return!1}})},553:function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(this,i(28))},557:function(t,e){BEM.DOM.decl({block:"popup2",modName:"target",modVal:"position"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.position&&this.setPosition(this.params.position.left,this.params.position.top)}},visible:{yes:function(){this.__base.apply(this,arguments)}}},setPosition:function(t,e){return this._position={left:t,top:e},this._setVisible(),this.redraw()},_onWinScrollAndResize:$.noop,_calcTargetDimensions:function(){var t=this._position;return{left:t.left,top:t.top,width:0,height:0}},getDefaultParams:function(){return $.extend(this.__base(),{mainOffset:0,viewportOffset:0})}})},561:function(t,e){BEM.DOM.decl({block:"tumbler"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._inputValues=this.elemParams(this.elem("input"))._values,this._labelsLength=this.elem("label").length,this._buttonWidth=this.elem("button").width(),this._maxLeft=this.elem("box").width()-this._buttonWidth}},checked:function(t,e){var i=this._inputValues[e?1:0],n=2===this._labelsLength?this.elem("text","side",e?"right":"left")[0].id:this.elem("text").length?this.elem("text")[0].id:"";this.elem("input").attr("aria-labelledby",n).val(i).prop("checked",e),this.elem("button").attr("aria-pressed",Boolean(e)),this.trigger("change",{checked:Boolean(e),value:this.val()})},disabled:function(t,e){this.__base.apply(this,arguments),this.findBlockOn("button","button2").setMod("disabled",e),this.elem("input").prop("disabled",Boolean(e))}},val:function(t){return void 0===t?this.elem("input").val():-1===this._inputValues.indexOf(t)||this.val()===t?this:this._toggle()},_toggle:function(){return this.toggleMod("checked","yes",!this.elem("input").prop("checked")),this},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onStickerClick:function(){this._toggle(),this.findBlockOn(this.elem("button"),"button2").setMod("focused","yes")},_onLabelClick:function(t){this._shouldChange(t)&&(this._toggle(),this.findBlockOn(this.elem("button"),"button2").setMod("focused","yes"))},_onButtonClick:function(){this._toggle()},_onButtonFocus:function(){this.setMod(this.elem("button"),"focused","yes"),this.setMod("focused","yes")},_onButtonBlur:function(){this.delMod(this.elem("button"),"focused"),this.delMod("focused")},_shouldChange:function(t){var e="left"===this.getMod(t.data.domElem,"side");if(2===this._labelsLength){var i=!e&&this.elem("input").prop("checked");if(e&&!this.elem("input").prop("checked")||i)return!1}return!0}},{live:function(){return this.liveInitOnBlockInsideEvent("focus","button2",(function(){this.hasMod("disabled")||this._onButtonFocus()})).liveInitOnBlockInsideEvent("blur","button2",(function(){this.hasMod("disabled")||this._onButtonBlur()})).liveInitOnBlockInsideEvent("click","button2",(function(t){this.hasMod("disabled")||this._onButtonClick()})).liveBindTo("pointerpress",(function(t){this.hasMod("disabled")||this._onPointerpress(t)})).liveBindTo("sticker","pointerclick",(function(t){this.hasMod("disabled")||this._onStickerClick()})).liveBindTo("label","pointerclick",(function(t){this.hasMod("disabled")||this._onLabelClick(t)})).liveBindTo("button","keydown",(function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||BEM.blocks.keycodes.is(t.keyCode,"SPACE","LEFT","UP","RIGHT","DOWN")&&t.preventDefault()})).liveBindTo("button","keyup",(function(t){var e=BEM.blocks.keycodes,i=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||(e.is(i,"LEFT","UP")?this.delMod("checked"):e.is(i,"RIGHT","DOWN")&&this.setMod("checked","yes"))})),this.__base()}})},562:function(t,e){BEM.DOM.decl("tumbler",{_onPointerenter:function(t){this.hasMod(this.elem("button"),"hovered")||this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_onButtonPointerenter:function(t){this.hasMod("view","classic")&&this.delMod("hovered").setMod(this.elem("button"),"hovered","yes")},_onButtonPointerleave:function(t){this.hasMod("view","classic")&&this.delMod(this.elem("button"),"hovered").setMod("hovered","yes")}},{live:function(){return this.liveBindTo("box","pointerover pointerout",(function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))})).liveBindTo("button","pointerover pointerout",(function(t){this.hasMod("disabled")||this.elem("button")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onButtonPointerenter(t):this._onButtonPointerleave(t))})),this.__base()}})},567:function(t,e){BEM.DOM.decl({block:"menu",modName:"type",modVal:"check"},{getVal:function(){return this.getItems("checked","yes").map((function(t){return this.elemParams(t).val}),this)},setVal:function(t){return Array.isArray(t)||(t=[t]),this.getItems().forEach((function(e){-1!==t.indexOf(this.elemParams(e).val)?this.setMod(e,"checked","yes"):this.delMod(e,"checked")}),this),this._onChange(),this},_onItemClick:function(t,e,i){this.__base.apply(this,arguments),this.toggleMod(t,"checked","yes"),this._onChange()},_onChange:function(){var t=this._val,e=this.getVal();return t.length===e.length&&e.every((function(e){return-1!==t.indexOf(e)}))||(this._val=e,this.trigger("change",{prevVal:t,currVal:e})),this}})},57:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},570:function(t,e){BEM.DOM.decl({block:"menu",modName:"type",modVal:"radiocheck"},{getVal:function(){var t=this.getItems("checked","yes")[0];return t&&this.elemParams(t).val},setVal:function(t){return this.getItems().forEach((function(e){this.elemParams(e).val===t?this.setMod(e,"checked","yes"):this.delMod(e,"checked")}),this),this._onChange(),this},_onItemClick:function(t,e,i){this.__base.apply(this,arguments);var n=this.elem("item","checked","yes");n.is(t)||this.delMod(n,"checked"),this.toggleMod(t,"checked","yes"),this._onChange()}})},58:function(t,e,i){var n=i(169),o=i(1115),s=i(1116),r=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":r&&r in Object(t)?o(t):s(t)}},580:function(t,e){BEM.DOM.decl("mi-sticky",{placeHolder:null,currentStyleAttr:null,lastScroll:0,winHeight:0,elemHeight:0,onSetMod:{js:function(){var t,e,i=this;this.userOffsetTop=this.params.offset&&this.params.offset.top?parseInt(this.params.offset.top,10):0,this.offset=this.domElem.offset(),this.position=void 0!==this.params.position?this.params.position:"auto",this.winHeight=BEM.DOM.win.height(),this.elemHeight=this.domElem.outerHeight(!0),"manual"!==this.params.position&&(setTimeout((function(){i._checkScroll()}),0),t=this.params.throttleTimeout?$.throttle(this._checkScroll,this.params.throttleTimeout):this._checkScroll,this.bindToDoc("scroll.sticky",t)),e=this.params.throttleTimeout?$.throttle(this._checkResize,this.params.throttleTimeout):this._checkResize,this.bindToWin("resize.sticky",e)},undocked:{yes:function(){var t=this.params.preventCollapse||this.params.placeholder,e=this.params.offset||{},i={top:e.top?parseInt(e.top,10):0,right:void 0!==e.right?parseInt(e.right,10):"auto",bottom:void 0!==e.bottom?parseInt(e.bottom,10):"auto",left:void 0!==e.left?parseInt(e.left,10):"auto"};"auto"===i.bottom&&this.hasMod("full-height")&&(i.bottom=""),"auto"===i.right&&"auto"===i.left&&(i.left=this.domElem.offset().left),this.currentStyleAttr=this.domElem.attr("style"),this.domElem.css({position:"",top:i.top,right:i.right,bottom:i.bottom,left:i.left}),t&&(this.placeHolder=this._getPlaceholder(),this.domElem.after(this.placeHolder)),this._checkHeight(),this.trigger("undocked")},"":function(){this.placeHolder&&(this.placeHolder.remove(),this.placeHolder=null),this.domElem.attr("style",this.currentStyleAttr),this.trigger("docked")}},biggerThanWindow:{yes:function(){},"":function(){var t=this.params.offset||{};this.domElem.css({top:t.top?parseInt(t.top,10):0,bottom:void 0!==t.bottom?parseInt(t.bottom,10):"auto"})}}},destruct:function(){this.placeHolder&&(this.placeHolder.remove(),this.placeHolder=null),this.__base.apply(this,arguments)},_getPlaceholder:function(){var t=this.params.placeholder||{};return t.offset=t.offset||{},$(BEMHTML.apply({block:"mi-sticky",elem:"placeholder"})).css({position:this.__self._getProperty("position",t,this.domElem),top:this.__self._getProperty("top",t.offset,this.domElem),right:this.__self._getProperty("right",t.offset,this.domElem),bottom:this.__self._getProperty("bottom",t.offset,this.domElem),left:this.__self._getProperty("left",t.offset,this.domElem),visibility:this.__self._getProperty("visibility",t,this.domElem),float:this.__self._getProperty("float",t,this.domElem),width:t.hasOwnProperty("width")?t.width:this.domElem.outerWidth(!0),height:t.hasOwnProperty("height")?t.height:this.domElem.outerHeight(!0)})},_checkScroll:function(){var t,e=BEM.DOM.win.scrollTop(),i=this.lastScroll-e,n="auto"===this.position?this.offset.top:parseInt(this.position,10);this.lastScroll=e,e>n-this.userOffsetTop?(this.setMod("undocked","yes"),this.hasMod("biggerThanWindow","yes")&&(t=this.winHeight-this.elemHeight,i>0||t>0?this.domElem.css({top:"auto",bottom:0}):this.domElem.css({top:0,bottom:"auto"}))):this.delMod("undocked")},_checkResize:function(){this.winHeight=BEM.DOM.win.height(),this.elemHeight=this.domElem.outerHeight(),this.placeHolder&&this.placeHolder.css({width:this.domElem.outerWidth(),height:this.elemHeight}),this.hasMod("undocked","yes")&&this._checkHeight(),this._checkScroll()},_checkHeight:function(){if(this.hasMod("full-height"))this.delMod("biggerThanWindow");else{var t=this.elemHeight+this.userOffsetTop>this.winHeight;this.setMod("biggerThanWindow",t?"yes":"")}}},{_getProperty:function(t,e,i){return e.hasOwnProperty(t)?e[t]:i.css(t)}})},589:function(t,e){!function(t,e,i){var n=t.INTERNAL,o=n.ELEM_DELIM,s={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},r=n.buildClass,a=n.buildClasses,l={};function c(t,e,i){(t[e]||(t[e]=[])).unshift(i)}function u(t,e){return e.modName?function(i){(i._curBlock.mods||{})[e.modName]===e.modVal&&t(i)}:t}function h(t,i){var n,o=e.isArray(i);return e.isArray(t)?o?n=t.concat(i):(n=t).push(i):o?(n=i).unshift(t):n=[t,i],n}var d={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},f=/["&<>]/g;t.HTML={decl:function(t,i){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var n=l[t.block]||(l[t.block]={});i.onBlock&&c(n,"_block",u(i.onBlock,t)),i.onElem&&(e.isFunction(i.onElem)?c(n,"_elem",u(i.onElem,t)):e.each(i.onElem,(function(e,i){c(n,"_elem"+("*"===e?"":o+e),u(i,t))})))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=void 0},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){return void 0===t?this._params:(this._params=t,this)},param:function(t,i,n,o){var s=this._params;return void 0===i?s[t]:(n||!(t in s)?s[t]=i:o&&(s[t]=e.extend(i,s[t])),this)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,i){if(void 0===e)return(this._params.attrs||{})[t];var n=this._params.attrs;return n?(i||!(t in n))&&(n[t]=e):(this._params.attrs={})[t]=e,this},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,i){if(void 0===e)return(this._params.mods||{})[t];var n=this._params.mods;return n?(i||!(t in n))&&(n[t]=e):(this._params.mods={})[t]=e,this},mix:function(t,e){var i=this._params;return void 0===t?i.mix:(i.mix=e||!("mix"in i)?t:i.mix.concat(t),this)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this._params;return t.content=e.content,e.content=t,this},beforeContent:function(t){var e=this._params;return e.content=h(t,e.content),this},afterContent:function(t){var e=this._params;return e.content=h(e.content,t),this},wrap:function(t){var e=this._params;return t.block||(t._curBlock=this._curBlock),t.content=e._wrapper?e._wrapper:e,e._wrapper=t,this},tParam:function(t,e){var i=this._tParams||(this._tParams={});if(void 0===e)return i[t];var n=this._tParamsChanges||(this._tParamsChanges={});return t in n||(n[t]=i[t]),i[t]=e,this},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this._buffer,i=this._params,n=typeof i;if("string"===n||"number"===n)t.push(i);else if(e.isArray(i))for(var o,s,r=0,a=i.length;r<a;)this._params=o=i[r++],"string"===(s=typeof o)||"number"===s?t.push(o):o&&(o._pos=r,o._siblingsCount=a,this._buildByDecl());else i&&(this._params._pos=this._params._siblingsCount=1,this._buildByDecl())},_build:function(){var t,i=this._buffer,n=this._params,o=n.tag||"div",l=n.block||n.elem,c=l&&(n.block||this._curBlock.block),u=!1;n.js&&((t={})[r(c,n.elem)]=!0===n.js?{}:n.js,u=!n.elem),i.push("<",o),(l||n.cls)&&(i.push(' class="'),l&&(a(c,n.elem,n.mods,i),n.mix&&e.each(n.mix,(function(e,n){n&&(i.push(" "),a(n.block,n.elem,n.mods,i),n.js&&((t||(t={}))[r(n.block,n.elem)]=!0===n.js?{}:n.js,u||(u=!n.elem)))}))),n.cls&&i.push(l?" ":"",n.cls),u&&i.push(" i-bem"),i.push('"')),t&&i.push(' onclick="return ',JSON.stringify(t).replace(f,(function(t){return d[t]})),'"'),n.attrs&&e.each(n.attrs,(function(t,e){null!=e&&!1!==e&&i.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')})),s[o]?i.push("/>"):(i.push(">"),void 0!==n.content&&(this._params=n.content,this._buildAll()),i.push("</",o,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this._curBlock,i=this._params;if(i._curBlock&&(this._curBlock=i._curBlock),i.block&&(this._curBlock=i),!i._wrapper){if(i.block||i.elem){var n,s=l[this._curBlock.block];if(s)if(i.elem?(n=s["_elem"+o+i.elem],s._elem&&(n=n?n.concat(s._elem):s._elem)):n=s._block,n)for(var r,a=0;(r=n[a++])&&(r(this),!i._isStopped););}if(i._wrapper)return i._curBlock=this._curBlock,this._params=i._wrapper,this._buildAll()}var c=this._tParamsChanges;if(this._tParamsChanges=null,this._build(),this._curBlock=t,c){var u=this._tParams;e.each(c,(function(t,e){void 0===e?delete u[t]:u[t]=e}))}}})}}(BEM,jQuery)},59:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},590:function(t,e){var i,n,o,s,r;i=0,n=!1,o=0,s=BEM.channel("sys"),r=window.setTimeout,BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",(function(){o=0,n&&(n=!1,s.trigger("wakeup"))})),this._tick()},_tick:function t(){s.trigger("tick",{counter:i++}),!n&&(o+=50)>3e3&&(n=!0,s.trigger("idle")),r(t,50)}}).start()},618:function(t,e){!function(t){var e=["down-right","down","down-left","up","up-right","up-left","right-down","right","right-up","left-down","left","left-up"];BEM.DOM.decl("b-popupa",{onSetMod:{js:{inited:function(){this._owner=null,this._isShowed=!1,this._direction=this.getMod("direction")||"down",this._lastDirection=null,this._hasTail=Boolean(this.elem("tail").length),this._hasTail||Object.keys(this.params).forEach((function(t){0===t.indexOf("tail")&&(this.params[t]=0)}),this)}}},show:function(t){return this._isShowed&&this._owner===t||(this._owner=t,this._getUnder().show({left:-1e4,top:-1e4}),this.pos(),this._getUnder().setMod("animate","yes")),this},hide:function(){return this._isShowed&&this._getUnder().hide(),this},toggle:function(t){return this.isShowed()?this.hide():this.show(t)},_pos:function(){var t=this._calcParams(this._owner);return this._hasTail&&this.elem("tail").css(t.tailOffsets),this.setMod("direction",t.direction)._getUnder().show(t.offsets),this},pos:function(){return this._isShowed?this._pos():this},isShowed:function(){return this._isShowed},setDirection:function(t){this._direction!==t&&(this._direction=t,this.isShowed()&&this.pos())},setContent:function(t,e,i){return BEM.DOM.update(this.elem("content"),t,e,i),this.isShowed()?this.pos():this},_isOwnerNode:function(){return Boolean(this._owner&&this._owner.jquery)},_calcDimensions:function(){var t=this._getUnder().domElem,e=this._getUnder()._getUnder(),i=this.__self.win,n=this._owner,o=this._isOwnerNode(),s=o?n.offset():n,r=o?n.outerWidth():0,a=o?n.outerHeight():0,l=i.scrollLeft(),c=i.scrollTop(),u=this.__self.getWindowSize(),h=parseInt(this.elem("content").css("border-top-width"),10);return{ownerWidth:r,ownerHeight:a,ownerLeft:s.left,ownerTop:s.top,ownerRight:s.left+r,ownerBottom:s.top+a,ownerHorizMiddle:s.left+r/2,ownerVertMiddle:s.top+a/2,posWidth:t.outerWidth(),posHeight:t.outerHeight(),underWidth:e.outerWidth(),underHeight:e.outerHeight(),borderWidth:isNaN(h)?0:h,windowLeft:l,windowRight:l+u.width,windowTop:c,windowBottom:c+u.height}},_calcParams:function(){var e=this._calcDimensions();if(this.hasMod("adjustable","no"))return this.calcDirectionParams(this._direction,e);var i={},n=this.params.directions,o=t.inArray(this._direction,n);o>-1||(o=0);var s,r,a=o;do{if(!(r=i[s=n[o]]=this.calcDirectionParams(s,e)).factor)return this._lastDirection=s,r;++o===n.length&&(o=0)}while(o!==a);return i[this._lastDirection||n[0]]},calcDirectionParams:function(t,e){var i=this.params,n={top:0,left:0},o={marginLeft:0,marginTop:0},s=t.split("-")[0],r=this._hasTail&&e.ownerWidth<i.tailWidthVertical?(i.tailWidthVertical-e.ownerWidth)/2:0,a=this._hasTail&&e.ownerHeight<i.tailHeightHorizontal?(i.tailHeightHorizontal-e.ownerHeight)/2:0;switch(t){case"up":case"down":n.left=e.ownerHorizMiddle-e.posWidth/2,n.top="down"===t?e.ownerBottom+i.tailHeightVertical:e.ownerTop-e.posHeight-i.tailHeightVertical,o.marginLeft=e.posWidth/2-i.tailWidthVertical/2,o.marginTop="down"===t?0-i.tailHeightVertical:0;break;case"up-left":case"up-right":case"down-left":case"down-right":n.left="down-right"===t||"up-right"===t?e.ownerLeft-r:e.ownerRight-e.posWidth+r,n.top="down"===s?e.ownerBottom+i.tailHeightVertical:e.ownerTop-e.posHeight-i.tailHeightVertical,o.marginLeft=e.ownerWidth>e.posWidth?e.posWidth/2-i.tailWidthVertical/2:e.ownerHorizMiddle-n.left-i.tailWidthVertical/2,o.marginTop="down"===s?e.borderWidth-i.tailHeightVertical:0-e.borderWidth;break;case"left-down":case"right-down":n.left="left-down"===t?e.ownerLeft-e.posWidth-i.tailWidthHorizontal:e.ownerRight+i.tailWidthHorizontal,n.top=e.ownerTop-a,o.marginLeft="left-down"===t?0-e.borderWidth:e.borderWidth-i.tailWidthHorizontal,o.marginTop=e.ownerHeight<e.posHeight?e.ownerVertMiddle-n.top-i.tailHeightHorizontal/2:e.posHeight/2-i.tailHeightHorizontal/2;break;case"left":case"right":n.left="left"===t?e.ownerLeft-e.posWidth-i.tailWidthHorizontal:e.ownerRight+i.tailWidthHorizontal,n.top=e.ownerVertMiddle-e.posHeight/2,o.marginLeft="left"===t?0-e.borderWidth:e.borderWidth-i.tailWidthHorizontal,o.marginTop=e.posHeight/2-i.tailHeightHorizontal/2;break;case"left-up":case"right-up":n.left="left-up"===t?e.ownerLeft-e.posWidth-i.tailWidthHorizontal:e.ownerRight+i.tailWidthHorizontal,n.top=e.ownerBottom-e.posHeight+a,o.marginLeft="left"===s?0-e.borderWidth:e.borderWidth-i.tailWidthHorizontal,o.marginTop=e.ownerHeight>e.posHeight?e.posHeight/2-i.tailHeightHorizontal/2:e.ownerVertMiddle-n.top-i.tailHeightHorizontal/2}return{direction:s,factor:this.calcInWindowFactor(n,e),offsets:n,tailOffsets:o}},calcInWindowFactor:function(t,e){var i=0;return e.windowTop>t.top&&(i+=e.windowTop-t.top),t.top+e.underHeight>e.windowBottom&&(i+=t.top+e.underHeight-e.windowBottom),e.windowLeft>t.left&&(i+=e.windowLeft-t.left),t.left+e.underWidth>e.windowRight&&(i+=t.left+e.underWidth-e.windowRight),i},getDefaultParams:function(){return{tailOffset:19,tailWidthHorizontal:9,tailWidthVertical:19,tailHeightHorizontal:19,tailHeightVertical:10,shadowSize:7,directions:e}},destruct:function(){var t=this._under;t?this._destructing||(this._destructing=!0,this.hide(),BEM.DOM.destruct(!1,t.domElem),this.__base(!0)):this.__base.apply(this,arguments)},_getUnder:function(){if(!this._under){var e=t(BEM.HTML.build({block:"i-popup",zIndex:this.params.zIndex,mods:{autoclosable:this.getMod("autoclosable")||"yes",fixed:this.hasMod("direction","fixed")&&"yes"},underMods:this.params.underMods,underMix:[{block:"b-popupa",elem:"under"}]}));(this._under=this.findBlockOn(e,"i-popup")).on({show:this._onUnderShowed,hide:this._onUnderHidden,"outside-click":this._onUnderOutsideClicked},this).elem("content").append(this.domElem)}return this._under},_onUnderShowed:function(){this._isShowed=!0,this.bindToWin("resize",this.pos)._isOwnerNode()&&this.bindToDomElem(this._owner.parents().add(this.__self.win),"scroll",this.pos),this.trigger("show")},_onUnderHidden:function(){this._isShowed=!1,this.unbindFromWin("resize")._isOwnerNode()&&this.unbindFromDomElem(this._owner.parents().add(this.__self.win),"scroll"),this.trigger("hide")},_onUnderOutsideClicked:function(){this.trigger.apply(this,arguments)}},{live:function(){this.liveBindTo("close","pointerclick",(function(){this.hide()}))}}),BEM.HTML.decl("b-popupa",{onBlock:function(e){var i=!1;t.each(e.param("content"),(function(t,e){return!(i="close"===e.elem)})),e.mods({theme:"ffffff",direction:"down","has-close":i&&"yes"}).js(!0).afterContent({elem:"shadow"})},onElem:{content:function(t){t.wrap({elem:"wrap-cell",tag:"td"}).wrap({tag:"tr"}).wrap({elem:"wrap",tag:"table"})},close:function(t){t.tag("i")},shadow:function(t){t.tag("i")},tail:function(t){t.tag("i").wrapContent({elem:"tail-i",tag:"i"})}}})}(jQuery)},619:function(t,e){!function(t){var e,i=[],n=BEM.blocks["i-ua"],o=n.ie<9,s=n.ie>=9,r=window.ActiveXObject,a=Object(navigator.mimeTypes),l=function(){if(r)try{return Boolean(new r("ShockwaveFlash.ShockwaveFlash"))}catch(t){return!1}return Boolean(Object(a["application/x-shockwave-flash"]).enabledPlugin)}();function c(){return i.length?i.shift():e?e.clone():e=t(l?"<iframe"+(o?' frameborder="0"':"")+">":"<div>")}BEM.DOM.decl("i-popup",{onSetMod:{js:{inited:function(){s&&(this.domElem[0].onresize=function(){this.className+=""})}},visibility:{visible:function(){var t=this._getUnder(),e=t.parent();this.hasMod(t,"type","paranja")?e.is("body")||t.appendTo("body"):e[0]!==this.domElem[0]&&t.prependTo(this.domElem),this._inBody=this._inBody||Boolean(this.domElem.appendTo("body")),this.trigger("show")},"":function(){var t=this._getUnder();this.hasMod(t,"type","paranja")&&t.remove(),this._putUnder(),this.trigger("hide")}}},_getUnder:function(){return this._under||(this._under=c().attr("class",this._underClass||(this._underClass=this.findElem("under").remove().attr("class"))))},_putUnder:function(){var t;t=this._under,i.push(t),delete this._under},show:function(t){return t&&this.domElem.css(t),this.setMod("visibility","visible")},hide:function(){return this.delMod("animate").delMod("visibility")}},{live:!0})}(jQuery),BEM.HTML.decl("i-popup",{onBlock:function(t){t.mod("autoclosable","yes").js(!0).wrapContent({elem:"content"}).afterContent({elem:"under",mods:t.param("underMods"),mix:t.param("underMix")}).param("zIndex")&&t.attr("style","z-index:"+(32700+t.param("zIndex")))}})},620:function(t,e){BEM.DOM.decl({block:"b-link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled","yes")||this.afterCurrentEvent((function(){this.domElem&&this.trigger("click")}))}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",(function(t){this._onClick(t)})),this.__base()}})},642:function(t,e){BEM.DOM.decl("tabs-panes",{onElemSetMod:{pane:{active:{yes:function(t,e,i){var n=this.findPane("active","yes");n.attr("aria-expanded",!1),t.attr("aria-expanded",!0),this.delMod(n,"active")}}}},_onControlChange:function(t,e){-1!==e.currentIndex?this.setMod(this.findPane().eq(e.currentIndex),"active","yes"):this.delMod(this.findPane().eq(e.prevIndex),"active")},findPane:function(t,e){return this.domElem.children(this.buildSelector("pane",t,e))}},{getSupportedControls:function(){return["tabs"]},live:function(){this.getSupportedControls().forEach((function(t){BEM.blocks[t]&&this.liveInitOnBlockEvent("change",t,(function(t,e){this._onControlChange(t,e)}))}),this)}})},643:function(t,e){BEM.DOM.decl("tabs-menu",{onSetMod:{js:{inited:function(){this._linksCache=[],this._isSwitching=!1}}},onElemSetMod:{tab:{active:{yes:function(t){if(this.hasMod(t,"outer"))return!1;var e=this.getActive();this._isSwitching=!0,this.delMod(e,"active"),this._isSwitching=!1,this.trigger("change",{current:t,prev:e,currentIndex:this.indexOfTab(t),prevIndex:this.indexOfTab(e)})},"":function(t){this._isSwitching||this.trigger("change",{current:$(),prev:t,currentIndex:-1,prevIndex:this.indexOfTab(t)})}},disabled:function(t,e,i){var n=this._getLink(t).setMod("disabled",i);this.hasMod(t,"interactive","yes")&&(n.domElem.removeAttr("tabindex"),i?t.attr("aria-disabled",!0):t.removeAttr("aria-disabled"))}}},getActive:function(){return this.findElem("tab","active","yes")},getTab:function(t){return this.elem("tab","interactive","yes").eq(t)},indexOfTab:function(t){return $.inArray(t.get(0),this.elem("tab","interactive","yes"))},_getTabByElem:function(t){return t.closest(this.buildSelector("tab"))},_getLink:function(t){var e=$.inArray(t.get(0),this.elem("tab"));return this._linksCache[e]||(this._linksCache[e]=this.findBlockInside(t,"link"))},_activateRelative:function(t){var e=this.elem("tab","interactive","yes").not(this.findElem("tab","disabled","yes")),i=$.inArray(this.getActive().get(0),e)+t;i<0||i>e.length||this.setMod(e.eq(i),"active","yes")},_onTabClick:function(t){this.setMod(this._getTabByElem($(t.target)),"active","yes")},_onTabKeyDown:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=BEM.blocks.keycodes;e.is(t.keyCode,"RIGHT","DOWN")?(t.preventDefault(),this._activateRelative(1)):e.is(t.keyCode,"LEFT","UP")&&(t.preventDefault(),this._activateRelative(-1))}}},{live:function(){this.liveBindTo("tab","pointerclick",(function(t){this.hasMod($(t.data.domElem),"disabled")||this._onTabClick(t)})).liveBindTo("tab","keydown",(function(t){this._onTabKeyDown(t)}))}})},644:function(t,e){BEM.DOM.decl("tabs-menu",{onElemSetMod:{tab:{active:{yes:function(t){var e=this.getActive();if(!1===this.__base.apply(this,arguments))return!1;t.attr("tabindex",0),t.focus(),e.removeAttr("tabindex")}},disabled:function(t,e,i){this.__base.apply(this,arguments),i&&this.hasMod(t,"active")?t.attr("tabindex",0):t.removeAttr("tabindex")}}},_onTabEnter:function(t,e){this.setMod(t,"hovered","yes")},_onTabLeave:function(t,e){this.delMod(t,"hovered")}},{live:function(){return this.liveBindTo("tab","pointerover pointerout",(function(t){var e=t.data.domElem;this.hasMod(e,"disabled")||e[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onTabEnter(e,t):this._onTabLeave(e,t))})),this.__base()}})},653:function(t,e){BEM.DOM.decl("i-ua",{},{placeholder:"placeholder"in document.createElement("input")})},663:function(t,e){BEM.DOM.decl({block:"m-suggest",modName:"type",modVal:"b2b"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._requestSettings={type:this.__self.REQUEST_TYPE,url:this.params.url,dataType:this.__self.REQUEST_DATA_TYPE,timeout:this.__self.REQUEST_TIMEOUT,xhrFields:{withCredentials:!0},crossDomain:!0}}},_prepareRequestData:function(t){return $.extend({},this._requestSettings,{data:$.extend({text:t,layers:this.params.layers||"people",version:1},this.params.addRequestParams)})},_isNotEmptyResult:function(t){return t.some((function(t){return t.result.length}))},_getItemsHTML:function(t){return BEMHTML.apply(t.map((function(t){return Boolean(t.result.length)&&{block:"m-suggest-group",mods:{"is-b2b":"yes"},groupLabel:"b2b-"+t.layer,content:t.result.map((function(e){return e.href=e.url,delete e.url,this._getItemBEMJSON("b2b-"+t.layer,e)}),this)}}),this))},_getItemBEMJSON:function(t,e){return{block:"m-suggest-item",mods:{type:t,size:this.getMod("size"),link:this.hasMod("multicomplete","yes")?"":"yes",labels:this.params.inHeader||this.params.inSearchHeader?"yes":"","in-search-header":this.params.inSearchHeader&&"yes"},href:e.url,data:e,inputData:{text:this._getInputValue4Request(),offset:this._input.findElem("box").offset(),width:this._input.domElem.outerWidth()},inSearchHeader:this.params.inSearchHeader}},_selectItem:function(){this.__base.apply(this,arguments),this.hasMod("multicomplete","yes")?this._multicompleteItem.apply(this,arguments):this._suggestItem.apply(this,arguments)},_suggestItem:function(t,e){this.__base.apply(this,arguments),e&&BEM.DOM.win[0].open(t.params.href,this.params.target||"_self")},_multicompleteItem:function(t,e){this.val(t,!0),this.__base.apply(this,arguments),this._items[this._curItemIndex]&&this._items[this._curItemIndex].delMod("hovered"),this._curItemIndex=-1,this._popup.hide()}})},673:function(t,e){BEM.DOM.decl("popup",{getDefaultParams:function(){return{zIndexGroupLevel:0,directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:{left:15,right:15,top:15,bottom:15}},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._destructor=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,i=this._repackDirParams(t.directions),n=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(n);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map((function(t){var e=o.directions[t],n=i.directions[t];return n||(n=i.directions[e.to]),this._directions[t]=this._mergeParams(n,e,{tail:this._tailParamsHook}),t}),this),this._zIndex=null,this._zIndexGroupLevel=null}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){if(this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e,e.length){var i="_"+this.__self.getName()+"-destructor";this._destructor=e.addClass("i-bem "+i).bem(i)}var n=this._findParent(e);n&&this.setParent(n)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(t){if(this._isHiding)return this;if(this._isShown){var e=$.Event("before-hide");if(this.trigger(e,t),e.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach((function(t){t.hide&&t.hide(),t.delMod("visible")})),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var i=this;return this.beforeHide((function(){i.domElem&&i.delMod("visibility")})),this}}return this.delMod("visibility")},toggle:function(t,e){return this._isShown&&!this._isHiding?this.hide(e):this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setScope:function(t){return this._scope=t,this._inContainer=!1,this},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild&&t.addChild(this),this},addChild:function(t){for(var e=this._childs,i=e.length,n=0;n<i;n++)if(e[n]._uniqId===t._uniqId)return;t.on("hide",(function(){this.removeChild(t)}),this),t.on("beforeClose",(function(){this.afterCurrentEvent((function(){this.removeChild(t)}))}),this),e.push(t)},_getParentPopup:function(){return this._parent},removeChild:function(t){for(var e=this._childs,i=e.length,n=0;n<i;n++)if(e[n]._uniqId===t._uniqId)return void e.splice(n,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this._isShown||this._bindCompatibility(),this.bindToDoc("keydown",(function(t){t.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})})),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent((function(){this.domElem&&this._enableAutoclosable()})),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_bindCompatibility:function(){this._captureZIndex(),this.__self._visiblePopupsStack.unshift(this),this.trigger("beforeOpen")},_unbindCompatibility:function(){this.trigger("beforeClose");var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this._releaseZIndex()},_onHidden:function(){this._isShown&&this._unbindCompatibility(),this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0!==this._firstFocusable.length?this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown):this._skipReturnFocus=!0},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){this._lastFocused.is(this._scope)&&!this._lastFocused.is(t.target)||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){(this._parent||{})._skipReturnFocus||this._skipReturnFocus||this._lastFocused.focus()},_mergeParams:function(t,e,i){var n={},o=Object.prototype.hasOwnProperty;return i||(i={}),t&&"object"==typeof t&&Object.keys(t).forEach((function(e){n[e]=t[e]})),Object.keys(e).forEach((function(s){var r=o.call(i,s)?i[s].call(this,t[s],e[s]):e[s];!r||"object"!=typeof r||Array.isArray(r)?n[s]=r:t[s]?n[s]=this._mergeParams(t[s],r,i):n[s]=r}),this),n},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],i=e,n=t.length,o=[],s=0;s<n;s++)for(var r=t[s],a=r.length,l=0;l<a;l++)for(var c=e[s],u=c.length,h=0;h<u;h++)for(var d=i[s],f=d.length,p=0;p<f;p++)o.push({direction:r[l],axis:c[h],tail:{axis:d[p]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e,i={};return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),e=t.map((function(t){if("string"==typeof t){var e=t.split("-");t={to:e[0],tail:{}},e[1]&&(t.axis=e[1]),e[2]&&(t.tail.axis=e[2])}var n=t.to;return i[n]||(i[n]=t),t.axis&&(n+="-"+t.axis),t.key=n,i[n]=t,n}),this),{directions:i,keys:e}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,i=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;t<i;t++){var n=e[t],o=this._directions[n];this._resetPos(n)._pushPos(n,this._calcPos(o))._pushPos(n,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(n)._pushTailPos(n,this._calcTailPos(o))._pushTailPos(n,this._calcTailOffset(o))._pushPos(n,this._calcOffsetByTail(o)),this._pushPos(n,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[n],this.size=this.getPlacingSize(),100===s))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),i=this.getOwnerSize(),n=this.getPlacingSize(),o=t.axis,s=this.params.position||{},r={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":r={top:a.call(s,"top")?s.top:e.top+i.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"top":r={top:a.call(s,"top")?s.top:e.top-n.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"left":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left-n.width};break;case"right":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left+i.width}}return r},_calcTop:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=n.top:"middle"===t?e+=n.top+o.height/2-i.height/2:"bottom"===t&&(e+=n.top+o.height-i.height),e},_calcLeft:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=n.left:"center"===t?e+=n.left+o.width/2-i.width/2:"right"===t&&(e+=n.left+o.width-i.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,i=this._cache.offset||(this._cache.offset={}),n=t.key,o=t.offset;if(i[n])return i[n];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(n){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return i[n]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,i){!1!==i&&("string"==typeof e?this._sum(t[e]||(t[e]={}),i):(i=e,Object.keys(t).forEach((function(e){this._sum(t[e],i)}),this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach((function(i){t[i]=(t[i]||0)+e[i]}))},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,i,n=this._viewport,o=this._getSizeOf(n),s=this.getPopupSize(),r=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},l=this.hasMod("position","fixed")?{top:0,left:0}:{top:n.scrollTop(),left:n.scrollLeft()},c=r.top+a.top-l.top,u=r.left+a.left-l.left,h=u+s.width-o.width,d=c+s.height-o.height,f={height:s.height,width:s.width},p=100;return d>0&&(f.height-=d),c<0&&(f.height+=c),u<0&&(f.width+=u),h>0&&(f.width-=h),f.height<0||f.width<0?p=0:(i=Math.abs(f.height*f.width),(e=s.height*s.width)!==i&&(p=i/e*100)),p},_findParent:function(t){var e=t.closest(".popup, .popup2");return this.findBlockOn(e,"popup")||this.findBlockOn(e,"popup2")},destruct:function(){return this._childs.forEach((function(t){t.domElem&&BEM.DOM.destruct(t.domElem)})),this.setMod("fade-out","no"),this.hide(),this._isShown&&this._unbindCompatibility(),this.__base.apply(this,arguments)},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),this._destructor?this._destructor.findBlocksOutside("z-index-group").reduce((function(t,e){return t+Number(e.getMod("level"))}),t):t},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,i=t[e],n=this._zIndex;return i||(i=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t.splice(t.indexOf(this._zIndex),1),this},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",(function(){this.hide({source:"close-click"})}))},_visiblePopupsStack:(BEM.blocks.popup2||{})._visiblePopupsStack||[],_visiblePopupsZIndexes:(BEM.blocks.popup2||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3,_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var i="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(i=""),t.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter((function(){var t=$(this),i=!0;return!(parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility"))&&($(this).parentsUntil(e).each((function(){if("none"===$(this).css("display"))return i=!1})),i)}))},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null})},674:function(t,e){BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var t=this.__self._underPool.pop();return t&&(this._underInPool=!1),this._under=t,t||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem).css("z-index",this._zIndex):t.prependTo(this.domElem)},_detachUnder:function(){var t=this._under;t.removeAttr("style"),this.__self._underPool.push(t.detach()),this._under=null,this._underInPool=!0},destruct:function(){var t=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),t}},{_underPool:[]})},684:function(t,e){BEM.DOM.decl({block:"m-suggest",modName:"type",modVal:"intranet-suggest"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._requestSettings={type:this.__self.REQUEST_TYPE,url:"//search.yandex-team.ru/suggest",dataType:this.__self.REQUEST_DATA_TYPE,timeout:this.__self.REQUEST_TIMEOUT}}},_prepareRequestData:function(t){var e=[];return this.params.types.forEach((function(i){"object"==typeof i?(!i.symbolsToSend||i.symbolsToSend<=t.length)&&e.push(i.name.replace("staff","people")):e.push(i.replace("staff","people"))})),$.extend({},this._requestSettings,{data:$.extend({text:t,s:e},this.params.addRequestParams)})},_isNotEmptyResult:function(t){var e=!1;return Object.keys(t).forEach((function(i){t[i].length&&(e=!0)})),e},_getItemsHTML:function(t){var e,i=[],n=this,o=this.params.target,s="";return Object.keys(t).forEach((function(r,a){var l=r.replace("people","staff");(e=n._getItemTypeFromOptions(l)).maxCount&&(t[r]=t[r].slice(0,e.maxCount)),s=n.params.inHeader||n.params.inSearchHeader||"staff"===l?"":l,i.push({block:"m-suggest-group",groupLabel:s,content:$.map(t[r],(function(t){return o&&(t.target=o),t.valueField=e.valueField||null,n._getItemBEMJSON(l,t,!0)}))})})),BEMHTML.apply(i)},_selectItem:function(t,e){this.__base.apply(this,arguments),e&&BEM.DOM.win[0].open(t.params.href,this.params.target||"_self")}})},686:function(t,e){BEM.DOM.decl("messenger",{onSetMod:{js:{inited:function(){this.afterCurrentEvent(function(){window.Ya&&window.Ya.ChatWidget?this._initWidget():this._loadWidget()}.bind(this))}}},_loadWidget:function(){window.yandexChatWidgetCallback=function(){this._initWidget(),delete window.yandexChatWidgetCallback}.bind(this);var t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.async=!0,e.src=this.params.scriptUrl,t.parentNode.insertBefore(e,t)},_initWidget:function(){try{this._widget=new window.Ya.ChatWidget({badgeType:"dot",buttonIcon:"black",iframeUrl:this.params.iframeUrl,iframeUrlParams:this.params.iframeUrlParams,mountNode:this.domElem[0],theme:"legacy",unreadUrl:this.params.unreadUrl})}catch(t){}},destruct:function(){this._widget&&(this._widget.destroy(),delete this._widget)},getDefaultParams:function(){return{scriptUrl:"https://chat.s3.yandex.net/widget_ya.js"}}})},691:function(t,e){BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",(function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))})),this.__base.apply(this,arguments)}})},693:function(t,e){BEM.DOM.decl({block:"m-notification",modName:"autoclosable",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindToDoc("pointerclick",this._onDocClick)}},destruct:function(t){this.unbindFromDoc("pointerclick",this._onDocClick),this.__base(t)},_onDocClick:function(t){this.domElem.find(t.target).length||this._remove()}})},694:function(t,e){BEM.DOM.decl({block:"m-notification",modName:"clear",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.unbindFrom("click"),this.findBlockInside({block:"awesome-icon",modName:"type",modVal:"clear"}).bindTo("click",this._onRemoveIconClick.bind(this))}},_onRemoveIconClick:function(){this._remove()}})},696:function(t,e){BEM.DOM.decl({block:"modal",modName:"theme",modVal:"normal"},{onSetMod:{visible:{yes:function(){this.setMod("has-animation","yes").__base.apply(this,arguments)}}}})},697:function(t,e){BEM.DOM.decl({block:"m-popup",baseBlock:"popup2"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._popup=this.findBlockOn("popup2")}}}})},698:function(t,e){BEM.DOM.decl({block:"select2",modName:"popup",modVal:"yes"},{onSetMod:{focused:{yes:function(){this.button.setMod("focused","yes")},"":function(){this.delMod("opened"),this.button.delMod("focused")}},opened:{"*":function(t,e){if(this.hasMod("disabled"))return!1;var i=Boolean(e);this.button.domElem.attr("aria-expanded",i),this.arrow.toggleMod("direction","top","bottom",i),this.popup.toggleMod("visible","yes",i),i&&this.popup.redraw()},yes:function(){this._setMinWidth(),this._setMaxHeight()}},disabled:{yes:function(){this.popup.delMod("visible")}}},getDefaultParams:function(){return{optionsMaxHeight:Number.POSITIVE_INFINITY}},initSelect:function(){this.menu=this.findBlockOn("menu","menu"),this.__base.apply(this,arguments),this.popup=this.findBlockOn("popup","popup2"),this.arrow=this.findBlockOn("arrow","icon"),this.initialVal=this.getVal(),this.popup.setAnchor(this.button),this.popup.on("beforeClose",this._onPopupHide,this),this.button.on({click:this._onButtonClick,focus:this._onButtonFocus},this),this.bindTo("button","blur",this._onButtonBlur),this.menu.on({change:this._onMenuChange,click:this._onMenuItemClick,"item-hover":this._onMenuItemHover},this),this._preventBlur=null,this.bindTo("menu","pointerdown",this._onMenuPointerdown),document.documentMode&&this.bindTo("menu","focusin focusout",this._preventItemFocus),this._setMaxHeight()},getVal:function(){return this.menu.getVal()},setVal:function(t){return this.menu.setVal(t),this},reset:function(){this.menu.setVal(this.initialVal)},setContent:function(t){return this.menu.setContent(t),this._setMinWidth(),this._setMaxHeight(),this.popup.redraw(),this},destruct:function(){return document.documentMode&&this.unbindFrom("menu","focusin focusout",this._preventItemFocus),this.unbindFrom("menu","pointerup",this._preventButtonBlur),this.unbindFrom("menu","pointerdown",this._onMenuPointerdown),this.unbindFrom("button","blur",this._onButtonBlur),this.__base.apply(this,arguments)},_setMinWidth:function(){this.popup.domElem.css("min-width",this.button.domElem.outerWidth())},_setMaxHeight:function(){var t=this.popup.calcPossibleDrawingParams(),e=this.menu.domElem,i=e.outerWidth(),n=0;t.forEach((function(t){t.width>=i&&t.height>n&&(n=t.height)})),n>0&&e.css("max-height",Math.min(this.params.optionsMaxHeight,n))},_onMenuChange:function(t,e){this._changeIcon(t,e),this.control&&this.control.val(e.currVal),this.trigger("change",e)},_changeIcon:function(t,e){var i,n,o=this.menu,s=this.button,r=o.getItems("checked","yes").filter((function(t){return o.elemParams(t).val===e.currVal})).shift(),a=r&&o.findBlockInside(r,"icon"),l=s.findElem("icon","side","left");a?(l.length||(s.domElem.prepend(this._buildLeftIcon()),l=s.findElem("icon","side","left")),n=s.findBlockInside(l,"icon"),delete(i=a.getMods()).js,Object.keys(i).forEach((function(t){n.setMod(t,i[t])}))):l.length&&l.remove()},_buildLeftIcon:function(){return'<i class="icon button2__icon button2__icon_side_left" aria-hidden="true"/>'},_onMenuItemClick:function(t,e){this.delMod("opened")},_onMenuItemHover:function(t,e){var i=this.button.domElem,n=e.item;n?i.attr("aria-activedescendant",n.attr("id")):i.removeAttr("aria-activedescendant")},_onMenuPointerdown:function(t){this._preventBlur=!0},_onButtonClick:function(){this.toggleMod("opened","yes")},_onButtonKeydown:function(t){var e=BEM.blocks.keycodes;!this.hasMod("opened")&&e.is(t.keyCode,"UP","DOWN")&&(t.preventDefault(),this.setMod("opened","yes"))},_onButtonFocus:function(){this.setMod("focused","yes")},_onButtonBlur:function(){this._preventBlur?(this._preventBlur=null,this.bindTo("menu","pointerup",this._preventButtonBlur)):this.delMod("focused")},_onPopupHide:function(){this.delMod("opened")},_preventButtonBlur:function(t){this.unbindFrom("menu","pointerup",this._preventButtonBlur),this.button.domElem.focus()},_preventItemFocus:function(t){t.preventDefault(),t.stopPropagation()},_onControlChange:function(t){var e=this.control.val(),i=[].concat(e),n=this.menu,o=this.getVal();n.getItems().filter((function(t){return n.delMod(t,"checked"),i.indexOf(n.elemParams(t).val)>=0})).forEach((function(t){n.setMod(t,"checked","yes")})),this._onMenuChange(t,{prevVal:o,currVal:e})}})},699:function(t,e){BEM.DOM.decl({block:"select2",modName:"popup",modVal:"yes"},{onSetMod:{opened:{yes:function(t,e){var i=this.__base.apply(this,arguments);if(!1===i)return i;var n,o=this.menu.getItems("hovered","yes");return o.length||((n=this.menu.getItems("checked","yes")).length?this.menu.hoverText(n[0].text()):this.menu.hoverNext()),i},"":function(){return this._preventToToggleOpened=!1,this.__base.apply(this,arguments)}}},_onButtonKeydown:function(t){this.hasMod("opened","yes")?(this.menu._onKeydown(t,!0),this._keysToMenu=!0,this._preventToToggleOpened=!0):(this._keysToMenu=!1,this._preventToToggleOpened=!1,this.__base.apply(this,arguments))},_onButtonKeyup:function(t){this._keysToMenu&&(this.menu._onKeyup(t),this._keysToMenu=!1,this._preventToToggleOpened=!0)},_onButtonClick:function(){this._preventToToggleOpened?this._preventToToggleOpened=!1:this.__base.apply(this,arguments)},_onButtonKeypress:function(t){var e=BEM.blocks.keycodes;if(e.is(t.keyCode,"UP","DOWN","ENTER","SPACE")||0===t.keyCode&&t.charCode===e.SPACE)this.menu._onKeypress(t);else{var i=this.menu.getItems("hovered","yes");if(i.forEach((function(t){this.menu.delMod(t,"hovered")}),this),this.menu._onKeypress(t),this.hasMod("opened"))return;(i=this.menu.getItems("hovered","yes")).length&&this.setVal(this.menu.elemParams(i[0]).val)}}},{live:function(){return this.liveBindTo("button","keyup",(function(t){this._onButtonKeyup(t)})),this.__base()}})},700:function(t,e){BEM.DOM.decl({block:"menu",modName:"type",modVal:"radio"},{getVal:function(){var t=this.getItems("checked","yes")[0];return t&&this.elemParams(t).val},setVal:function(t){return this.getItems().forEach((function(e){this.elemParams(e).val===t?this.setMod(e,"checked","yes"):this.delMod(e,"checked")}),this),this._onChange(),this},_onItemClick:function(t,e,i){this.__base.apply(this,arguments),this.hasMod(t,"checked","yes")||(this.delMod(this.elem("item","checked","yes"),"checked"),this.setMod(t,"checked","yes"),this._onChange())}})},701:function(t,e){BEM.DOM.decl({block:"select2",modName:"text",modVal:"vary"},{_onMenuChange:function(t,e){this.__base.apply(this,arguments),this.button.setText(this.getText()),this._setMinWidth()},_onControlChange:function(){this.__base.apply(this,arguments),this.button.setText(this.getText())},getText:function(){var t=this.params.checkedTexts;return this.menu?this.getTextFromMenu(t):this.control?this.getOptions().filter((function(t){return t.selected})).map((function(e){var i=e.text,n=e.value;return t[n]||i})).join(", ")||this.params.text:void 0},getTextFromMenu:function(t){var e=this.menu;return e.getItems("checked","yes").map((function(i){var n=e.elemParams(i),o=n.text||i.text(),s=n.val||i.val();return t[s]||o})).join(", ")||this.params.text}})},704:function(t,e){BEM.DOM.decl({block:"dropdown2",modName:"switcher",modVal:"button2"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._tickerIcon=this.findBlockOn("arrow","icon")}},opened:function(t,e){this.__base.apply(this,arguments),this.hasMod("has-tick")&&this._tickerIcon.toggleMod("direction","top","bottom",Boolean(e))}}},{live:function(){return this.liveInitOnBlockInsideEvent("click","button2",(function(t){this._onSwitcherClick(t)})),this.__base()}})},706:function(t,e){BEM.DOM.decl({name:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){var t=this;t.params.foot&&(t.foot=t.params.foot),t._preventRequest=!0,t.__base.apply(t,arguments),t._userVal=t.val();var e=t._focused;e&&t.delMod("focused"),t.elem("control").attr("autocomplete","off"),t._preventRequest=!1,e&&t.setMod("focused","yes"),t._items=[],t._curItemIndex=-1,t._doRequest=$.debounce(t._doRequest,t.params.debounceDelay),this.bindToWin("resize",$.throttle(this._setWidth,60))}},focused:{yes:function(){this.__base();var t=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",t)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().delMod("visible")}}},destruct:function(){var t=this._popup;return t&&t.domElem&&(this._popup=null,BEM.DOM.destruct(t.domElem)),this.__base.apply(this,arguments)},getDataprovider:function(){var t=this.params.dataprovider.url;return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",$.extend(this.params.dataprovider,{url:t,callbackCtx:this})))},_onChange:function(){return this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(t){if(BEM.blocks.keycodes.is(t.which,"UP","DOWN")&&!t.shiftKey){t.preventDefault();var e=this._items.length,i=!1;if(e){var n=t.which-39,o=this._curItemIndex,s=0;do{i=(0===o&&-1===n||o+n>=e)&&this._onLeaveItem(this._items[o],!0),(o+=n)<0?o=e-1:o>=e&&(o=0)}while(!i&&!1===this._onEnterItem(this._items[o],!0)&&++s<e)}}},_onKeyPress:function(t){t.which===BEM.blocks.keycodes.ENTER&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(t.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var t=this;if(!t._popup){var e=t.__self.getName(),i=[{elem:"items",tag:"ul",mix:[{block:e,elem:"popup-items"}]}],n=Array.isArray(t.params.popupMixs)?t.params.popupMixs:[],o=t.params.popupDirections||["bottom-left"];t._hasPopupFade()&&i.push({block:e,elem:"fade"}),n.push({block:e,elem:"popup",elemMods:t.params.popupMods,js:{uniqId:t._uniqId}}),t._popup=$(BEMHTML.apply({block:"popup2",mods:{autoclosable:"yes",target:"anchor",theme:"normal"},mainOffset:0,directions:o,mix:n,js:t.params.popupParams,content:{elem:"content",content:i}})).bem("popup2").on({beforeOpen:function(){t.bindTo("keypress",t._onKeyPress).bindTo("keydown",t._onKeyDown)},beforeClose:function(){t.unbindFrom("keypress keydown")._curItemIndex=-1}}),$.each({pointerover:t._onEnterItem,pointerout:t._onLeaveItem,pointerdown:t._onSelectItem,pointerup:t._onItemMouseUp},(function(e,i){BEM.blocks["b-autocomplete-item"].on(t._popup.domElem,e,(function(e){i.call(t,e.block)}))})),BEM.DOM.init(t._popup.domElem),t._popup.setAnchor(t.elem("box"))}return t._popup},getPopup:function(){return this._getPopup()},_hasPopupFade:function(){return"yes"===(this.params.popupMods||{}).fade},_onEnterItem:function(t,e){if(t.hasMod("enterable","no"))return!1;var i=this._items,n=this._curItemIndex;n>-1&&i[n].delMod("hovered"),(n=this._getItemIndex(t))>-1&&i[n].setMod("hovered","yes"),this._curItemIndex=n,this._isCurItemEnteredByKeyboard=Boolean(e),e&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(!1!==t.enter()?t.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(t,e){var i=this._curItemIndex;return i>-1&&i===this._getItemIndex(t)&&(this._items[i].delMod("hovered"),this._curItemIndex=-1),e&&this.val(this._userVal),!0},_onSelectItem:function(t,e){var i=t.select(e||!1),n="object"==typeof i?i.needUpdate:!1!==i,o="object"==typeof i&&i.needEvent;this._preventRequest=!0,n&&(this._userVal=t.val(),this.val(this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex})),e?this.del("_preventRequest")._getPopup().delMod("visible"):(this._returnFocus=!0,this.bindToDoc("pointerrelease",this._onDocMouseUp),n||(this._preventHide=!0),this.afterCurrentEvent((function(){this.domElem&&this.setMod("focused","yes").del("_preventRequest","_preventHide")}))),(n||o)&&this.trigger("select",{item:t,byKeyboard:e})},_onItemMouseUp:function(){this._closePopupByMouseUp()},_onDocMouseUp:function(){this._closePopupByMouseUp()},_closePopupByMouseUp:function(){this.unbindFromDoc("pointerrelease").del("_returnFocus")._getPopup().delMod("visible")},_getItemIndex:function(t){return $.inArray(t,this._items)},_doRequest:function(){var t=this;t._userVal=t.val(),t.trigger("data-requested").getDataprovider().get(t.val(),(function(e){t.trigger("data-received",e);var i=t._getPopup(),n=e.items||e;t.foot&&n.length&&-1===$.inArray(t.foot,n)&&n.push(t.foot),n.length?(t._curItemIndex=-1,BEM.DOM.update(i.elem("items"),t._buildItemsHtml(n),(function(){i.hasMod("visible")||(i.setMod("visible","yes"),t._setWidth()),t._items=i.findBlocksInside("b-autocomplete-item"),t.trigger("update-items")}))):i.delMod("visible")}))},_setWidth:function(){this._hasPopupFade()&&this._getPopup().domElem.css("width",this.elem("box").outerWidth())},_buildItemsHtml:function(t){var e=this;return BEMHTML.apply($.map(t,(function(t,i){var n,o={block:"b-autocomplete-item",data:t,mods:{type:$.isArray(t)?t[0]:"text"},suggestVersion:e.params.dataprovider.version||4};return $.isArray(t)&&$.isPlainObject(n=t.concat().pop())&&$.extend(o,n),o})))},setFoot:function(t){return this.foot=t,this.foot},getDefaultParams:function(){return $.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}})},708:function(t,e){BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,i,n){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:n.data?$.extend({},n.data,t):t},a=o._wrapCallback((function(i,s,r){o._onSuccess(o._buildCacheKey(t,n),t,i[0],n),o._allowCallback(s,r)&&e.apply(n.callbackCtx,i)})),l=o._wrapCallback((function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-- >0?setTimeout((function(){o._do.apply(o,s)}),n.retryInterval):i&&i.apply(n.callbackCtx,t))}));$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields","cache"].concat(n.paramsToSettings||[]),(function(t,e){r[e]=n[e]})),$.ajax(r).done(a).fail(l)}},_wrapCallback:function(t){var e=this._requestNumber,i=this._number;return function(n){null!==n&&t(arguments,e,i)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})},709:function(t,e){BEM.DOM.decl({block:"b-autocomplete-item",modName:"nav",modVal:"yes"},{enter:function(){return!1},select:function(t){if(t){var e=window.open();e.opener=null,e.location=this.val()}return{needEvent:!0}}},{getUrl:function(t){return(t.match(/^\w[\w-]*:\/\//g)?"":"http://")+t}})},713:function(t,e){BEM.DOM.decl({block:"select2",modName:"type",modVal:"check"},{_onMenuChange:function(){this.__base.apply(this,arguments),this.button.toggleMod("checked","yes","",this.menu.getItems("checked","yes").length>0)},_onMenuItemClick:function(t,e){"keyboard"===e.source&&(this._preventToToggleOpened=!0)}})},714:function(t,e){BEM.DOM.decl({block:"select2",modName:"type",modVal:"check"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}}}})},716:function(t,e){BEM.DOM.decl({block:"select2",modName:"type",modVal:"radiocheck"},{_onMenuChange:function(){this.__base.apply(this,arguments),this.button.toggleMod("checked","yes","",this.menu.getItems("checked","yes").length>0)}})},722:function(t,e){var i,n,o,s;o=function(){for(var t,e=0;t=i[e++];)t.val(t.elem("input").val())},s=function(t){try{return t.activeElement}catch(t){}},BEM.DOM.decl("b-form-input",{onSetMod:{js:{inited:function(){var t=this,e=t.elem("input"),r=s(t.__self.doc[0]),a=t.params.autoFocus&&!(r&&$(r).is("input, textarea"));t._val=e.val(),t._input0=e[0],(r===t._input0||a)&&(t._autoFocus=!0,t.setMod("focused","yes")._focused=!0,delete t._autoFocus),n||(i=[],n=t.channel("sys").on({tick:o,idle:function(){n.un("tick",o)},wakeup:function(){n.on("tick",o)}})),t._instanceIndex=i.push(t.bindTo(e,{focus:t._onFocus,blur:t._onBlur}))-1,t.params.shortcut&&t.bindToDoc("keydown",(function(e){e.ctrlKey&&e.keyCode===BEM.blocks.keycodes.UP&&!$(e.target).is("input, textarea")&&t.setMod("focused","yes")}))}},disabled:function(t,e){this.elem("input").prop("disabled",e)},focused:function(t,e){if(this.hasMod("disabled"))return!1;e?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent((function(){this.domElem&&this.trigger(e?"focus":"blur")}))}},onElemSetMod:{message:{visibility:function(t,e,i){var n=this,o=n.getMod(t,"type");if(o){var s=!0;i||n.elem("message","type",o).each((function(){this!==t[0]&&n.hasMod($(this),"visibility","visible")&&(s=!1)})),s&&n.toggleMod("message-"+o,"yes","","visible"===i)}}}},val:function(t,e){if(void 0===t)return this._val;if(this._val!==t){var i=this.elem("input");i.val()!==t&&i.val(t),this._val=t,this.trigger("change",e)}return this},getSelectionEnd:function(){var t=this.elem("input")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},name:function(t){return this.elem("input").attr("name")},_onFocus:function(){return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(t){var e=this;if(s(document)!==e._input0)return e._preventBlur?(setTimeout((function(){e._focus()}),0),e):(e._focused=!1,e.delMod("focused"))},_focus:function(){var t=this.elem("input")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}else t.focus()},_blur:function(){this.elem("input").blur()},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),i.splice(this._instanceIndex,1);for(var t,e=this._instanceIndex;t=i[e++];)--t._instanceIndex}}),BEM.HTML.decl("b-form-input",{onBlock:function(t){var e=t.param("id")||t.generateId();t.tag("span").tParam("id",e).tParam("has-clear",Boolean(t.mod("has-clear"))).tParam("type",t.mod("type")||"input").afterContent({elem:"box",tag:"span",content:{elem:"input",attrs:{value:t.param("value"),name:t.param("name"),id:e}}}).js(!0)},onElem:{input:function(t){t.tag(t.tParam("type"))},label:function(t){t.tag("label").attr("for",t.tParam("id"))},box:function(t){t.tParam("has-clear")&&t.afterContent({elem:"clear",tag:"span"})},hint:function(t){t.tag("label").attr("for",t.tParam("id"))}}})},729:function(t,e){BEM.DOM.decl({block:"i-popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.afterCurrentEvent((function(){if(this.domElem&&this.hasMod("visibility","visible")){var t=this._under;this.bindToDoc("pointerclick",(function(t){this.containsDomElem($(t.target))||this._onOutClick(t)})).bindToDoc("keydown",(function(t){t.keyCode===BEM.blocks.keycodes.ESC&&this.hide()})),t&&t.is("iframe")&&this.hasMod(t,"type","paranja")&&this.bindToDomElem($([t[0].contentWindow,t[0].contentWindow.document]),"pointerclick",this._onOutClick)}})),this.__base.apply(this,arguments)},"":function(){return this.unbindFromDoc("pointerclick keydown").__base.apply(this,arguments)}}},_onOutClick:function(t){var e=$.Event("outside-click");this.trigger(e,{domEvent:t}),e.isDefaultPrevented()||this.hide()}})},732:function(t,e){BEM.DOM.decl({block:"select2",modName:"width",modVal:"fixed"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._setMinWidth()}}},_setMinWidth:function(){this.button.domElem.css("width",this.button.domElem.outerWidth())}})},733:function(t,e){BEM.DOM.decl("tabs",{getCount:function(){return this.elem("tab").length},activate:function(t){return this},deactivate:function(){return this},getActive:function(){return-1},disable:function(t){return this},enable:function(t){return this},isDisabled:function(t){},_onControlChange:function(t,e){}},{getSupportedControls:function(){return["tabs-menu","radio-button"]},live:function(){this.getSupportedControls().forEach((function(t){BEM.blocks[t]&&this.liveInitOnBlockInsideEvent("change",t,(function(t,e){this._onControlChange(t,e)}))}),this)}})},735:function(t,e){BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()}},focused:function(){if(!1===this.__base.apply(this,arguments))return!1;this._hasHint&&this._updateHint()}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}})},740:function(t,e){BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}})},741:function(t,e){BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"pointerclick",(function(t){t.stopPropagation(),this.hide({source:"outside-click"})})),this.bindTo(t,"pointerdown",(function(){this._skipReturnFocus=!0}))),this.bindTo("pointerdown pointerclick",(function(){var t=this;do{t._preventHideByClick=!0,t=t._getParentPopup()}while(t)})),this.bindToDoc("pointerclick",(function(t){if(this._preventHideByClick)this._preventHideByClick=null;else if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide({source:"outside-click"})}})),this.bindToDoc("pointerdown",(function(){this._skipReturnFocus=!0}))}},_disableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.unbindFrom(t,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var i,n=this._childs.length;for(i=0;i<n;i++)if(this.containsDomElem.call({domElem:this._childs[i].domElem},t))return!0;return!1}})},742:function(t,e){BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent((function(){this.domElem&&this.bindToWin("resize",this.onResize)})),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}})},743:function(t,e){BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,i=this.getCurrPos(),n={opacity:1,top:i.top,left:i.left},o={opacity:0,top:i.top,left:i.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(n,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var i=e.to,n=this.getCurrPos(),o=this.domElem,s={top:n.top,left:n.left,opacity:0};return"bottom"===i?s.top+=10:"top"===i?s.top-=10:"left"===i?s.left-=10:"right"===i&&(s.left+=10),o.stop(!0,!0).animate(s,this.params.duration,(function(){t(),o.css("opacity","")}))}})},744:function(t,e){BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._firstFocusable.focus())}})},745:function(t,e){BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}})},746:function(t,e){BEM.DOM.decl({block:"popup",modName:"wrapped",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.__base(),this._wrap()},"":function(){this.__base(),this._unwrap()}},wrapped:{"":function(){this._unwrap()}}},_wrap:function(){this._wrapper||(this._wrapper=this.elem("wrapper").detach()),this._wrapper&&this.domElem.wrap(this._wrapper)},_unwrap:function(){this._wrapper&&this.domElem.unwrap()},_captureZIndex:function(){var t=this._zIndex,e=this.__base.apply(this,arguments);return this._zIndex!==t&&this.elem("wrapper").css("z-index",this._zIndex),e},destruct:function(){this._unwrap(),this.__base()}})},747:function(t,e){var i;i={},BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent((function(){this.domElem&&this.hasMod("visibility","visible")?i[this.params.uniqId]=!0:delete i[this.params.uniqId],this._manageScopeOverflow()})),this.__base()}},destruct:function(){var t=this.params.uniqId;i[t]&&(delete i[t],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var t=Object.keys(i).length;0===t?this._enableScroll():1===t&&this._disableScroll()}})},749:function(t,e){BEM.DOM.decl("m-head-user",{onSetMod:{js:function(){var t=this.elem("logout");t.attr("href",t.attr("href").replace("{yandexuid}",$.cookie("yandexuid")))}},_onClick:function(){this._popup||(this._popup=this.findBlockOn("popup","popup2"),this._popup.setAnchor(this.domElem)),this._popup.setMod("visible","yes")}},{live:function(){this.liveBindTo("click",(function(){this._onClick()}))}})},750:function(t,e){BEM.DOM.decl({block:"messenger",modName:"internal",modVal:"yes"},{getDefaultParams:function(){return $.extend(this.__base(),{scriptUrl:"https://chat.s3.yandex.net/widget_ya_internal.js"})}})},752:function(t,e){BEM.decl("mi-notifier",{onSetMod:{js:function(){BEM.blocks["m-notification"].on("remove",this._onNotificationRemoved,this),this._initParams()}},destruct:function(t){BEM.blocks["m-notification"].un("remove",this._onNotificationRemoved,this),this.__base(t)},log:function(t,e,i){var n=$.extend({},this._notificationsOptions[t],i);this._push({block:"m-notification",js:{delay:n.delay},mods:{theme:t,icons:n.icons?"yes":"",autoclosable:n.autoclosable?"yes":"",clear:n.clear?"yes":""},content:e})},info:function(t,e){this.log("info",t,e)},error:function(t,e){this.log("error",t,e)},success:function(t,e){this.log("success",t,e)},warn:function(t,e){this.log("warning",t,e)},_initParams:function(){this._notificationsOptions=this._getOptions(),this.setMod("position",this.params.position||"right-top"),this._margin=this.params.margin||10,this._offset=$.extend({left:0,top:0},this.params.offset)},_push:function(t){var e,i,n=5;for(e=BEM.DOM.append(BEM.DOM.scope,BEMHTML.apply(t)),i=$(e).bem("m-notification"),this._notifications||(this._notifications=[]),this._notifications.unshift(i),this._notifications.forEach((function(t,e){this._setNotificationPosition(t,n),n+=t.domElem?t.domElem.outerHeight()+(e===this._notifications.length-1?0:this._margin):0}),this),i.setMod("activated","yes");BEM.DOM.doc.outerHeight()<n&&this._notifications.length;)n-=this._removeNotification(this._notifications.length-1)},_removeNotification:function(t){var e=this._notifications[t].domElem,i=e?e.outerHeight()+10:0;return e&&BEM.DOM.destruct(this._notifications[t].domElem),this._notifications.splice(t,1),t!==this._notifications.length&&this._recalculatePositions(),i},_onNotificationRemoved:function(t){this._notifications.forEach((function(e,i){e===t.block&&this._removeNotification(i)}),this)},_getOptions:function(){var t=$.extend({info:{},success:{},error:{},warning:{}},this.__self._defaultOptions,this.params.options);return Object.keys(t).forEach((function(e){t[e]=$.extend({icons:this.params.icons,autoclosable:this.params.autoclosable,clear:this.params.clear,delay:this.params.delay},t[e])}),this),t}},{_VERT_OFFSET:5,_defaultOptions:{success:{delay:2e3}}})},754:function(t,e){BEM.decl({block:"mi-notifier",modName:"position",modVal:"left-top"},{_setNotificationPosition:function(t,e){t.domElem.css("left",this.__self._VERT_OFFSET+this._offset.left+"px"),t.domElem.css("top",e+this._offset.top+"px")},_recalculatePositions:function(){var t=this.__self._VERT_OFFSET;this._notifications.forEach((function(e){e.domElem.css("top",t+this._offset.top+"px"),t+=e.domElem.outerHeight()+this._margin}),this)}})},755:function(t,e){BEM.decl({block:"mi-notifier",modName:"position",modVal:"right-bottom"},{_setNotificationPosition:function(t,e){t.domElem.css("right",this.__self._VERT_OFFSET-this._offset.left+"px"),t.domElem.css("bottom",e-this._offset.top+"px")},_recalculatePositions:function(){var t=this.__self._VERT_OFFSET;this._notifications.forEach((function(e){e.domElem.css("bottom",t-this._offset.top+"px"),t+=e.domElem.outerHeight()+this._margin}),this)}})},756:function(t,e){BEM.decl({block:"mi-notifier",modName:"position",modVal:"right-top"},{_setNotificationPosition:function(t,e){t.domElem.css("right",this.__self._VERT_OFFSET-this._offset.left+"px"),t.domElem.css("top",e+this._offset.top+"px")},_recalculatePositions:function(){var t=this.__self._VERT_OFFSET;this._notifications.forEach((function(e){e.domElem.css("top",t+this._offset.top+"px"),t+=e.domElem.outerHeight()+this._margin}),this)}})},757:function(t,e){BEM.DOM.decl("m-editor",{_historyStack:[],init:function(t){var e=this,i=this.params.buttons||[];this._pageEditorButtons=t||this.findBlockOn("m-editor-buttons"),this._textarea=this.elem("textarea","editor","wiki").bem("textarea"),this._hotKeysScope=this._uniqId,this._prevHotKeysScope=null,this._textarea.elem("control").on("focus",(function(){e._prevHotKeysScope=window.keymaster.getScope(),window.keymaster.setScope(e._hotKeysScope)})),this._textarea.elem("control").on("blur",(function(){window.keymaster.setScope(e._prevHotKeysScope),e._prevHotKeysScope=null})),this.params.drafts?this._initDrafts(i):(this._drawAndRecalculateButtons(i),this._initControl()),this._subscribeChange()},setDataToEditor:function(t){this.setText(t)},setText:function(t){this._unsubscribeChange(),this._textarea.elem("control").val(t),this._textarea.onFirst("change",(function(){this.afterCurrentEvent(this._subscribeChange)}),this)},getEditorData:function(){return this.val()},val:function(t){var e=this._textarea.elem("control").val();return void 0===t?e:(this._textarea.elem("control").val(t),e!==t&&this.trigger("change",t),t)},restore:function(){this._draftToRestore&&(this.setText(this._draftToRestore),this._draftToRestore=null)},revert:function(){this._updateDraftTimeoutId&&(clearTimeout(this._updateDraftTimeoutId),this._updateDraftTimeoutId=null),this._drafts&&this._draftsStorage.store(this._drafts)},_initDrafts:function(t){this._draftsCountToSave=this.params.drafts.maxCount||10,this._draftsStorage=BEM.create("mi-editor-drafts",this.params.drafts),this._draftsStorage.get().then(function(e){this._drafts=e,e.length&&t.push([{type:"drafts",data:{drafts:e}}]),this._drawAndRecalculateButtons(t),this._initControl(),this._processDrafts(e)}.bind(this))},_processDrafts:function(t){this._drafts=t,t.length&&t[0]&&!1===t[0].isSaved&&(this._draftToRestore=t[0].val,delete t[0].isSaved,this.afterCurrentEvent((function(){this.trigger("draft-restore",t[0])})))},_subscribeChange:function(){this._textarea.on("change",this._onTextChange,this)},_unsubscribeChange:function(){this._textarea.un("change",this._onTextChange,this)},_onTextChange:function(){this._drafts&&this._processChangeForDrafts(),this.afterCurrentEvent((function(){this.trigger("change",this.val())}))},_processChangeForDrafts:function(){this._updateDraftTimeoutId?(clearTimeout(this._updateDraftTimeoutId),this._updateDraftTimeoutId=null):this._updateCurrentDraft(),this._updateDraftTimeoutId=setTimeout(this._updateCurrentDraft.bind(this),1e3)},_updateCurrentDraft:function(){var t={val:this.val(),date:Date.now(),isSaved:!1};""===t.val?this._draftsStorage.store(this._drafts):this._draftsStorage.store([t].concat(this._drafts.slice(0,this._draftsCountToSave-1))),this.afterCurrentEvent((function(){this.trigger("draft-store")}))},_drawButtons:function(t){this._buttonsContent=[],this.params.virtualButtons&&t.push(this.params.virtualButtons.map((function(t){return{type:t,virtual:!0}}))),t.forEach((function(t){this._buttonsContent.push(this._getButtonsBemjson(t))}),this),this._buttonsContent.length&&BEM.DOM.update(this._pageEditorButtons.domElem,BEMHTML.apply(this._buttonsContent))},_drawAndRecalculateButtons:function(t){var e,i,n,o,s=[],r=[],a=0,l=this.__self.PRIORITY_ARRAY.slice();if(this._drawButtons(t),e=this.domElem.outerWidth(),BEM.blocks["mi-helpers"].isVisible(this.domElem.get(0))&&(this._pageEditorButtons.domElem.children().each((function(t,e){var i=$(e);a+=i.outerWidth()+10,s.push(i.outerWidth())})),a>e&&l.length)){for(e-=this.__self.EDITOR_PADDING,i=a;i>e&&l.length;)n=l.shift(),(o=this._findButtonInGroups(n,t))&&(r.unshift(n),t[o.groupIndex].splice(o.buttonIndex,1),t[o.groupIndex].length||(t.splice(o.groupIndex,1),e+=10),i-=$($(this._pageEditorButtons.domElem.children()[o.groupIndex]).children()[o.buttonIndex]).outerWidth());t.length?t[t.length-1].push({type:"other",data:r}):t.push([{type:"other",data:r}]),this._drawButtons(t)}},_initControl:function(){this._textarea.elem("control").snickedWackowiki(),this._textarea.elem("control").splendid({buttons:this._pageEditorButtons.findBlocksInside("button2"),editor:this,uploadReqParams:this.params.uploadParams&&this.params.uploadParams.reqParams,uploadURLPath:this.params.uploadParams&&this.params.uploadParams.URLPath,forms:this.params.forms,hotKeysScope:this._hotKeysScope})},_findButtonInGroups:function(t,e){var i=!1;return e.forEach((function(e,n){e.forEach((function(e,o){t!==e||e.virtual||(i={groupIndex:n,buttonIndex:o})}))})),i},_getButtonsBemjson:function(t){var e=[];return t.forEach((function(i,n,o){var s,r,a;a="object"==typeof i,r=!1,s="brick-brick",o.length>1?0===n?s="round-brick":n===t.length-1&&(s="brick-round"):s="round-round",a&&i.virtual&&(r=!0),e.push({block:"m-editor-button",mods:{type:a?i.type:i,virtual:r&&"yes"},pin:s,data:i.data,helpURL:this.params.helpURL||this.__self.WIKI_MARKING_TUTORIAL_URL})}),this),{block:"m-editor-buttons",elem:"group",content:e}}},{EDITOR_PADDING:60,PRIORITY_ARRAY:["separator","color","underline","indent","outdent","ul","ol","table","quote","h3","h2","italic","strikethrough","bold","spell","picture","user","file","video"],WIKI_MARKING_TUTORIAL_URL:"https://wiki.yandex-team.ru/wiki/vodstvo/syntax/"})},759:function(t,e){BEM.DOM.decl({block:" m-popup",modName:"drafts",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._cancelButton=this.findBlockInside({block:"button2",modName:"action",modVal:"cancel"}),this._onCancel()},visible:function(t,e){"yes"===e&&this.setMod(this.elem("buttons"),"visibility","hidden")}},_onCancel:function(){this._cancelButton.on("click",(function(){this._popup.trigger("update-text",this.findBlockInside("m-editor-popup").params.text),this._popup.delMod("visible")}),this)},onUpdateText:function(){this.delMod(this.elem("buttons"),"visibility")}})},760:function(t,e){BEM.DOM.decl({block:"m-popup",modName:"editor",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._addButton=this.findBlockInside({block:"button2",modName:"action",modVal:"add"}),this._cancelButton=this.findBlockInside({block:"button2",modName:"action",modVal:"cancel"}),this._onAdd(),this._onCancel()}},_onAdd:function(){this._addButton.on("click",(function(){if(this.hasMod("drafts","yes"))this._popup.delMod("visible");else{var t=this.findBlockInside("m-editor-popup").getText();this._popup.trigger("onadd",t)}}),this)},_onCancel:function(){this._cancelButton.on("click",(function(){this.hasMod("drafts","yes")&&this._popup.trigger("update-text",this.findBlockInside("m-editor-popup").params.text),this._popup.delMod("visible")}),this)}})},761:function(t,e){BEM.DOM.decl({block:"m-popup",modName:"form",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._addButton=this.findBlockInside({block:"button2",modName:"action",modVal:"add"}),this._cancelButton=this.findBlockInside({block:"button2",modName:"action",modVal:"cancel"}),this._onAdd(),this._onCancel()}},_onAdd:function(){this._addButton.on("click",(function(){var t;"yes"!==this.getMod("drafts")?(t=this.findBlockInside("m-editor-popup").getText(),this._popup.trigger("onadd",t)):this._popup.delMod("visible")}),this)},_onCancel:function(){this._cancelButton.on("click",(function(){"yes"===this.getMod("drafts")&&this._popup.trigger("update-text",this.findBlockInside("m-editor-popup").params.text),this._popup.delMod("visible")}),this)}})},762:function(t,e){BEM.DOM.decl({block:"m-editor-popup",modName:"type",modVal:"link"},{processParams:function(t){var e,i="";return(i=(e=$.extend({},{pathToLink:"",linkText:""},t)).pathToLink&&e.linkText?e.pathToLink+" "+e.linkText:e.pathToLink+e.linkText)&&(i="(("+i+"))"),i}})},763:function(t,e){BEM.DOM.decl({block:"m-editor-popup",modName:"type",modVal:"code"},{onSetMod:{js:function(){this.findBlockInside("select2").popup.bindTo("click",function(t){this.trigger("prevent-close")}.bind(this))}},processParams:function(t){var e,i="";return(e=$.extend({},{codeStyle:"",codeText:""},t)).codeStyle&&(i="("+e.codeStyle+")"),i="%%"+i+"\n"+e.codeText+"\n%%"}})},765:function(t,e){BEM.DOM.decl({block:"m-speller"},{onSetMod:{js:function(){this._storage=this._getLocalStorage(),this._initUserOptions(),this._bindEvents()}},destruct:function(t){delete this._cashedBlocks,this._getBlockInside("select2").un("change"),this._getBlockInside("button2","type","ignore-once").un("click"),this._getBlockInside("button2","type","replace").un("click"),this._getBlockInside("button2","type","params").un("click"),this._getBlockInside("button2","type","cancel").un("click"),this._getBlockInside("textinput","type","error").un("change"),this._getBlockInside("button2","type","user-dict").un("click"),this._getBlockInside("textarea","role","dict").un("change"),BEM.blocks.checkbox.un(this.domElem,"change",this._onCheckBoxChange,this),this.findBlocksInside("check-button").forEach((function(t){t.un("change")})),this.__base(t)},_initUserOptions:function(){this._storage["yandex.useropt"]||(this._storage["yandex.useropt"]=JSON.stringify({"ignore-uppercase":!1,"ignore-digits":!1,"ignore-urls":!1,"find-repeat":!1,lang:"ru"})),this._storage["yandex.userdic"]||(this._storage["yandex.userdic"]=""),this._optionsCodes={"ignore-uppercase":1,"ignore-digits":2,"ignore-urls":4,"find-repeat":8},this._setOptionsFromStorageToUI()},_bindEvents:function(){this._getBlockInside("select2").on("change",function(){var t=this._getUserOptions(),e=this._getBlockInside("select2").getVal();t.lang=e,this._getBlockInside("select2").findBlockInside("button2").findElem("text").text(BEM.I18N("m-speller",e)),this._setUserOption("lang",t.lang)}.bind(this)),this._getBlockInside("button2","type","ignore-once").on("click",this._goToNextError,this),this._getBlockInside("button2","type","replace").on("click",this._replace,this),this._getBlockInside("button2","type","cancel").on("click",this._cancel,this),this._getBlockInside("button2","type","params").on("click",this._toogleAdditionalOptions,this),this._getBlockInside("textinput","type","error").on("change",this._inputChanged,this),this._getBlockInside("button2","type","user-dict").on("click",this._showUserDict,this),this._getBlockInside("textarea","role","dict").on("change",this._setUserDict,this),BEM.blocks.checkbox.on(this.domElem,"change",this._onCheckBoxChange,this)},_onCheckBoxChange:function(t,e){var i=t.block.getMod("type");["ignore-uppercase","ignore-digits","ignore-urls","find-repeat"].indexOf(i)>=0&&this._setUserOption(i,e.checked)},check:function(t){t?(this._inputText=t,this._sendRequest(this._getUserOptions())):this._finish()},_sendRequest:function(t){$.post("//speller.yandex.net/services/spellservice.json/checkText",{text:this._inputText,lang:t.lang,options:this._getOptionsHash()},this._processErrors.bind(this),"json")},_processErrors:function(t){t.length?(this.delMod("finished"),this.delMod(this.elem("flex-container","hide-in-finish","yes"),"hidden"),this._offset=0,this._errorsArray=t,this._goToNextError(0)):this._finish()},_goToNextError:function(t){var e,i,n,o,s=this._storage["yandex.userdic"].split(" ");if(this._inputText)if(this._currentErrorIndex="number"==typeof t?t:void 0!==this._currentErrorIndex?this._currentErrorIndex+1:0,this._currentErrorIndex>this._errorsArray.length-1)this._finish();else if((o=this._errorsArray[this._currentErrorIndex]).needToReplace)this._replace();else if(n=this._getRemainingErrorsCount(s),this.elem("status").html($(BEMHTML.apply([{block:"m-speller",elem:"main-text",content:BEM.I18N("m-speller","complete")+", "+BEM.I18N("m-speller","recommended")+" "},{block:"m-speller",elem:"main-text",mix:{block:"m-speller",elem:"attention"},content:n+" "+this._getCorrectonForm(n)}]))),s.indexOf(o.word)>=0)this._goToNextError();else{this._getBlockInside("textinput","type","error").val(o.word);var r=o.pos;e=$(BEMHTML.apply({block:"m-speller",elem:"text",before:this._inputText.slice(r>90?r-40:0,r+this._offset),word:o.word,after:this._inputText.substr(r+this._offset+o.len,this._inputText.length)})),this._getBlockInside("island","role","input-text").domElem.html(e),i=this._getBlockInside("island","role","correction-options"),BEM.DOM.update(i.domElem,""),o.s.length?(this._getBlockInside("button2","type","replace").delMod("disabled"),o.s.forEach((function(t,e){e<=4&&BEM.DOM.append(i.domElem,BEMHTML.apply({block:"button2",mods:{size:"xs",theme:"clear",type:"check",checked:0===e?"yes":""},mix:[{block:"m-speller",elem:"check-button"}],value:t,text:t}))}))):(this._getBlockInside("button2","type","replace").setMod("disabled","yes"),BEM.DOM.append(i.domElem,BEMHTML.apply({block:"button2",mods:{size:"xs",theme:"clear",role:"not-options",type:"check"},mix:[{block:"m-speller",elem:"check-button"}],text:"( "+BEM.I18N("m-speller","options-not-found")+" )"}))),BEM.DOM.append(i.domElem,BEMHTML.apply({block:"button2",mods:{size:"xs",theme:"clear",role:"add-to-dict",type:"check"},mix:[{block:"m-speller",elem:"check-button"}],content:{elem:"text",content:{block:"m-speller",elem:"add-to-dict"}}})),this._bindEventsOnCorrectionOptions()}},_getRemainingErrorsCount:function(t){for(var e=this._errorsArray.length-this._currentErrorIndex,i=this._currentErrorIndex;i<this._errorsArray.length;i++)t.indexOf(this._errorsArray[i].word)>=0&&e--;return e},_getCorrectonForm:function(t){var e="correction",i=t%10;return 1===i?e+="1":i>1&&i<5&&(e+="2"),BEM.I18N("m-speller",e)},_bindEventsOnCorrectionOptions:function(){var t=this;this.bindTo(this.findElem("check-button"),"click",(function(e){"add-to-dict"===this.findBlockOn(e.data.domElem,{block:"button2",modName:"type",modVal:"check"}).getMod("role")?t.afterCurrentEvent(t._addToLocalDictionaty,t):this.findBlockInside({block:"island",modName:"role",modVal:"correction-options"}).findBlocksInside({block:"button2",modName:"type",modVal:"check"}).forEach((function(t){t.delMod("checked")}))}))},_getBlockInside:function(t,e,i){var n,o=t+"_"+e+"_"+i;return this._cashedBlocks||(this._cashedBlocks={}),this._cashedBlocks[o]?this._cashedBlocks[o]:(n=this.findBlockInside({block:t,modName:e,modVal:i}),this._cashedBlocks[o]=n,n)},_showUserDict:function(){this._getBlockInside("userdict").delMod("hidden"),this._getBlockInside("button2","type","user-dict").setMod("hidden","yes"),this._setDictionaryFromStorageToUI()},_hideUserDict:function(){this._getBlockInside("userdict").setMod("hidden","yes"),this._getBlockInside("button2","type","user-dict").delMod("hidden")},_setUserDict:function(){var t=this._getBlockInside("textarea","role","dict").val();this._storage["yandex.userdic"]=t.replace(new RegExp(/[\n,\r]+/g)," ").replace(new RegExp(/\s+/g)," ").trim()},_inputChanged:function(){if(this._inputText&&"yes"!==this.getMod("finished")){var t=this._errorsArray[this._currentErrorIndex];this._getBlockInside("textinput","type","error").val()!==t.word?this._getBlockInside("button2","type","replace").delMod("disabled"):this._getBlockInside("button2","type","replace").setMod("disabled",t.s.length?"":"yes")}},_setUserOption:function(t,e){var i=this._getUserOptions();i[t]!==e&&(i[t]=e,this._setUserOptions(i),this._inputText&&this._sendRequest(this._getUserOptions()))},_toogleAdditionalOptions:function(){var t=this.findElem("options"),e="yes"!==this.getMod(t,"hidden");this.setMod(t,"hidden",e?"yes":""),this._getBlockInside("button2","type","params").findElem("text").text(BEM.I18N("m-speller",e?"params":"hideparams")),e&&this._hideUserDict()},_setOptionsFromStorageToUI:function(){var t=this._getUserOptions();Object.keys(t).forEach(function(e){"lang"!==e&&this._getBlockInside("checkbox","type",e).setMod("checked",t[e]?"yes":"")}.bind(this)),this._getBlockInside("select2").setVal(t.lang),this._getBlockInside("select2").findBlockInside("button2").findElem("text").text(BEM.I18N("m-speller",t.lang))},_setDictionaryFromStorageToUI:function(){this._getBlockInside("textarea","role","dict").val(this._getLocalDictionary())},_getLocalDictionary:function(){return this._storage["yandex.userdic"]},_getUserOptions:function(){return JSON.parse(this._storage["yandex.useropt"])},_getOptionsHash:function(){var t=0,e=this._getUserOptions();return Object.keys(e).forEach(function(i){!0===e[i]&&(t+=this._optionsCodes[i])}.bind(this)),t},_setUserOptions:function(t){this._storage["yandex.useropt"]=t?JSON.stringify(t):JSON.stringify({"ignore-uppercase":!1,"ignore-digits":!1,"ignore-urls":!1,"find-repeat":!1,lang:"ru"})},_addToLocalDictionaty:function(){if(this._inputText){var t=this._errorsArray[this._currentErrorIndex].word;this._storage["yandex.userdic"]+=(this._storage["yandex.userdic"]?" ":"")+t,this._setDictionaryFromStorageToUI(),this._goToNextError()}},_getValueToReplace:function(t){var e=this._getBlockInside("textinput","type","error");return e.val()===t?this._getBlockInside("island","role","correction-options").findBlockInside({block:"button2",modName:"checked",modVal:"yes"}).getText():e.val()},_replace:function(){var t=this._errorsArray[this._currentErrorIndex],e=t.word,i=t.needToReplace||this._getValueToReplace(e);this._inputText&&(this._inputText=this._inputText.substr(0,t.pos+this._offset)+this._inputText.substr(t.pos+this._offset+t.len),this._inputText=this._inputText.slice(0,t.pos+this._offset)+i+this._inputText.slice(t.pos+this._offset),this._offset+=i.length-e.length,this.trigger("change",this._inputText),this._goToNextError())},_replaceAll:function(){var t=this._errorsArray[this._currentErrorIndex],e=this._getValueToReplace(t.word);this._inputText&&(this._errorsArray.forEach((function(i){i.word===t.word&&(i.needToReplace=e)})),this._replace())},_finish:function(){this.setMod("finished","yes"),this._clearUI(),this.elem("status").html($(BEMHTML.apply([{block:"m-speller",elem:"main-text",content:BEM.I18N("m-speller","complete")+",  "},{block:"m-speller",elem:"corrections-not-found"}]))),this.setMod(this.elem("flex-container","hide-in-finish","yes"),"hidden","yes"),"yes"===this.getMod(this.elem("options"),"hidden")&&this._toogleAdditionalOptions()},_cancel:function(){this.trigger("cancel")},_clearUI:function(){this._getBlockInside("textinput","type","error").val(""),BEM.DOM.update(this._getBlockInside("island","role","input-text").domElem,""),BEM.DOM.update(this._getBlockInside("island","role","correction-options").domElem,"")},_getLocalStorage:function(){return window.localStorage?window.localStorage:window.globalStorage[document.domain]}})},766:function(t,e){BEM.DOM.decl({block:"m-editor-popup",modName:"type",modVal:"drafts"},{onSetMod:{js:function(){this.bindTo(this.findElem("draft"),"click",function(t){this.trigger("update-text",this.params.data.drafts[t.data.domElem.data("index")].val)}.bind(this))}}})},767:function(t,e){BEM.DOM.decl({block:"m-editor-popup",modName:"type",modVal:"user"},{processParams:function(t){var e=t.text||"";return e?t.link?"(("+t.prefix+e+" "+t.link+"))":t.prefix+e:""}})},773:function(t,e){BEM.decl({name:"input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(t,e){return this.__base({part:t},(function(t){e.call(this,{items:t[1],metainfo:t[2]})}))}})},774:function(t,e){BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onSetMod:{js:{inited:function(){this.setMod("nav","yes")}}},enter:function(){return this.__base.apply(this,arguments)},select:function(){return this.__base.apply(this,arguments)}})},775:function(t,e){BEM.DOM.decl({name:"m-calendar",modName:"toggler",modVal:"button"},{onSetMod:{js:function(){this.input=this.findBlockInside({block:"button2",modName:"toggler",modVal:"datepicker"}),this.__base.apply(this,arguments),this.input.on("click",this._onTogglerClick,this),this.bindTo(this.input.domElem,"mouseout",this._onInputMouseOut)},disabled:function(t,e){this.input.setMod(t,e)}},_onInputMouseOut:function(){this._popUpOpened||(this.input._isDatePickerOpened=!1,this.input.delMod("pressed").delMod("focused"))},_onTogglerClick:function(){var t=this;if(this._preventClick)return this._preventClick=!1,!1;this.__base.apply(this,arguments),this._datePickerPopup.on("outside-click",(function(e,i){i.target===t.input.elem("input")[0]&&(t._preventClick=!0,t._hideWithFocus())})),this.bindToDoc("keydown.close",(function(e){13!==e.which&&32!==e.which||(t._preventClick=!0,t._hideWithFocus()),9!==e.which&&27!==e.which||(t._preventClick=!1,t._hideWithFocus())}))},_hideWithFocus:function(){this._datePickerPopup.delMod("visible"),this.input.setMod("focused","yes")},_onDateChange:function(t,e){var i=BEM.DOM.blocks["m-calendar"].dateFormat,n=e.date,o=e.fromArrow,s=this.input.elem("input"),r=this.input.elem("text");o||(n?n.from?(s.val(BEM.blocks["mi-helpers"].getHumanStringFromDate({date:n.from})+" — "+BEM.blocks["mi-helpers"].getHumanStringFromDate({date:n.to})),r.text(i(n.from)+" — "+i(n.to))):(s.val(n.toISOString()),r.text(i(n))):(s.val(""),r.text(this.params.defaultText))),this.__base.apply(this,arguments)},_onDatePickerPopupHide:function(){this.__base.apply(this,arguments),this.input.delMod("focused"),this.input.delMod("pressed"),this._datePickerPopup.un("outside-click"),this.unbindFromDoc("keydown.close")}})},776:function(t,e){BEM.DOM.decl({name:"b-form-input",modName:"autofocus",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)}},autofocus:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},"":function(){this.unbindFromDoc("keydown")}}},_autoFocusBind:function(t){if(!this.hasMod("focused","yes")){var e;try{e=document.activeElement.tagName.toLowerCase()}catch(t){}if(function(t){var e=t.charCode||t.keyCode||t.which||0;if(!t.ctrlKey&&!t.altKey&&!t.metaKey&&(e>=48&&e<=57||e>=96&&e<=105||e>=65&&e<=90||e>=1025&&e<=1071||0===e))return!0}(t)&&"input"!==e&&"textarea"!==e){var i=this.elem("input")[0],n=this.val();if(n.length>0&&" "!==n.substr(n.length-1,1)&&(n+=" ",this.val(n)),i.createTextRange){var o=i.createTextRange();o.collapse(!1),o.select()}else void 0!==i.selectionStart&&i.setSelectionRange(n.length,n.length);this.setMod("focused","yes")}}}})},779:function(t,e){BEM.DOM.decl({block:"tabs",modName:"control",modVal:"menu"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._tabsMenu=this.findBlockOn("control","tabs-menu")}}},activate:function(t){return this._tabsMenu.setMod(this._tabsMenu.getTab(t),"active","yes"),this},deactivate:function(){return this._tabsMenu.delMod(this._tabsMenu.getActive(),"active","yes"),this},disable:function(t){return this._tabsMenu.setMod(this._tabsMenu.getTab(t),"disabled","yes"),this},enable:function(t){return this._tabsMenu.delMod(this._tabsMenu.getTab(t),"disabled"),this},getActive:function(){return this._tabsMenu.indexOfTab(this._tabsMenu.getActive())},isDisabled:function(t){return this._tabsMenu.hasMod(this._tabsMenu.getTab(t),"disabled","yes")},_onControlChange:function(t,e){e.current.attr("aria-selected",!0),e.prev.attr("aria-selected",!1),this.trigger("change",{currentIndex:e.currentIndex,prevIndex:e.prevIndex})}})},781:function(t,e){BEM.DOM.decl({block:"popup",modName:"behaviour",modVal:"scrollable"},{getDefaultParams:function(){var t=this.__base();return t.top=20,t}})},783:function(t,e){BEM.DOM.decl({block:"m-head-action",modName:"with",modVal:"popup"},{onSetMod:{js:function(){this._listTogglerButton=this.findBlockInside({block:"button2",modName:"role",modVal:"list-toggler"}).on("click",this._onListTogglerButtonClick,this),this._popup=this._getPopup()}},_onListTogglerButtonClick:function(t){this._popup.toggleMod("visible","yes")},_onItemClick:function(){this._popup.delMod("visible")},_onPopupHide:function(){this._listTogglerButton.delMod("direction")},_onPopupShow:function(){this._listTogglerButton.setMod("direction","up")},_getPopup:function(){return this._popup||(this._popup=$(BEMHTML.apply(this._getPopupBEMJSON())).bem("popup2").on({beforeOpen:this._onPopupShow,beforeClose:this._onPopupHide},this),this.bindTo(this.findElem(this._popup.domElem,"popup-item"),"click",this._onItemClick.bind(this))),this._popup.setAnchor(this._listTogglerButton.domElem)},_getPopupBEMJSON:function(){return{block:"popup2",mods:{theme:"normal",target:"anchor",hiding:"yes",autoclosable:"yes"},mix:[{block:this.__self.getName(),elem:"action-popup"}],directions:["bottom-right"],content:{elem:"content",content:this.params.items.map((function(t){return{block:"m-head-action",mods:{with:"popup"},elem:"popup-item",elemMods:{},item:t}}),this)}}}})},784:function(t,e){BEM.DOM.decl("m-head-search",{onSetMod:{js:function(){var t=this;this.findBlockInside("m-suggest").on("select",(function(e){t.domElem.submit()}))}}},{})},786:function(t,e){BEM.DOM.decl("notifier",{onSetMod:{js:{inited:function(){this.win=window,this._popupInited=!1,this.hasMod("has-unread")&&this.setMod("animation-active","yes"),this._fetchCounter()}},"has-unread":{yes:function(){this.setMod("animation-active","yes")},"":function(){this.domElem.attr("aria-label",BEM.I18N("notifier","no-new-notifications"))}},"animation-active":{yes:function(){this._subscribeOnAnimationEnd()}},opened:{yes:function(){this.domElem.attr("aria-expanded",!0)},"":function(){this.domElem.attr("aria-expanded",!1)}}},_subscribeOnAnimationEnd:function(){var t=this.elem("clapper");t.on("animationend",function e(){this.delMod("animation-active"),t.off("animationend",e)}.bind(this))},_initPopup:function(){if(this._popupInited)return!1;this._popup=this.getPopup(),this._popup.on("beforeOpen beforeClose",function(){var t=this._popup.hasMod("visible","yes");this.toggleMod("opened","yes",!t),void 0!==this._rpcBridge&&void 0!==this._rpcBridge.contrAgent.win&&this._rpcBridge.invokeMethod("updatePopupState",!t),t?this._firstOpen=!1:(this.delMod("has-unread"),this._firstOpen=void 0===this._firstOpen||void 0),this._hasLoaded||this.getSpin().setMod("progress","yes")}.bind(this)),this._popupInited=!0},_fetchCounter:function(){var t={url:this._getCounterUrl(),dataType:"json",type:"GET",xhrFields:{credentials:"include",withCredentials:!0}};return $.ajax(t).promise().then(this._prepareCounter.bind(this),this.onFetchCounterError.bind(this))},_prepareCounter:function(t){var e={counter:0,services:[],context:{}};t&&(t.unviewed_count&&t.services&&(e.counter=this._convertToUint(t.unviewed_count),e.services=Object.keys(t.services)),t.context&&(e.context=t.context)),this.onFetchCounterSuccess(e)},onFetchCounterSuccess:function(t){t.counter&&this.onUpdateCounter(t.counter,t.services,t.context)},onFetchCounterError:function(){},_convertToUint:function(t){var e=Number(t)||0;return e>=0&&this._isInteger(e)?e:0},_isInteger:function(t){return(0^t)===t},_getHost:function(){return"https://"+(this.params.apiHost&&-1!==this.params.apiHost.indexOf("yandex-team")?"bell.yandex-team":"yandex")+this._getTld()},_getCounterUrl:function(){return this.params.counterHandle||this._getHost()+"/bell/api/v1/get-ticker"},_getIframeUrl:function(t){var e=this.params.iframeUrl||this.params.baseUrl+"/yandex-notifications/"+this.params.iframeVersion+"/iframe/index."+t+".html";return this.hasMod("no-login")&&-1===e.indexOf("no_login")&&(e=e+(-1!==e.indexOf("?")?"&":"?")+"no_login=1"),e},_getLoaderUrl:function(){return this.params.loaderUrl||this.params.baseUrl+"/iframe-loader/"+this.params.loaderVersion+"/index.min.js"},_insertLoaderScript:function(t){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],i=document.createElement("script");i.setAttribute("src",this._getLoaderUrl()),e.insertBefore(i,e.lastChild),i.onload=t},_loadIframe:function(){var t={iframeUrl:this._getIframeUrl(this.params.lang),container:this.findElem(this._popup.domElem,"content").get(0)};this._atom=new window.LegoIframeLoader(t),this._rpcBridge=this._atom.getRPCBridge(this),this._atom.on("init",function(t,e){this._onIframeLoad(e)}.bind(this)),this._atom.init()},getPopup:function(){return this._popup||this.findBlockOn("popup","popup2")},getSpin:function(){return this._spin||this.getPopup().findBlockInside("spin2")},init:function(){if(this._rpcBridge)return this;window.LegoIframeLoader?this._loadIframe():this._insertLoaderScript(this._loadIframe.bind(this))},onIconClick:function(t){this._silentLoad=!1,!this._popupInited&&this._initPopup(),this._rpcBridge||this.init(),this._popup.toggleMod("visible","yes")},onDataLoad:function(t){this.setMod(this._popup.domElem,"loaded","yes"),this.getSpin().delMod("progress"),this._hasLoaded=!0,this._popup.hasMod("visible","yes")&&!this._silentLoad&&this._rpcBridge.invokeMethod("resetUnviewed",{})},onUpdateCounter:function(t,e,i){t=!t||t<0?0:t,e=e||[],i=i||{},this._counter=t;var n=!this._firstOpen&&Boolean(t);if(this.toggleMod("has-unread","yes",n),t&&void 0===this._firstOpen){var o="-counter="+t+",-is_login="+!this.hasMod("no-login");e.length&&(o+=",-services="+e.join(".")),i.exp_boxes&&(o+=",-exp_boxes="+encodeURIComponent(i.exp_boxes)),this.count("3027.1228.487",o,null,{reqid:BEM.blocks["i-global"]&&BEM.blocks["i-global"].param("reqid")||""})}this._firstOpen&&(this._firstOpen=!1),this.elem("ticker").text(Math.min(99,t)),n&&this.domElem.attr("aria-label",BEM.I18N("notifier","new-notifications",{count:t}))},updateCounterWithParams:function(t,e){void 0!==this._rpcBridge&&void 0!==this._rpcBridge.contrAgent.win&&this._rpcBridge.invokeMethod("updateCounterWithParams",{counterParams:t,referrer:e})},_onIframeLoad:function(t){this._rpcBridge.contrAgent.win=t.iframeWin,this._rpcBridge.invokeMethod("onIframeLoad",this.getIframeParams())},getIframeParams:function(){return{source:this.params.source,serviceDatabaseId:this.params.serviceDatabaseId,services:this.params.services,domain:this.params.domain||this.params.tld,counterParams:this.params.counterParams,referrer:this.params.referrer,apiHost:this.params.apiHost,apiHost2:this.params.apiHost2,silent:this._silentLoad}},onInit:function(t){},getDefaultParams:function(){return{baseUrl:"https://gcn.yandex-team.ru",loaderVersion:"stable",iframeVersion:"stable",lang:"ru",referrer:location.href}},count:function(t,e,i,n){e=e||"",i=i||"";n=n||{};var o=["reqid","yuid","serpid","service","ui"].reduce((function(t,e){return t+(n[e]?"/"+e+"="+n[e]:"")}),""),s="//yandex"+this._getTld()+"/clck/click/pid=900/cid="+i+"/dtype=stred"+(t?"/path="+t:"")+(e?"/vars="+e:"")+o+"/cts="+(new Date).getTime()+"/*"+document.location.href;document.createElement("IMG").src=s},_getTld:function(){var t=document.location.host.match(/^.*(\..+)$/);return t?t[1]:".ru"},destruct:$.noop},{live:function(){this.liveBindTo("click",(function(t){this.onIconClick(t)}))}})},787:function(t,e){BEM.DOM.decl("notifier",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}}},_initPopup:function(){this.__base.apply(this,arguments),this._popup.attachToScope(),this._popup.setAnchor(this.elem("box"))}})},788:function(t,e){BEM.decl({block:"mi-notifier",modName:"position",modVal:"left-bottom"},{_setNotificationPosition:function(t,e){t.domElem.css("left",this.__self._VERT_OFFSET+this._offset.left+"px"),t.domElem.css("bottom",e-this._offset.top+"px")},_recalculatePositions:function(){var t=this.__self._VERT_OFFSET;this._notifications.forEach((function(e){e.domElem.css("bottom",t-this._offset.top+"px"),t+=e.domElem.outerHeight()+this._margin}),this)}})},793:function(t,e){BEM.DOM.decl("m-uploader",{onSetMod:{js:function(){this.files=this.__self.getFiles(),this.summary=this.__self.getSummary(),this.popup=this.__self.getPopup(this.params),this.box=this.popup.findBlockInside("uploader-box"),this.info=this.__self.getInfo(),this.dragFlag=!0,this._initParams(),this._bind(),this.__self.checkBind()&&(this._bindPopup(),this._infoDrag(),this._initParamsPopup())}},_initParamsPopup:function(){this.params.autoupload&&"yes"===this.params.autoupload?this.params.autoupload=!0:(this.params.autoupload=!1,this.readyForUpload=this.__self.getFilesList())},_initParams:function(){"no"===this.params.choosefile?this.params.choosefile=!1:this.params.choosefile=!0,this.params.dropzone&&"no"===this.params.dropzone?this.params.dropzone=!1:this.params.dropzone=!0},getSummary:function(){return this.summary},getFiles:function(){return Object.keys(this.files).map((function(t){return this.files[t]}),this)},sendFiles:function(){this.readyForUpload.forEach(function(t){this._send(t)}.bind(this)),this.readyForUpload=this.__self.getFilesList()},uploadsAbort:function(){Object.keys(this.files).forEach((function(t){"uploading"===this.files[t].status&&(this.files[t].req.abort(),this.files[t].status="aborted",BEM.DOM.destruct(this.files[t].node.domElem),delete this.files[t],this.trigger("uploadabort"))}),this),this.trigger("uploadsabort")},_bindRow:function(t){this.files[t].node.findElem("abort").on("click",function(e){e.stopPropagation(),this.files[t].req&&this.files[t].req.abort(),BEM.DOM.destruct(this.files[t].node.domElem),delete this.files[t],this.trigger("uploadabort",t)}.bind(this))},_infoDrag:function(){function t(t){var e=t.get(0).getBoundingClientRect(),i=document.body,n=document.documentElement,o=window.pageYOffset||n.scrollTop||i.scrollTop,s=window.pageXOffset||n.scrollLeft||i.scrollLeft,r=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,l=e.top+o-r,c=e.left+s-a;return{top:Math.round(l),left:Math.round(c)}}var e=this.info.domElem,i=this.info.findElem("box");i.on("dragstart",(function(){return!1})),i.on("mousedown",(function(n){var o=t(i),s=t(e),r=n.pageX-o.left;return document.onmousemove=function(t){var n=t.pageX-r-s.left,o=e.width()-i.width();n<0&&(n=0),n>o&&(n=o),i.css("left",n+"px")},document.onmouseup=function(){document.onmousemove=document.onmouseup=null},!1}))},_bindPopup:function(){var t=this,e=this.info,i=this.box.findElem("drop-popup"),n=this.box.findBlockInside("attach"),o=this.box.findBlockInside({block:"button",modName:"type",modVal:"start-upload"}),s=this.box.findBlockInside({block:"button",modName:"type",modVal:"abort-uploads"}),r=this.box.findBlockInside({block:"button",modName:"type",modVal:"clear-list"}),a=this.box.findBlockInside({block:"button",modName:"type",modVal:"close"});n&&n.on("change",(function(){t._prepareData(n.findElem("control")[0])})),!this.params.autoupload&&o&&o.bindTo("click",this.sendFiles.bind(t)),a&&a.bindTo("click",(function(){t._clearList.apply(t),t.popup.hide()})),s&&s.bindTo("click",this.uploadsAbort.bind(this)),r&&r.bindTo("click",this._clearList.bind(this)),i.on("drop",(function(e){e.preventDefault();var n=e.originalEvent.dataTransfer;t.delMod(i,"is"),t.box.delMod(i,"is"),t._prepareData(n)})).on("dragover",(function(t){t.preventDefault()})),this.box.domElem.on("dragenter",(function(){t.dragFlag&&(t.dragFlag=!1,t.box.setMod(i,"is","show"),t._unlockDrag())})),this.box.domElem.on("dragleave",(function(){t.dragFlag&&(t.dragFlag=!1,t.box.delMod(i,"is"),t._unlockDrag())})),this.popup.on("hide",(function(){t.summary.filesTotal&&e.setMod("is","show")})),e.findElem("box").on("dblclick",(function(){t.popup.show(),e.delMod("is")}))},_bind:function(){var t=this,e=this.findElem("drop-zone"),i=this.findBlockInside("attach");this.params.choosefile&&i.on("change",(function(){t._prepareData(i.findElem("control")[0])})),this.params.dropzone&&e.on("dragenter dragleave",(function(){t.dragFlag&&(t.dragFlag=!1,t.toggleMod(e,"is","hovered",""),t._unlockDrag())})).on("drop",(function(i){i.preventDefault();var n=i.originalEvent.dataTransfer;t.delMod(e,"is"),t.box.delMod(e,"is"),t._prepareData(n)})).on("dragover",(function(t){t.preventDefault()})),this.on("uploadabort uploadsabort filesready fileready uploadsuccess uploaderror clearlist",(function(){t._updateSummary(),t._updateSummaryRow()})),this.on("progress drag",(function(e,i){t._updateSummary(),t._updateSummaryRow(),t._progressUpdate(i)})),this.on("thumbready",(function(e,i){var n=i.key;t.files[n].dataurl=i.dataurl,t.files[n].previewHeight=i.height,t.files[n].previewWidth=i.width,BEM.DOM.update(t.files[n].node.findElem("icon"),i.img)}))},_unlockDrag:function(){setTimeout(function(){this.dragFlag=!0}.bind(this),0)},_clearList:function(){Object.keys(this.files).forEach((function(t){"uploading"!==this.files[t].status&&(this.files[t].hasOwnProperty("req")&&this.files[t].req.abort(),BEM.DOM.destruct(this.files[t].node.domElem),delete this.files[t])}),this),this.trigger("clearlist")},_prepareData:function(t){if(t.files.length)this._handleFiles(t.files);else if(t.getData("text/html")&&t.getData("text/html").substr("img")){var e,i,n,o,s,r,a,l=this,c=t.getData("text/html"),u=new DOMParser,h=u.parseFromString(c,"text/html")||u.parseFromString(c,"text/xml"),d=$("img",h).attr("src");if(-1!==d.indexOf(";base64,")){i=(e=d.split(";base64,"))[0].split(":")[1],o=(n=atob(e[1])).length,s=new Uint8Array(o);for(var f=0;f<o;++f)s[f]=n.charCodeAt(f);r=[new Blob([s],{type:i})],this._handleFiles(r)}else a=l.box.findElem("drop-popup"),$.ajax({type:l.params.ajaxType||"POST",url:this.params.url,data:d,beforeSend:function(){l.popup.show(),l.box.setMod(a,"is","waiting"),BEM.DOM.update(a,BEMHTML.apply(l._getSpin())),l.box.findBlockInside(a,"spin").setMod("progress","yes")},success:function(t){BEM.DOM.destruct(l.box.findBlockInside(a,"spin").domElem),l.box.delMod(a,"is"),l._handleFiles([JSON.parse(t)])}})}},_toBytes:function(t){return t.value*Math.pow(1024,["kb","mb","gb"].indexOf(t.prefix)+1)},_calculateStatus:function(t){var e="ready",i=this.params.fileLimit;return i&&t.size>this._toBytes(i)?e="fileIsToLarge":t.hasOwnProperty("data")&&(e="done"),e},_handleFiles:function(t){var e=this,i=Array.prototype.slice.apply(t);this.popup.show(),this.info.hasMod("is","show")&&this.info.delMod("is"),i.forEach((function(t,i){var n="file_"+Object.keys(e.files).length,o=e._calculateStatus(t),s=BEMHTML.apply(e._getFileRow(n,e._getFriendlyData(t)));(BEM.DOM.prepend(e.box.findElem("list"),s),e.files[n]=t,t.total=t.size+(t.name&&t.name.length||0)+t.type.length+164,t.node=e.box.findBlockInside({block:"uploader-row",modName:"file",modVal:n}),t.status=o,t.data&&(t.progress=100,t.loaded=t.total,t.node.setMod("status","done"),e.trigger("drag",n)),e._bindRow(n),t.type.match(/image.*/))&&(BEM.DOM.update(e.files[n].node.findElem("icon"),BEMHTML.apply(e._getSpin())),e.files[n].node.findBlockInside("spin").setMod("progress","yes"),e._getThumbnail(t,n));e.trigger("fileready",n)})),this.trigger("filesready"),this.readyForUpload=this.__self.getFilesList(),Object.keys(this.files).forEach((function(t){var i="ready"===e.files[t].status;i&&e.params.autoupload?e._send(t):i&&e.readyForUpload.push(t)}))},_getOverallPercent:function(){var t=this,e=0,i=0,n=0,o=0;return Object.keys(this.files).length&&(Object.keys(this.files).forEach((function(n){e+=t.files[n].total||0,i+=t.files[n].loaded||0})),o=e/100,n=Math.round(i/o)),n},_send:function(t){var e=this,i=new FormData;i.append("data",this.files[t]),this.files[t].req=$.ajax({xhr:function(){var i=new window.XMLHttpRequest;return i.upload.addEventListener("progress",(function(i){if(i.lengthComputable){var n=i.loaded/i.total*100<<0;e.files[t].progress=n,e.files[t].loaded=i.loaded,e.files[t].total=i.total,e.trigger("progress",t)}}),!1),i},type:e.params.ajaxType||"POST",url:this.params.url,data:i,processData:!1,contentType:!1,beforeSend:function(){e._beforeUpload(t)},success:function(i){e._uploadSuccess(i,t),e.files[t].loaded=e.files[t].total,e.files[t].progress=100,e._progressUpdate(t)},error:function(i){e._uploadError(t)}}),this.params.hasOwnProperty("ajaxExtend")&&this._ajaxExtend(t)},_ajaxExtend:function(t){var e=this.params.ajaxExtend;Object.keys(e).forEach(function(i){this.files[t].req[i]=e[i]}.bind(this))},_beforeUpload:function(t){this.files[t].status="uploading"},_uploadError:function(t){this.files[t].node.setMod("status","error"),this.trigger("uploaderror")},_uploadSuccess:function(t,e){this.files[e].response=t,this.files[e].status="done",this.files[e].node.setMod("status","done"),this.trigger("uploadsuccess",this.files[e])},_progressUpdate:function(t){var e=this.files[t],i=this._getOptimalSize(e.loaded)+" / "+this._getOptimalSize(e.total);e.node.findElem("bar").css("width",e.progress+"%"),BEM.DOM.update(e.node.findElem("calc"),i)},_updateSummary:function(){var t=this,e=Object.keys(this.files),i=0,n=0;this.summary.filesTotal=e.length,this.summary.filesUploaded=0,this.summary.percent=this._getOverallPercent(),e.forEach((function(e){"done"===t.files[e].status&&t.summary.filesUploaded++,i+=t.files[e].total,n+=t.files[e].loaded})),this.summary.bytesTotal=i,this.summary.total=this._getOptimalSize(i),this.summary.uploaded=this._getOptimalSize(n)},_updateSummaryRow:function(){var t=this.box.findElem("panel"),e="Загружено файлов: ".concat(this.summary.filesUploaded," из ",this.summary.filesTotal," (",this.summary.percent,"%)");BEM.DOM.update(t,e),BEM.DOM.update(this.info.findElem("box"),e)},_getFriendlyData:function(t){return{type:this._getFileType(t.name||t.type),name:t.name,size:this._getOptimalSize(t.size)}},_getThumbnail:function(t,e){var i=this,n=new FileReader;t.data?this._getThumbImage(t.data,t.type,e):(n.onloadend=function(){i._getThumbImage(n.result,t.type,e)},n.readAsDataURL(t))},_getSpin:function(){return{block:"spin",mods:{theme:"gray-32"}}},_getThumbImage:function(t,e,i){var n=this,o=new Image,s=this.params.thumbnail;o.onload=function(){var t=s&&s.width||240,r=s&&s.height||140,a=o.width,l=o.height,c=document.createElement("canvas"),u=null,h=!1,d={},f=a>l&&a>t,p=l>a&&l>r,m=l===a&&l>r;!function s(){var _=new Image;if(_.onload=function(){o=_,s()},f&&o.width>>1>t||p&&o.height>>1>r||m&&o.height>>1>r)h=!0,a>>=1,l>>=1,c.width=a,c.height=l,c.getContext("2d").drawImage(o,0,0,a,l),u=c.toDataURL(e),_.src=u;else{f?(l*=t/a,a=t,l>r&&(a*=r/l,l=r)):(p||m)&&(a*=r/l,l=r,a>t&&(l*=t/a,a=t)),a=Math.round(a),l=Math.round(l),c.width=a,c.height=l,c.getContext("2d").drawImage(o,0,0,a,l),u=c.toDataURL(e);var g=new Image;g.src=u,(h||o.width>t>>2||o.height>r>>2)&&(a>l&&a/l>2?(g.width=a>>2,$(g).addClass("by-width can-increased")):(g.height=l>>2,$(g).addClass("by-height can-increased"))),d.key=i,d.img=g,d.dataurl=u,d.width=a,d.height=l,n.trigger("thumbready",d)}}()},o.src=t},_getFileType:function(t){var e=t.split(".")?t.split("."):t.split("/");return e[e.length-1]},_getOptimalSize:function(t){for(var e=["B","Kb","Mb","Gb"],i=0;i<e.length;i++){var n=t/1024;if(!(n>1))return t.toFixed(2)+e[i];t=n}},_getFileRow:function(t,e){return{block:"uploader-row",mods:{file:t},content:[{elem:"icon",elemMods:{type:e.type},content:"."+e.type},{elem:"progress",content:[{elem:"bar"},{elem:"name",content:e.name},{elem:"calc"}]},{elem:"abort"}]}}},{getFiles:function(){return this.files||(this.files={})},getSummary:function(){return this.summary||(this.summary={})},getFilesList:function(){return this.readyForUpload||(this.readyForUpload=[])},getInfo:function(){return this.info||(this.info=((t=$(BEMHTML.apply({block:"uploader-info",content:{elem:"box"}}))).appendTo("body"),t=t.bem("uploader-info")));var t},checkBind:function(){return!this.binded&&(this.binded=!0,!0)},getPopup:function(t){var e,i=this;return this.popup||(this.popup=((e=$(BEMHTML.apply({block:"popup",mods:{"m-uploader":"yes",type:"modal",position:"fixed","has-close":"yes",behaviour:"scrollable"},underMods:{type:"paranja"},content:[{elem:"content",content:i.getContent(t)}]}))).appendTo("body"),e=e.bem("popup")))},getContent:function(t){return{block:"uploader-box",content:[{elem:"drop-popup"},{elem:"panel"},{elem:"list"},{elem:"controls",content:this.getControls(t)}]}},getControls:function(t){var e={upload:this.buttonUpload.bind(this,t),attach:this.buttonAttach,abort:this.buttonAbort,clear:this.buttonClear,close:this.buttonClose},i={upload:this.buttonUpload.bind(this,t),attach:this.buttonAttach,abort:this.buttonAbort,clear:this.buttonClear};return t.controls?t.controls.map((function(t){return e[t]()})):Object.keys(i).map((function(t){return i[t]()}))},buttonUpload:function(t){return(!t.autoupload||"no"===t.autoupload)&&{block:"button",mods:{theme:"action",type:"start-upload",size:"s"},content:"Загрузить"}},buttonAttach:function(){return{block:"attach",mods:{theme:"normal",size:"s"},content:[{block:"button",mods:{theme:"normal",size:"s"},mix:[{block:"attach",elem:"button"}],controlAttrs:{multiple:"yes"},content:"Выбрать файл"}]}},buttonAbort:function(){return{block:"button",mods:{theme:"normal",size:"s",type:"abort-uploads"},content:"Отменить все загрузки"}},buttonClear:function(){return{block:"button",mods:{theme:"normal",size:"s",type:"clear-list"},content:"Очистить"}},buttonClose:function(){return{block:"button",mods:{theme:"normal",size:"s",type:"close"},content:"Закрыть"}}})},794:function(t,e){BEM.DOM.decl("m-head-arrow",{_firstCall:!0,_apiHost:"https://staff.yandex-team.ru/navigation-api/",onSetMod:{js:function(){var t=this;this.popup=this.findBlockInside("popup2").setAnchor(this.domElem),this.bindTo("click",(function(e){t._firstCall&&t._collectData(),t.popup.toggleMod("visible","yes","")}))}},_collectData:function(){if(this._supportLS()){var t=this._getStorageData();this._compareDate(t.lastCallDate)?(this.popup.setContent(this._buildContent(t)),this._firstCall=!1):this._buildServices()}else this._buildServices()},_buildServices:function(){var t=this;this._getServices().done((function(e){t.popup.setContent(t._buildContent(e)),t._saveLS(e),t._firstCall=!1})).fail((function(e,i){t.popup.setContent(t._buildContent({error:i}))}))},_getServices:function(){return $.ajax({url:this.params.host||this._apiHost,timeout:3e3,xhrFields:{withCredentials:!0}})},_buildContent:function(t){var e;return e=t.error?{block:"m-head-services",mods:{type:"list"},content:{elem:"error",content:BEM.I18N("m-head-arrow","error")}}:{block:"m-head-services",mix:[{block:"i-font",mods:{face:"textbook"}}],content:[{elem:"list",elemMods:{type:"main"},content:this._buildList(t.main)},{elem:"list",content:this._buildList(t.secondary)}]},BEMHTML.apply(e)},_buildList:function(t){var e=BEM.I18N.lang(),i=[{elem:"left",content:[]},{elem:"right",content:[]}],n=t.length/2;return t.forEach((function(t,o){var s=n>i[0].content.length?0:1,r={block:"link",mods:{state:t.application_id===this.params.type?"current":void 0,theme:"black"},url:"ru"===e?t.url:t["url_"+e]||t.url,content:[t.icon&&t.icon.length&&{block:"m-head-services",elem:"icon",icon:t.icon},"ru"===e?t.title:t["title_"+e]]};i[s].content.push(r)}),this),i},_saveLS:function(t){var e=new Date,i=new Date(e.getFullYear(),e.getMonth(),e.getDate()).valueOf();t.lastCallDate=i,localStorage.setItem("m-head",JSON.stringify(t))},_supportLS:function(){try{return"localStorage"in window&&null!==window.localStorage&&localStorage["m-head"]}catch(t){return!1}},_compareDate:function(t){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate()).valueOf()===t},_getStorageData:function(){return JSON.parse(localStorage.getItem("m-head"))}})},795:function(t,e){BEM.DOM.decl("m-head-menu",{destruct:function(){return this._morePopup&&this._morePopup.domElem&&BEM.DOM.destruct(this._morePopup.domElem),this.__base.apply(this,arguments)},_onHasSubClick:function(t){var e=this,i=t.data.domElem;this.target=i,this.setMod(i,"is","opened"),this.__self._headMenuPopup||(this.__self._headMenuPopup=this.findBlockOn("popup","popup2").on("beforeClose",(function(){e.delMod(e.target,"is")}))),this.__self._headMenuPopup.setContent(BEMHTML.apply(i.data("content"))).setAnchor(i).toggleMod("visible","yes")},_onMoreClick:function(t){this._morePopup||(this._morePopup=this.findBlockInside("more","popup2"),this._morePopup.setAnchor(t.data.domElem)),this._morePopup.toggleMod("visible","yes")}},{live:function(){this.liveBindTo({elem:"item",modName:"hassub",modVal:"yes"},"click",(function(t){this._onHasSubClick(t)})).liveBindTo("more","click",(function(t){this._onMoreClick(t)}))}})},796:function(t,e){BEM.DOM.decl({block:"m-editor-popup",modName:"type",modVal:"picture"},{onSetMod:{js:function(){var t=this;this._widthInput=this.findBlockInside({block:"textinput",modName:"picture",modVal:"width"}),this._heightInput=this.findBlockInside({block:"textinput",modName:"picture",modVal:"height"}),this._linkInput=this.findBlockInside({block:"textinput",modName:"picture",modVal:"link"}),this._progress=this.findBlockInside("progress"),this._attach=this.findBlockInside("attach"),this._attach&&this._attach.on("change",this._onFileSelected,this).on("reset",(function(){t._linkInput.delMod("disabled").val("")})),this._uploader=this.findBlockInside("mi-uploader"),this._uploader&&this._uploader.on("success",this._onUploadSuccess,this).on("error",this._onUploadError,this).on("progress",(function(e,i){t._progress.update(i.progress/100,"linear")}))}},processParams:function(t){var e,i="";return(e=$.extend({},{pictureWidth:0,pictureHeight:0,pictureLink:""},t)).pictureLink&&(i=e.pictureLink,(e.pictureWidth||e.pictureHeight||!/\.jpg$|png$|gif$/.test(e.pictureLink))&&(i=e.pictureWidth+"x"+e.pictureHeight+":"+i)),i},_onFileSelected:function(t,e){var i=this._attach.elem("control")[0].files;i.length&&(this._attach.delMod(this._attach.elem("text"),"error"),this._attach.setMod("disabled","yes").delMod(this._attach.elem("reset"),"visibility"),this._uploader.clear().setData(i[0]).getFiles()[0].send())},_onUploadSuccess:function(t,e){var i;e.data.errors?this._onUploadError():(i=this._getUploadedFileURL(e),this._linkInput.setMod("disabled","yes").val(i),this._progress.update(0),this._attach.delMod("disabled").setMod(this._attach.elem("reset"),"visibility","visible"),this.trigger("event",{name:"uploaded",data:e}))},_onUploadError:function(t){this._progress.update(0),this._attach.delMod("disabled").setMod(this._attach.elem("holder"),"state","hidden").setMod(this._attach.elem("holder"),"file","unknown").resetFile(),this._attach.setMod(this._attach.elem("text"),"error","yes").elem("text").text(BEM.I18N("m-editor-popup","uploadError")+"...")},_getUploadedFileURL:function(t){return(this.params.uploadURLPath&&this.params.uploadURLPath.split(".")||[]).forEach((function(e){t=t[e]}),this),t}})},797:function(t,e){BEM.DOM.decl({block:"m-editor-popup",modName:"type",modVal:"file"},{onSetMod:{js:function(){var t=this;this._progress=this.findBlockInside("progress"),this._attach=this.findBlockInside("attach"),this._attach&&this._attach.on("change",this._onFileSelected,this),this._uploader=this.findBlockInside("mi-uploader"),this._uploader&&this._uploader.on("success",this._onUploadSuccess,this).on("error",this._onUploadError,this).on("progress",(function(e,i){t._progress.update(i.progress/100,"linear")}))}},_onFileSelected:function(t,e){var i=this._attach.elem("control")[0].files;i.length&&(this._attach.delMod(this._attach.elem("text"),"error"),this._attach.setMod("disabled","yes").delMod(this._attach.elem("reset"),"visibility"),this._uploader.clear().setData(i[0]).getFiles()[0].send())},_onUploadSuccess:function(t,e){e.data.errors?this._onUploadError():(this._progress.update(0),this._attach.delMod("disabled").setMod(this._attach.elem("reset"),"visibility","visible"),this.trigger("event",{name:"uploaded",data:e}),this.trigger("add-text",this._getUploadedFileURL(e)))},_onUploadError:function(t){this._progress.update(0),this._attach.delMod("disabled").setMod(this._attach.elem("holder"),"state","hidden").setMod(this._attach.elem("holder"),"file","unknown").resetFile(),this._attach.setMod(this._attach.elem("text"),"error","yes").elem("text").text(BEM.I18N("m-editor-popup","uploadError")+"...")},_getUploadedFileURL:function(t){return(this.params.uploadURLPath&&this.params.uploadURLPath.split(".")||[]).forEach((function(e){t=t[e]}),this),t}})}}]);
//# sourceMappingURL=e57e63961deb015e9ad4.js.map